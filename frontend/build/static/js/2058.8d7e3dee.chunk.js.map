{"version":3,"file":"static/js/2058.8d7e3dee.chunk.js","mappings":"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","sources":["components/ChatBotIcon/ping.js","components/ChatBotIcon/ChatBotIcon.jsx","Pages/Footer.jsx","Pages/TestHomeHeader.jsx","Pages/Logout/Logout.jsx"],"sourcesContent":["const createPingSound = () => {\r\n  // Simple WAV file data URL with a short beep\r\n  // This is a minimal WAV file containing a 440Hz tone for about 200ms\r\n  const wavData = \"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmgfCdKR2/LVdiMFl5qQ0NJhJwAVZrXn6UoMCtmr5uW5bhoFl6mc0dVmDAOJmdR+UD0hD2K76dVrHwgXirLe2HIqBTyDyfHchzIFC0G25+mxWhAJYKHV7b1qLwU0g8rx34k1BTGByvHciEAHGGy88tyWPgUmfMs+4YlEBTqByvHci0EGH3LB9deWP\";\r\n  \r\n  return wavData;\r\n};\r\n\r\n// Export the ping sound\r\nconst beepUrl = createPingSound();\r\nexport default beepUrl;\r\n","// frontend/src/components/ChatBotIcon/ChatBotIcon.jsx\r\nimport React, { useEffect, useRef, useState, useMemo, useCallback } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport ReactDOM from \"react-dom\";\r\nimport API from \"../../helpers/API\";\r\nimport { useSocket } from \"../../Context/SocketContext\";\r\nimport { useAuth } from \"../../Context/AuthContext\";\r\nimport { logWithIcon } from \"../../utils/consoleIcons\";\r\nimport \"./ChatBotIcon.css\";\r\nimport beepUrl from \"./ping\";\r\nimport FavIconLogo from \"./FaviIcon-Logo.png\";\r\nimport Modal from 'react-modal';\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst STORAGE_USER_KEY = process.env.REACT_APP_CHAT_STORAGE_USER_KEY || \"chat_widget_userinfo_v1\";\r\nconst STORAGE_MESSAGES_PREFIX = process.env.REACT_APP_CHAT_STORAGE_MESSAGES_PREFIX || \"chat_widget_messages_v1_\";\r\nconst STORAGE_INPUT_KEY = process.env.REACT_APP_CHAT_INPUT_KEY || \"chat_widget_input_text\";\r\n\r\nfunction timeAgo(ts) {\r\n  if (!ts) return \"\";\r\n  const d = new Date(ts);\r\n  const diff = Math.floor((Date.now() - d.getTime()) / 1000);\r\n  if (diff < 10) return \"just now\";\r\n  if (diff < 60) return `${diff}s`;\r\n  if (diff < 3600) return `${Math.floor(diff / 60)}m`;\r\n  if (diff < 86400) return `${Math.floor(diff / 3600)}h`;\r\n  return d.toLocaleDateString();\r\n}\r\n\r\nconst defaultAvatar =\r\n  \"https://img.freepik.com/premium-vector/account-icon-user-icon-vector-graphics_292645-552.jpg?w=300\";\r\n\r\nconst getProfileImageSrc = (userPhoto, isGuest = false) => {\r\n  if (isGuest) return defaultAvatar;\r\n  if (!userPhoto) return \"\";\r\n  const isUploadPath =\r\n    typeof userPhoto === \"string\" &&\r\n    userPhoto.startsWith(\"/uploads/userAvatars/\");\r\n  return isUploadPath\r\n    ? process.env.REACT_APP_API_URL + userPhoto\r\n    : userPhoto;\r\n};\r\n\r\n// Fixed fetchBusinessHours function with proper timezone and error handling\r\nasync function fetchBusinessHours() {\r\n  try {\r\n    logWithIcon.info('Fetching business hours with Toronto timezone...');\r\n    const res = await API.get(`/api/v1/businessHours/checkBusinessHoursStatus`, {\r\n      params: {\r\n        timezone: 'America/Toronto' // Toronto timezone (EST/EDT)\r\n      }\r\n    });\r\n    \r\n    if (res.data && res.data.success && res.data.data) {\r\n      const businessData = res.data.data;\r\n      logWithIcon.success('Business hours fetched successfully:', {\r\n        isOpen: businessData.isOpen,\r\n        timezone: businessData.timezone,\r\n        currentTime: businessData.currentTime\r\n      });\r\n      return businessData;\r\n    } else {\r\n      logWithIcon.warning('Business hours API returned unexpected format:', res.data);\r\n      return null;\r\n    }\r\n  } catch (err) {\r\n    logWithIcon.error(\"Failed to fetch business hours:\", err);\r\n    return null;\r\n  }\r\n}\r\n\r\nconst ChatBotIcon = () => {\r\n  const { socket, isConnected } = useSocket();\r\n  const [auth] = useAuth();\r\n  const userFromAuth = auth?.user;\r\n  const navigate = useNavigate();\r\n\r\n  const [input, setInput] = useState(\"\");\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [session, setSession] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [businessInfo, setBusinessInfo] = useState(null);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [showGuestForm, setShowGuestForm] = useState(false);\r\n  \r\n  const [isSubmittingGuest, setIsSubmittingGuest] = useState(false);\r\n  const [guestFormSubmitted, setGuestFormSubmitted] = useState(false);\r\n  const [guestFormErrors, setGuestFormErrors] = useState({});\r\n  const [defaultMessagesLoaded, setDefaultMessagesLoaded] = useState(false);\r\n  const [hasUserSentMessage, setHasUserSentMessage] = useState(false);\r\n  const [showQuitConfirm, setShowQuitConfirm] = useState(false);\r\n  const [pendingMessages, setPendingMessages] = useState(new Set());\r\n  const [isQuitting, setIsQuitting] = useState(false);\r\n\r\n  const [guestInfo, setGuestInfo] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    phone: ''\r\n  });\r\n\r\n  const audioRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n  const quitTimeoutRef = useRef(null);\r\n  const businessHoursIntervalRef = useRef(null);\r\n\r\n  const userFormSubmitted = useMemo(() => {\r\n    if (userFromAuth) {\r\n      logWithIcon.success('User is authenticated:', userFromAuth.email);\r\n      return true;\r\n    }\r\n    logWithIcon.active('Guest form submission status:', guestFormSubmitted);\r\n    return guestFormSubmitted;\r\n  }, [userFromAuth, guestFormSubmitted]);\r\n\r\n  const shouldShowGuestForm = useMemo(() => {\r\n    const result = !userFromAuth && !guestFormSubmitted;\r\n    logWithIcon.guest('Should show guest form:', {\r\n      userFromAuth: !!userFromAuth,\r\n      guestFormSubmitted,\r\n      result\r\n    });\r\n    return result;\r\n  }, [userFromAuth, guestFormSubmitted]);\r\n\r\n  const storageKey = useMemo(\r\n    () => STORAGE_MESSAGES_PREFIX + (session?._id || session?.id || \"guest\"),\r\n    [session]\r\n  );\r\n\r\n  // Enhanced quit functionality with comprehensive cleanup\r\n  const handleQuit = useCallback(async () => {\r\n    if (isQuitting) {\r\n      console.warn('Quit already in progress, ignoring duplicate request');\r\n      return;\r\n    }\r\n\r\n    console.log('Starting enhanced quit sequence...');\r\n    setIsQuitting(true);\r\n\r\n    try {\r\n      // 1. Clear business hours interval immediately\r\n      if (businessHoursIntervalRef.current) {\r\n        clearInterval(businessHoursIntervalRef.current);\r\n        businessHoursIntervalRef.current = null;\r\n      }\r\n\r\n      // 2. Immediately clear UI state to prevent freezing\r\n      setShowQuitConfirm(false);\r\n      setIsOpen(false);\r\n\r\n      // 3. Use setTimeout to defer heavy operations\r\n      setTimeout(() => {\r\n        // 4. Socket cleanup (non-blocking)\r\n        if (socket?.connected && session) {\r\n          socket.emit('session:end', { \r\n            sessionId: session._id || session.id \r\n          });\r\n          console.log('Socket session end signal sent');\r\n        }\r\n\r\n        // 5. Batch state updates to prevent multiple re-renders\r\n        ReactDOM.unstable_batchedUpdates(() => {\r\n          setMessages([]);\r\n          setSession(null);\r\n          setUnreadCount(0);\r\n          setDefaultMessagesLoaded(false);\r\n          setHasUserSentMessage(false);\r\n          setPendingMessages(new Set());\r\n          setInput(\"\");\r\n          setBusinessInfo(null); // Clear business info on quit\r\n        });\r\n\r\n        // 6. Reset guest form states if applicable\r\n        if (!userFromAuth) {\r\n          setShowGuestForm(false);\r\n          setGuestFormSubmitted(false);\r\n          setGuestFormErrors({});\r\n          setIsSubmittingGuest(false);\r\n          setGuestInfo({\r\n            firstName: '',\r\n            lastName: '',\r\n            email: '',\r\n            phone: ''\r\n          });\r\n        }\r\n\r\n        // 7. localStorage cleanup (asynchronous)\r\n        setTimeout(() => {\r\n          try {\r\n            const currentSessionKey = session ? (STORAGE_MESSAGES_PREFIX + (session.id || session._id)) : null;\r\n            \r\n            if (currentSessionKey) {\r\n              localStorage.removeItem(currentSessionKey);\r\n              console.log(`Cleared current session: ${currentSessionKey}`);\r\n            }\r\n            \r\n            // Clean up all chat-related storage\r\n            const keysToRemove = [];\r\n            for (let i = 0; i < localStorage.length; i++) {\r\n              const key = localStorage.key(i);\r\n              if (key && key.startsWith(STORAGE_MESSAGES_PREFIX)) {\r\n                keysToRemove.push(key);\r\n              }\r\n            }\r\n            \r\n            keysToRemove.forEach(key => {\r\n              localStorage.removeItem(key);\r\n              console.log(`Cleaned up: ${key}`);\r\n            });\r\n            \r\n            // Clear input and guest info if needed\r\n            localStorage.removeItem(STORAGE_INPUT_KEY);\r\n            \r\n            if (!userFromAuth) {\r\n              localStorage.removeItem(STORAGE_USER_KEY);\r\n              console.log('Cleared guest user information');\r\n            }\r\n            \r\n            console.log('localStorage cleanup completed');\r\n          } catch (error) {\r\n            console.warn('localStorage cleanup error (non-critical):', error);\r\n          }\r\n        }, 0);\r\n\r\n        console.log('Enhanced quit sequence completed successfully');\r\n        \r\n        // 8. Reset isQuitting after cleanup is complete\r\n        setIsQuitting(false);\r\n      }, 0);\r\n      \r\n    } catch (error) {\r\n      console.error('Error during quit sequence:', error);\r\n      setIsQuitting(false);\r\n    }\r\n  }, [session, userFromAuth, socket]);\r\n\r\n  // Reset chat to completely initial state\r\n  const resetChatToInitialState = useCallback(() => {\r\n    if (isQuitting) return; // Prevent conflicts\r\n    \r\n    console.log('Resetting chat to initial state...');\r\n    \r\n    // Clear business hours interval\r\n    if (businessHoursIntervalRef.current) {\r\n      clearInterval(businessHoursIntervalRef.current);\r\n      businessHoursIntervalRef.current = null;\r\n    }\r\n    \r\n    // Batch all state updates\r\n    const resetState = () => {\r\n      setInput(\"\");\r\n      setIsOpen(false);\r\n      setSession(null);\r\n      setMessages([]);\r\n      setBusinessInfo(null);\r\n      setUnreadCount(0);\r\n      setShowGuestForm(false);\r\n      setIsSubmittingGuest(false);\r\n      setGuestFormSubmitted(false);\r\n      setGuestFormErrors({});\r\n      setDefaultMessagesLoaded(false);\r\n      setHasUserSentMessage(false);\r\n      setShowQuitConfirm(false);\r\n      setPendingMessages(new Set());\r\n      \r\n      if (!userFromAuth) {\r\n        setGuestInfo({\r\n          firstName: '',\r\n          lastName: '',\r\n          email: '',\r\n          phone: ''\r\n        });\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(resetState);\r\n    console.log('Chat state reset completed');\r\n  }, [userFromAuth, isQuitting]);\r\n\r\n  const resetGuestForm = useCallback(() => {\r\n    if (isQuitting) return;\r\n    \r\n    setShowGuestForm(false);\r\n    setGuestFormErrors({});\r\n    setIsSubmittingGuest(false);\r\n  }, [isQuitting]);\r\n\r\n  const cancelGuestForm = useCallback(() => {\r\n    if (isQuitting) return;\r\n    \r\n    setShowGuestForm(false);\r\n    setGuestFormErrors({});\r\n    setIsSubmittingGuest(false);\r\n    setGuestFormSubmitted(false);\r\n    setHasUserSentMessage(false);\r\n\r\n    setMessages(prev => {\r\n      const lastMessage = prev[prev.length - 1];\r\n      if (lastMessage && lastMessage.from === 'user' && !guestFormSubmitted) {\r\n        return prev.slice(0, -1);\r\n      }\r\n      return prev;\r\n    });\r\n\r\n    try {\r\n      localStorage.removeItem(STORAGE_USER_KEY);\r\n    } catch (error) {\r\n      console.warn(\"Failed to clear guest info from localStorage:\", error);\r\n    }\r\n\r\n    setGuestInfo({\r\n      firstName: '',\r\n      lastName: '',\r\n      email: '',\r\n      phone: ''\r\n    });\r\n\r\n    console.log('Guest form cancelled and state reset');\r\n  }, [guestFormSubmitted, isQuitting]);\r\n\r\n  const handleModalOverlayClick = useCallback((e) => {\r\n    if (e.target === e.currentTarget && !isSubmittingGuest && !isQuitting) {\r\n      resetGuestForm();\r\n    }\r\n  }, [isSubmittingGuest, isQuitting, resetGuestForm]);\r\n\r\n  // Cleanup timeouts on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (quitTimeoutRef.current) {\r\n        clearTimeout(quitTimeoutRef.current);\r\n      }\r\n      if (businessHoursIntervalRef.current) {\r\n        clearInterval(businessHoursIntervalRef.current);\r\n        businessHoursIntervalRef.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // FIXED: Real-time business hours checking with proper error handling and logging\r\n  useEffect(() => {\r\n    // Clear any existing interval\r\n    if (businessHoursIntervalRef.current) {\r\n      clearInterval(businessHoursIntervalRef.current);\r\n      businessHoursIntervalRef.current = null;\r\n    }\r\n\r\n    // Only set up interval if chat is open and not quitting\r\n    if (isOpen && !isQuitting) {\r\n      console.log('Setting up business hours real-time monitoring...');\r\n      \r\n      // Initial fetch with proper error handling\r\n      const initialFetch = async () => {\r\n        try {\r\n          const biz = await fetchBusinessHours();\r\n          if (biz) {\r\n            console.log('Initial business hours status:', {\r\n              isOpen: biz.isOpen,\r\n              timezone: biz.timezone || 'America/Toronto',\r\n              currentTime: biz.currentTime\r\n            });\r\n            setBusinessInfo(biz);\r\n          } else {\r\n            console.warn('Initial business hours fetch returned null, using fallback');\r\n            setBusinessInfo({\r\n              isOpen: false,\r\n              timezone: 'America/Toronto',\r\n              currentTime: new Date().toISOString(),\r\n              message: 'Business hours temporarily unavailable'\r\n            });\r\n          }\r\n        } catch (error) {\r\n          console.error('Initial business hours fetch error:', error);\r\n          setBusinessInfo({\r\n            isOpen: false,\r\n            timezone: 'America/Toronto', \r\n            currentTime: new Date().toISOString(),\r\n            message: 'Business hours temporarily unavailable'\r\n          });\r\n        }\r\n      };\r\n      \r\n      initialFetch();\r\n      \r\n      // Set up interval to check every 30 seconds (more frequent for real-time updates)\r\n      businessHoursIntervalRef.current = setInterval(async () => {\r\n        if (isQuitting) {\r\n          console.log('Skipping business hours check - quitting in progress');\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          console.log('Checking business hours status...');\r\n          const biz = await fetchBusinessHours();\r\n          if (biz) {\r\n            setBusinessInfo(prevInfo => {\r\n              // Log status changes\r\n              if (prevInfo && prevInfo.isOpen !== biz.isOpen) {\r\n                console.log(`Business hours status changed: ${prevInfo.isOpen ? 'OPEN' : 'CLOSED'} -> ${biz.isOpen ? 'OPEN' : 'CLOSED'}`);\r\n              }\r\n              return biz;\r\n            });\r\n          }\r\n        } catch (error) {\r\n          console.error('Business hours interval check error:', error);\r\n        }\r\n      }, 30000); // Check every 30 seconds\r\n      \r\n      console.log('Business hours monitoring interval started');\r\n    }\r\n\r\n    return () => {\r\n      if (businessHoursIntervalRef.current) {\r\n        clearInterval(businessHoursIntervalRef.current);\r\n        businessHoursIntervalRef.current = null;\r\n        console.log('Business hours monitoring interval cleared');\r\n      }\r\n    };\r\n  }, [isOpen, isQuitting]);\r\n\r\n  useEffect(() => {\r\n    const handleEscKey = (e) => {\r\n      if (e.key === 'Escape' && !isQuitting) {\r\n        if (showGuestForm && !isSubmittingGuest) {\r\n          resetGuestForm();\r\n        } else if (showQuitConfirm) {\r\n          setShowQuitConfirm(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    if ((showGuestForm || showQuitConfirm) && !isQuitting) {\r\n      document.addEventListener('keydown', handleEscKey);\r\n      return () => document.removeEventListener('keydown', handleEscKey);\r\n    }\r\n  }, [showGuestForm, showQuitConfirm, isSubmittingGuest, isQuitting, resetGuestForm]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const savedInput = localStorage.getItem(STORAGE_INPUT_KEY);\r\n      if (savedInput && savedInput.trim()) {\r\n        setInput(savedInput);\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"Failed to load input from localStorage:\", error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen || isQuitting) return;\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      try {\r\n        if (input && input.trim()) {\r\n          localStorage.setItem(STORAGE_INPUT_KEY, input);\r\n        } else if (!input) {\r\n          localStorage.removeItem(STORAGE_INPUT_KEY);\r\n        }\r\n      } catch (error) {\r\n        console.warn(\"Failed to save input to localStorage:\", error);\r\n      }\r\n    }, 300);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [input, isOpen, isQuitting]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const raw = localStorage.getItem(STORAGE_USER_KEY);\r\n      if (raw) {\r\n        const u = JSON.parse(raw);\r\n        setGuestInfo({\r\n          firstName: u.firstName || \"\",\r\n          lastName: u.lastName || \"\",\r\n          email: u.email || \"\",\r\n          phone: u.phone || \"\"\r\n        });\r\n\r\n        const hasRequiredInfo = Boolean(u.firstName && u.email && u.firstName.trim() && u.email.trim());\r\n        setGuestFormSubmitted(hasRequiredInfo);\r\n        console.log('Loaded guest info from storage:', u, 'Form submitted:', hasRequiredInfo);\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"Failed to load guest info from localStorage:\", error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isQuitting) return;\r\n    \r\n    try {\r\n      const raw = localStorage.getItem(storageKey);\r\n      if (raw) {\r\n        const loadedMessages = JSON.parse(raw);\r\n        setMessages(loadedMessages);\r\n        const userMessageExists = loadedMessages.some(msg => msg.from === \"user\");\r\n        if (userMessageExists) {\r\n          setHasUserSentMessage(true);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"Failed to load messages from localStorage:\", error);\r\n    }\r\n  }, [storageKey, isQuitting]);\r\n\r\n  useEffect(() => {\r\n    if (isQuitting) return;\r\n    \r\n    try {\r\n      localStorage.setItem(storageKey, JSON.stringify(messages));\r\n    } catch (error) {\r\n      console.warn(\"Failed to save messages to localStorage:\", error);\r\n    }\r\n  }, [messages, storageKey, isQuitting]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && messagesEndRef.current && !isQuitting) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  }, [messages, isOpen, isQuitting]);\r\n\r\n  useEffect(() => {\r\n    if (beepUrl) audioRef.current = new Audio(beepUrl);\r\n  }, []);\r\n\r\n  const normalizeMessage = useCallback(\r\n    (msg) => {\r\n      if (!msg || isQuitting) return null;\r\n      const id = msg._id || msg.id || `m_${Date.now()}_${Math.random()}`;\r\n      const text = msg.message || msg.text || \"\";\r\n      const ts = msg.createdAt || msg.timestamp || Date.now();\r\n      const from =\r\n        msg.senderType === \"user\"\r\n          ? \"user\"\r\n          : msg.senderType === \"agent\"\r\n            ? \"agent\"\r\n            : msg.senderType === \"bot\"\r\n              ? \"bot\"\r\n              : msg.from || \"bot\";\r\n\r\n      const avatar =\r\n        msg.metadata?.senderAvatar ||\r\n        (from === \"agent\"\r\n          ? session?.agent?.photo || FavIconLogo\r\n          : from === \"user\"\r\n            ? getProfileImageSrc(userFromAuth?.photo, !userFromAuth)\r\n            : FavIconLogo);\r\n\r\n      return {\r\n        id,\r\n        from,\r\n        text,\r\n        timestamp: ts,\r\n        avatar,\r\n        quickReplies: msg.metadata?.quickReplies || msg.quickReplies || [],\r\n        metadata: msg.metadata || {},\r\n        ...msg,\r\n      };\r\n    },\r\n    [session, userFromAuth, isQuitting]\r\n  );\r\n\r\n  const handleIncomingMessage = useCallback(\r\n    (rawMsg) => {\r\n      if (isQuitting) {\r\n        console.log('Ignoring incoming message - chat is quitting');\r\n        return;\r\n      }\r\n      \r\n      const msg = normalizeMessage(rawMsg);\r\n      if (!msg) return;\r\n\r\n      if (msg.from === 'bot' && rawMsg.metadata?.redirectUrl) {\r\n        console.log(\"Redirecting to:\", rawMsg.metadata.redirectUrl);\r\n        const url = rawMsg.metadata.redirectUrl;\r\n        if (url.startsWith(\"/\")) {\r\n          window.open(url, '_blank');\r\n        }\r\n        return;\r\n      }\r\n\r\n      setMessages((prevMessages) => {\r\n        const messageExists = prevMessages.some(existingMsg =>\r\n          existingMsg.id === msg.id ||\r\n          (existingMsg.text === msg.text &&\r\n            existingMsg.from === msg.from &&\r\n            Math.abs(existingMsg.timestamp - msg.timestamp) < 1000)\r\n        );\r\n\r\n        if (messageExists) {\r\n          console.log('Duplicate message detected, skipping:', msg);\r\n          return prevMessages;\r\n        }\r\n\r\n        if (msg.from === 'user') {\r\n          setPendingMessages(prev => {\r\n            const newPending = new Set(prev);\r\n            for (const pendingId of prev) {\r\n              if (pendingId.includes(msg.text.substring(0, 10))) {\r\n                newPending.delete(pendingId);\r\n              }\r\n            }\r\n            return newPending;\r\n          });\r\n        }\r\n\r\n        return [...prevMessages, msg];\r\n      });\r\n      \r\n      if (msg.from === 'bot' && msg.quickReplies.length > 0) {\r\n        console.log('Bot message with quick replies:', msg.quickReplies);\r\n      }\r\n    },\r\n    [normalizeMessage, isQuitting]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!socket || isQuitting) return;\r\n\r\n    const onSessionCreated = (payloadRaw) => {\r\n      if (isQuitting) return;\r\n      \r\n      console.log('Session created event received:', payloadRaw);\r\n      const payload = payloadRaw?.body?.data || payloadRaw;\r\n      const sess = payload?.session || payload || null;\r\n      if (sess) {\r\n        setSession(sess);\r\n        console.log('Session set:', sess);\r\n        if (payload.businessHours) setBusinessInfo(payload.businessHours);\r\n      }\r\n      if (payload?.welcomeMessage) {\r\n        handleIncomingMessage(payload.welcomeMessage);\r\n      }\r\n    };\r\n\r\n    const guestSessionEvent = session?.guestEmail ? `guestUserSessionCreated:${session.guestEmail}` : null;\r\n    const onGuestSessionCreated = (payload) => {\r\n      if (isQuitting) return;\r\n      \r\n      console.log('Guest user session created event received:', payload);\r\n      if (payload?.welcomeMessage) {\r\n        handleIncomingMessage(payload.welcomeMessage);\r\n      }\r\n    };\r\n\r\n    const onMessageNew = (msg) => {\r\n      if (isQuitting) return;\r\n      \r\n      console.log('New message event received:', msg);\r\n      handleIncomingMessage(msg);\r\n    };\r\n\r\n    const onMessageStatus = ({ messageId, status }) => {\r\n      if (isQuitting) return;\r\n      \r\n      setMessages((prev) =>\r\n        prev.map((m) => (m.id === messageId ? { ...m, status } : m))\r\n      );\r\n    };\r\n\r\n    socket.on(\"session:created\", onSessionCreated);\r\n    socket.on(\"message:new\", onMessageNew);\r\n    socket.on(\"message:status\", onMessageStatus);\r\n    if (guestSessionEvent) {\r\n      socket.on(guestSessionEvent, onGuestSessionCreated);\r\n    }\r\n\r\n    return () => {\r\n      socket.off(\"session:created\", onSessionCreated);\r\n      socket.off(\"message:new\", onMessageNew);\r\n      socket.off(\"message:status\", onMessageStatus);\r\n      if (guestSessionEvent) {\r\n        socket.off(guestSessionEvent, onGuestSessionCreated);\r\n      }\r\n    };\r\n  }, [socket, handleIncomingMessage, session, isQuitting]);\r\n\r\n  const createSession = useCallback(async () => {\r\n    if (!socket || !socket.connected || session || isQuitting) {\r\n      console.log('Cannot create session:', {\r\n        hasSocket: !!socket,\r\n        isConnected: socket?.connected,\r\n        hasSession: !!session,\r\n        isQuitting\r\n      });\r\n      return;\r\n    }\r\n\r\n    let sessionData;\r\n    const timezone = 'America/Toronto'; // Force Toronto timezone\r\n\r\n    if (userFromAuth) {\r\n      console.log('Creating session for authenticated user:', userFromAuth.email);\r\n      sessionData = {\r\n        entryPoint: \"widget\",\r\n        selectedOption: \"general_inquiry\",\r\n        timezone,\r\n        firstName: userFromAuth.firstname || userFromAuth.firstName,\r\n        lastName: userFromAuth.lastname || userFromAuth.lastName,\r\n        email: userFromAuth.email,\r\n        phone: userFromAuth.phone || '',\r\n        metadata: {\r\n          authenticatedUser: true,\r\n          userId: userFromAuth._id || userFromAuth.id\r\n        }\r\n      };\r\n    } else {\r\n      console.log('Creating session for guest user:', guestInfo);\r\n      const { firstName, lastName, email, phone } = guestInfo;\r\n\r\n      try {\r\n        localStorage.setItem(\r\n          STORAGE_USER_KEY,\r\n          JSON.stringify({ firstName, lastName, email, phone })\r\n        );\r\n      } catch (error) {\r\n        console.warn(\"Failed to save guest info to localStorage:\", error);\r\n      }\r\n\r\n      sessionData = {\r\n        entryPoint: \"widget\",\r\n        selectedOption: \"general_inquiry\",\r\n        timezone,\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        phone,\r\n        guestEmail: email,\r\n        metadata: {\r\n          guestFirstName: firstName,\r\n          guestLastName: lastName,\r\n          guestPhone: phone\r\n        }\r\n      };\r\n    }\r\n\r\n    console.log('Emitting session:create with data:', sessionData);\r\n\r\n    socket.emit(\"session:create\", sessionData, (err, result) => {\r\n      if (err || isQuitting) {\r\n        console.error(\"session:create err\", err);\r\n        return;\r\n      }\r\n      console.log('Session creation response:', result);\r\n      const data = result?.body?.data || result;\r\n      const sess = data?.session || data || null;\r\n      if (sess) {\r\n        setSession(sess);\r\n        if (data.welcomeMessage) handleIncomingMessage(data.welcomeMessage);\r\n        if (data.businessHours) setBusinessInfo(data.businessHours);\r\n      }\r\n    });\r\n  }, [socket, session, userFromAuth, guestInfo, handleIncomingMessage, isQuitting]);\r\n\r\n  const validateGuestForm = useCallback(() => {\r\n    const errors = {};\r\n\r\n    if (!guestInfo.firstName.trim()) {\r\n      errors.firstName = 'First name is required';\r\n    } else if (guestInfo.firstName.trim().length < 2) {\r\n      errors.firstName = 'First name must be at least 2 characters';\r\n    }\r\n\r\n    if (!guestInfo.email.trim()) {\r\n      errors.email = 'Email is required';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(guestInfo.email.trim())) {\r\n      errors.email = 'Please enter a valid email address';\r\n    }\r\n\r\n    if (guestInfo.phone && guestInfo.phone.trim()) {\r\n      const phoneRegex = /^[\\d\\s+\\-()\\.]+$/;\r\n      if (!phoneRegex.test(guestInfo.phone)) {\r\n        errors.phone = 'Please enter a valid phone number';\r\n      }\r\n    }\r\n\r\n    return errors;\r\n  }, [guestInfo]);\r\n\r\n  const handleGuestFormChange = useCallback((e) => {\r\n    if (isQuitting) return;\r\n    \r\n    const { name, value } = e.target;\r\n\r\n    setGuestInfo(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n\r\n    if (guestFormErrors[name]) {\r\n      setGuestFormErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[name];\r\n        return newErrors;\r\n      });\r\n    }\r\n\r\n    if (guestFormErrors.submit) {\r\n      setGuestFormErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors.submit;\r\n        return newErrors;\r\n      });\r\n    }\r\n  }, [guestFormErrors, isQuitting]);\r\n\r\n  const submitGuestForm = useCallback(async () => {\r\n    if (isQuitting) return;\r\n    \r\n    const errors = validateGuestForm();\r\n\r\n    if (Object.keys(errors).length > 0) {\r\n      setGuestFormErrors(errors);\r\n      return;\r\n    }\r\n\r\n    setIsSubmittingGuest(true);\r\n    setGuestFormErrors({});\r\n\r\n    try {\r\n      const response = await API.post('/api/v1/guestUsers/create-guest-user', {\r\n        firstName: guestInfo.firstName.trim(),\r\n        lastName: guestInfo.lastName.trim(),\r\n        email: guestInfo.email.trim(),\r\n        phone: guestInfo.phone.trim()\r\n      });\r\n\r\n      if (response.data.success) {\r\n        const { firstName, lastName, email, phone } = response.data.data;\r\n\r\n        setGuestInfo({ firstName, lastName, email, phone });\r\n        setGuestFormSubmitted(true);\r\n        setShowGuestForm(false);\r\n        setGuestFormErrors({});\r\n\r\n        try {\r\n          localStorage.setItem(STORAGE_USER_KEY, JSON.stringify({\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            phone\r\n          }));\r\n        } catch (error) {\r\n          console.warn(\"Failed to save guest info to localStorage:\", error);\r\n        }\r\n\r\n        console.log('Guest form submitted, creating session...');\r\n        if (socket && socket.connected && !session && !isQuitting) {\r\n          await createSession();\r\n        }\r\n\r\n        // Retain the user's last message (if any) and re-add the welcome message\r\n        const lastUserMessage = messages.find(msg => msg.from === 'user');\r\n        setMessages(lastUserMessage ? [lastUserMessage] : []);\r\n\r\n        // Trigger the welcome message with quick replies\r\n        const biz = await fetchBusinessHours();\r\n        if (biz) setBusinessInfo(biz);\r\n\r\n        const welcomeMessage = {\r\n          id: `welcome-${Date.now()}`,\r\n          from: \"bot\",\r\n          text: biz && !biz.isOpen && biz.outsideHoursMessage\r\n            ? biz.outsideHoursMessage\r\n            : \"How can I be of service to you?\",\r\n          timestamp: Date.now(),\r\n          avatar: FavIconLogo,\r\n          quickReplies: biz && !biz.isOpen && biz.outsideHoursOptions\r\n            ? biz.outsideHoursOptions\r\n            : [\r\n                { text: \"What is your service?\", value: \"service_info\" },\r\n                { text: \"Why should I choose you?\", value: \"why_choose_us\" },\r\n                { text: \"How do I get started?\", value: \"getting_started\" },\r\n                { text: \"Search Jobs\", value: \"search_job\" },\r\n                { text: \"Partnership Info\", value: \"partner_pspl\" },\r\n                { text: \"Application Help\", value: \"application_issue\" },\r\n                { text: \"Talk to Agent\", value: \"live_agent\" },\r\n              ],\r\n        };\r\n\r\n        setMessages(prev => [...prev, welcomeMessage]);\r\n\r\n        // Resend the last user message to the server if it exists\r\n        if (lastUserMessage && socket && socket.connected && session && !isQuitting) {\r\n          console.log('Sending guest user message to server after form submission...');\r\n          socket.emit(\"message:send\", {\r\n            sessionId: session?._id || session?.id,\r\n            message: lastUserMessage.text,\r\n            messageType: \"text\",\r\n          });\r\n        }\r\n\r\n        logWithIcon.success('Guest user created and session initialized');\r\n      } else {\r\n        throw new Error(response.data.message || 'Failed to create guest user');\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error saving guest user:\", error);\r\n      setGuestFormErrors({\r\n        submit: error.response?.data?.message ||\r\n          error.message ||\r\n          'Failed to save guest information. Please try again.'\r\n      });\r\n    } finally {\r\n      setIsSubmittingGuest(false);\r\n    }\r\n  }, [guestInfo, validateGuestForm, socket, session, messages, createSession, isQuitting]);\r\n\r\n  const sendMessage = useCallback(() => {\r\n    if (!input.trim() || isQuitting) return;\r\n\r\n    const text = input.trim();\r\n    const messageId = `local_${Date.now()}_${Math.random()}`;\r\n\r\n    // Enhanced live agent request detection\r\n    const isLiveAgentRequest = \r\n      text.toLowerCase().includes('talk to agent') ||\r\n      text.toLowerCase().includes('live agent') ||\r\n      text.toLowerCase().includes('speak to someone') ||\r\n      text.toLowerCase().includes('human support') ||\r\n      text.toLowerCase().includes('connect me to agent') ||\r\n      text.toLowerCase().includes('real person') ||\r\n      /\\b(agent|human|person|representative|support staff)\\b/i.test(text);\r\n\r\n    setPendingMessages(prev => new Set([...prev, messageId]));\r\n\r\n    setInput(\"\");\r\n    try {\r\n      localStorage.removeItem(STORAGE_INPUT_KEY);\r\n    } catch (error) {\r\n      console.warn(\"Failed to clear input from localStorage:\", error);\r\n    }\r\n\r\n    const userMessage = {\r\n      id: messageId,\r\n      from: \"user\",\r\n      text,\r\n      timestamp: Date.now(),\r\n      avatar: userFromAuth\r\n        ? getProfileImageSrc(userFromAuth?.photo)\r\n        : defaultAvatar,\r\n      metadata: { isLiveAgentRequest }\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setHasUserSentMessage(true);\r\n\r\n    if (!userFromAuth && !guestFormSubmitted) {\r\n      console.log('Guest user sent message requesting agent, triggering form...');\r\n      setShowGuestForm(true);\r\n      return;\r\n    }\r\n\r\n    if (socket && socket.connected && session) {\r\n      socket.emit(\"message:send\", {\r\n        sessionId: session?._id || session?.id,\r\n        message: text,\r\n        messageType: isLiveAgentRequest ? \"live_agent_request\" : \"text\",\r\n        metadata: {\r\n          isLiveAgentRequest, // Critical flag for backend processing\r\n          requestType: isLiveAgentRequest ? 'agent_connection' : 'standard_message',\r\n          timestamp: Date.now()\r\n        }\r\n      });\r\n\r\n      // Show connecting message for live agent requests\r\n      if (isLiveAgentRequest) {\r\n        setTimeout(() => {\r\n          const connectingMessage = {\r\n            id: `connecting_${Date.now()}`,\r\n            from: \"bot\",\r\n            text: \" I understand you'd like to speak with a live agent. Let me connect you with someone who can help...\",\r\n            timestamp: Date.now(),\r\n            avatar: FavIconLogo,\r\n            metadata: { requestType: 'agent_connection', isTemporary: true }\r\n          };\r\n          setMessages(prev => [...prev, connectingMessage]);\r\n        }, 500);\r\n      }\r\n    } else {\r\n      setPendingMessages(prev => {\r\n        const newPending = new Set(prev);\r\n        newPending.delete(messageId);\r\n        return newPending;\r\n      });\r\n    }\r\n  }, [input, session, socket, userFromAuth, guestFormSubmitted, isQuitting]);\r\n\r\n  const handleQuickReply = useCallback(\r\n    (option) => {\r\n      if (isQuitting) return;\r\n      \r\n      const value = option.value || option.text || option;\r\n      const text = option.text || value;\r\n      const messageId = `local_qr_${Date.now()}_${Math.random()}`;\r\n\r\n      // Special handling for job search - existing functionality\r\n      if (value === \"search_job\") {\r\n        navigate(\"/Search-Jobs\");\r\n        return;\r\n      }\r\n\r\n      // Enhanced live agent detection\r\n      const isLiveAgentRequest = \r\n        value === \"live_agent\" || \r\n        value === \"talk_to_agent\" ||\r\n        text.toLowerCase().includes('talk to agent') ||\r\n        text.toLowerCase().includes('live agent') ||\r\n        text.toLowerCase().includes('human support') ||\r\n        text.toLowerCase().includes('speak to someone');\r\n\r\n      setPendingMessages(prev => new Set([...prev, messageId]));\r\n\r\n      if (socket && socket.connected && session) {\r\n        // Include live agent flag in message metadata\r\n        socket.emit(\"message:send\", {\r\n          sessionId: session._id || session.id,\r\n          message: text,\r\n          messageType: isLiveAgentRequest ? \"live_agent_request\" : \"option_selection\",\r\n          metadata: {\r\n            isLiveAgentRequest, // Critical flag for backend processing\r\n            requestType: isLiveAgentRequest ? 'agent_connection' : 'standard_option',\r\n            userSelection: value,\r\n            timestamp: Date.now()\r\n          }\r\n        });\r\n\r\n        // Show visual feedback for live agent requests\r\n        if (isLiveAgentRequest) {\r\n          // Add a temporary system message to show we're processing the request\r\n          const tempMessage = {\r\n            id: `temp_agent_req_${Date.now()}`,\r\n            from: \"bot\",\r\n            text: \" Connecting you with a live agent. Please wait while we find an available representative...\",\r\n            timestamp: Date.now(),\r\n            avatar: FavIconLogo,\r\n            metadata: { isTemporary: true, requestType: 'agent_connection' }\r\n          };\r\n          setMessages(prev => [...prev, tempMessage]);\r\n        }\r\n      } else {\r\n        // Fallback for disconnected state\r\n        const userMessage = {\r\n          id: messageId,\r\n          from: \"user\",\r\n          text,\r\n          timestamp: Date.now(),\r\n          avatar: userFromAuth\r\n            ? getProfileImageSrc(userFromAuth?.photo)\r\n            : defaultAvatar,\r\n          metadata: { isLiveAgentRequest }\r\n        };\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setHasUserSentMessage(true);\r\n\r\n        if (!userFromAuth && !guestFormSubmitted) {\r\n          console.log('Guest user requested agent, triggering form...');\r\n          setShowGuestForm(true);\r\n          return;\r\n        }\r\n      }\r\n\r\n      setPendingMessages(prev => {\r\n        const newPending = new Set(prev);\r\n        newPending.delete(messageId);\r\n        return newPending;\r\n      });\r\n    }, [session, socket, userFromAuth, guestFormSubmitted, navigate, isQuitting]);\r\n\r\n  const renderMessage = (m, index) => {\r\n    const isUser = m.from === \"user\";\r\n    return (\r\n      <div key={`${m.id}-${index}`} className={`chat-row ${isUser ? \"user\" : \"agent-or-bot\"}`}>\r\n        {!isUser && (\r\n          <img className=\"msg-avatar\" src={m.avatar} alt={m.from} />\r\n        )}\r\n        <div className=\"msg-body\">\r\n          <div className={`msg-text ${isUser ? \"user-bubble\" : \"\"}`}>\r\n            {m.text}\r\n          </div>\r\n          {m.quickReplies?.length > 0 && (\r\n            <div className=\"message-quick-replies\">\r\n              {m.quickReplies.map((qr, i) => (\r\n                <button\r\n                  key={`${m.id}-qr-${i}`}\r\n                  className=\"quick-reply-btn\"\r\n                  onClick={() => handleQuickReply(qr)}\r\n                >\r\n                  {qr.text || qr}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n          <div className=\"msg-meta\">\r\n            <span className=\"msg-time\">{timeAgo(m.timestamp)}</span>\r\n          </div>\r\n        </div>\r\n        {isUser && (\r\n          <img\r\n            className=\"msg-avatar\"\r\n            src={m.avatar}\r\n            alt=\"You\"\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const initializeChatSession = useCallback(async () => {\r\n    if (isQuitting) {\r\n      console.log('Skipping chat initialization - quitting in progress');\r\n      return;\r\n    }\r\n    \r\n    console.log('Initializing chat session...', {\r\n      hasSession: !!session,\r\n      hasSocket: !!socket,\r\n      isConnected: socket?.connected,\r\n      userFormSubmitted,\r\n      defaultMessagesLoaded\r\n    });\r\n\r\n    if (!session && socket && socket.connected) {\r\n      if (userFromAuth) {\r\n        console.log('Creating session for authenticated user...');\r\n        await createSession();\r\n      } else if (guestFormSubmitted) {\r\n        console.log('Creating session for guest user after form submission...');\r\n        await createSession();\r\n      }\r\n    }\r\n\r\n    if (messages.length === 0 && !defaultMessagesLoaded) {\r\n      setDefaultMessagesLoaded(true);\r\n\r\n      const biz = await fetchBusinessHours();\r\n      if (biz) {\r\n        console.log('Business hours for welcome message:', {\r\n          isOpen: biz.isOpen,\r\n          timezone: biz.timezone,\r\n          outsideHoursMessage: biz.outsideHoursMessage\r\n        });\r\n        setBusinessInfo(biz);\r\n      }\r\n\r\n      const welcomeMessage = {\r\n        id: `welcome-${Date.now()}`,\r\n        from: \"bot\",\r\n        text: biz && !biz.isOpen && biz.outsideHoursMessage\r\n          ? biz.outsideHoursMessage\r\n          : \"How can I be of service to you?\",\r\n        timestamp: Date.now(),\r\n        avatar: FavIconLogo,\r\n        quickReplies: biz && !biz.isOpen && biz.outsideHoursOptions\r\n          ? biz.outsideHoursOptions\r\n          : [\r\n              { text: \"What is your service?\", value: \"service_info\" },\r\n              { text: \"Why should I choose you?\", value: \"why_choose_us\" },\r\n              { text: \"How do I get started?\", value: \"getting_started\" },\r\n              { text: \"Search Jobs\", value: \"search_job\" },\r\n              { text: \"Partnership Info\", value: \"partner_pspl\" },\r\n              { text: \"Application Help\", value: \"application_issue\" },\r\n              { text: \"Talk to Agent\", value: \"live_agent\" },\r\n            ],\r\n      };\r\n\r\n      setMessages([welcomeMessage]);\r\n    }\r\n  }, [session, socket, userFormSubmitted, defaultMessagesLoaded, messages.length, createSession, userFromAuth, guestFormSubmitted, isQuitting]);\r\n\r\n  const handleHeaderClick = () => {\r\n    if (!isQuitting) {\r\n      setIsOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleToggle = async () => {\r\n    if (isQuitting) {\r\n      console.log('Ignoring toggle - quit in progress');\r\n      return;\r\n    }\r\n    \r\n    const next = !isOpen;\r\n    setIsOpen(next);\r\n\r\n    if (next) {\r\n      setUnreadCount(0);\r\n      console.log('Debug - handleToggle:', {\r\n        userFromAuth: !!userFromAuth,\r\n        guestFormSubmitted,\r\n        userFormSubmitted,\r\n        hasUserSentMessage\r\n      });\r\n      await initializeChatSession();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!userFromAuth && !guestFormSubmitted && hasUserSentMessage && !showGuestForm && !isQuitting) {\r\n      console.log('Triggering guest form - conditions met');\r\n      setShowGuestForm(true);\r\n    }\r\n  }, [userFromAuth, guestFormSubmitted, hasUserSentMessage, showGuestForm, isQuitting]);\r\n\r\n  // Enhanced Quit Confirmation Modal Component\r\n  const QuitConfirmationModal = () => (\r\n    <div \r\n      className=\"chat-quit-overlay\" \r\n      onClick={() => !isQuitting && setShowQuitConfirm(false)}\r\n    >\r\n      <div \r\n        className=\"chat-quit-modal\" \r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Modal Header */}\r\n        <div className=\"chat-quit-modal-header\">\r\n          <div className=\"chat-quit-modal-icon\">\r\n            <i className=\"fas fa-sign-out-alt\"></i>\r\n          </div>\r\n          <h3 className=\"chat-quit-modal-title\">\r\n            End Chat Session?\r\n          </h3>\r\n          <p className=\"chat-quit-modal-subtitle\">\r\n            This will clear your conversation history and end the current session.\r\n          </p>\r\n        </div>\r\n        \r\n        {/* Modal Body */}\r\n        <div className=\"chat-quit-modal-body\">\r\n          <div className=\"chat-quit-warning\">\r\n            <i className=\"fas fa-info-circle\"></i>\r\n            <span>You can always start a new conversation by clicking the chat button again.</span>\r\n          </div>\r\n          \r\n          {/* Action Buttons */}\r\n          <div className=\"chat-quit-modal-actions\">\r\n            <button\r\n              onClick={() => !isQuitting && setShowQuitConfirm(false)}\r\n              disabled={isQuitting}\r\n              className={`chat-quit-btn-cancel ${isQuitting ? 'disabled' : ''}`}\r\n            >\r\n              <i className=\"fas fa-arrow-left\"></i>\r\n              <span>Continue Chat</span>\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => !isQuitting && handleQuit()}\r\n              disabled={isQuitting}\r\n              className={`chat-quit-btn-confirm ${isQuitting ? 'loading' : ''}`}\r\n            >\r\n              {isQuitting ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i>\r\n                  <span>Ending...</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <i className=\"fas fa-sign-out-alt\"></i>\r\n                  <span>End Session</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // FIXED: Proper business hours status display logic\r\n  const getBusinessHoursDisplayText = () => {\r\n    if (isQuitting) return \"Ending session...\";\r\n    \r\n    if (businessInfo) {\r\n      console.log('Business info for display:', {\r\n        isOpen: businessInfo.isOpen,\r\n        timezone: businessInfo.timezone,\r\n        currentTime: businessInfo.currentTime\r\n      });\r\n      \r\n      if (businessInfo.isOpen) {\r\n        return \"We're online now\";\r\n      } else {\r\n        return \"Outside business hours\";\r\n      }\r\n    }\r\n    \r\n    // Fallback while loading\r\n    return isConnected ? \"Checking availability...\" : \"Connecting...\";\r\n  };\r\n\r\n  const inputEnabled = !isQuitting;\r\n  \r\n  return (\r\n    <div className=\"chatbot-wrapper\">\r\n      <button\r\n        className={`chatbot-toggle ${isOpen ? \"open\" : \"\"}`}\r\n        onClick={handleToggle}\r\n        disabled={isQuitting}\r\n      >\r\n        <div className=\"chat-toggle-inner\">\r\n          {!isOpen && <i className=\"fas fa-comment-dots fa-1x\"></i>}\r\n        </div>\r\n        {unreadCount > 0 && <div className=\"unread-badge\">{unreadCount}</div>}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"chatbot-box\">\r\n          <div className=\"chatbot-header\" onClick={handleHeaderClick}>\r\n            <div className=\"chat-header-left\">\r\n              <button\r\n                className=\"chat-close-btn\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  if (!isQuitting) {\r\n                    setIsOpen(false);\r\n                  }\r\n                }}\r\n                disabled={isQuitting}\r\n              >\r\n                <i className=\"fas fa-chevron-down\"></i>\r\n              </button>\r\n              <div className=\"chat-avatar\">\r\n                <Link to=\"/\" onClick={(e) => e.stopPropagation()}>\r\n                  <img src={FavIconLogo} alt=\"ProsoftSynergies\" />\r\n                </Link>\r\n              </div>\r\n              <div>\r\n                <div className=\"chat-title\">\r\n                  {userFromAuth\r\n                    ? `Chat Assistant - ${userFromAuth.firstname || 'User'}`\r\n                    : userFormSubmitted\r\n                      ? `Chat Assistant - ${guestInfo.firstName}`\r\n                      : 'Chat Assistant'\r\n                  }\r\n                </div>\r\n                <div className=\"chat-sub\">\r\n                  {getBusinessHoursDisplayText()}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Enhanced Chat Header Right Section */}\r\n            <div className=\"chat-header-right\" onClick={(e) => e.stopPropagation()}>\r\n              {hasUserSentMessage && (\r\n                <button\r\n                  className={`chat-quit-btn ${isQuitting ? 'disabled' : ''}`}\r\n                  aria-label=\"End chat session\"\r\n                  onClick={() => !isQuitting && setShowQuitConfirm(true)}\r\n                  title=\"End Chat Session\"\r\n                  disabled={isQuitting}\r\n                >\r\n                  <i className={`fas ${isQuitting ? 'fa-spinner fa-spin' : 'fa-times'}`}></i>\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"chatbot-messages\">\r\n            {messages.map(renderMessage)}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          {/* Enhanced Quit Confirmation Modal */}\r\n          {showQuitConfirm && <QuitConfirmationModal />}\r\n\r\n          <div className=\"chatbot-input\">\r\n            <input\r\n              value={input}\r\n              onChange={(e) => !isQuitting && setInput(e.target.value)}\r\n              placeholder={isQuitting ? \"Ending session...\" : \"Type a message...\"}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter' && !isQuitting) {\r\n                  sendMessage();\r\n                }\r\n              }}\r\n              disabled={!inputEnabled}\r\n            />\r\n            <button\r\n              onClick={sendMessage}\r\n              className={`send-btn ${!inputEnabled ? \"disabled\" : \"\"}`}\r\n              disabled={!inputEnabled}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showGuestForm && !isQuitting && (\r\n        <div\r\n          className={`chat-modal-overlay ${isSubmittingGuest ? 'submitting' : ''}`}\r\n          onClick={handleModalOverlayClick}\r\n        >\r\n          <div\r\n            className=\"chat-modal-container\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"chat-modal-header\">\r\n              <button\r\n                onClick={cancelGuestForm}\r\n                disabled={isSubmittingGuest}\r\n                className={`chat-modal-close ${isSubmittingGuest ? 'disabled' : ''}`}\r\n              >\r\n                <i className=\"fas fa-times\"></i>\r\n              </button>\r\n\r\n              <div className=\"chat-modal-header-content\">\r\n                <div className=\"chat-modal-icon\">\r\n                  <i className=\"fas fa-user-plus\"></i>\r\n                </div>\r\n                <h2 className=\"chat-modal-title\">\r\n                  Let's get started!\r\n                </h2>\r\n                <p className=\"chat-modal-subtitle\">\r\n                  Help us provide you with personalized assistance by sharing a few details.\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"chat-modal-body\">\r\n              {guestFormErrors.submit && (\r\n                <div className=\"chat-submit-error\">\r\n                  <i className=\"fas fa-exclamation-triangle\"></i>\r\n                  <div>\r\n                    <strong>Unable to proceed:</strong> {guestFormErrors.submit}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"chat-form-group\">\r\n                <label className=\"chat-form-label\">\r\n                  First Name <span className=\"chat-required\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"firstName\"\r\n                  value={guestInfo.firstName}\r\n                  onChange={handleGuestFormChange}\r\n                  disabled={isSubmittingGuest}\r\n                  className={`chat-form-input ${guestFormErrors.firstName ? 'error' :\r\n                    guestInfo.firstName.trim() ? 'success' : ''\r\n                  } ${isSubmittingGuest ? 'disabled' : ''}`}\r\n                  placeholder=\"Enter your first name\"\r\n                  autoComplete=\"given-name\"\r\n                  required\r\n                />\r\n                {guestFormErrors.firstName && (\r\n                  <div className=\"chat-error-message\">\r\n                    <i className=\"fas fa-exclamation-circle\"></i>\r\n                    {guestFormErrors.firstName}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"chat-form-group\">\r\n                <label className=\"chat-form-label\">\r\n                  Last Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lastName\"\r\n                  value={guestInfo.lastName}\r\n                  onChange={handleGuestFormChange}\r\n                  disabled={isSubmittingGuest}\r\n                  className={`chat-form-input ${guestInfo.lastName.trim() ? 'success' : ''\r\n                  } ${isSubmittingGuest ? 'disabled' : ''}`}\r\n                  placeholder=\"Enter your last name\"\r\n                  autoComplete=\"family-name\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"chat-form-group\">\r\n                <label className=\"chat-form-label\">\r\n                  Email Address <span className=\"chat-required\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  value={guestInfo.email}\r\n                  onChange={handleGuestFormChange}\r\n                  disabled={isSubmittingGuest}\r\n                  className={`chat-form-input ${guestFormErrors.email ? 'error' :\r\n                    guestInfo.email.trim() && /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(guestInfo.email) ? 'success' : ''\r\n                  } ${isSubmittingGuest ? 'disabled' : ''}`}\r\n                  placeholder=\"your.email@example.com\"\r\n                  autoComplete=\"email\"\r\n                  required\r\n                />\r\n                {guestFormErrors.email && (\r\n                  <div className=\"chat-error-message\">\r\n                    <i className=\"fas fa-exclamation-circle\"></i>\r\n                    {guestFormErrors.email}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"chat-form-group\">\r\n                <label className=\"chat-form-label\">\r\n                  Phone Number\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  name=\"phone\"\r\n                  value={guestInfo.phone}\r\n                  onChange={handleGuestFormChange}\r\n                  disabled={isSubmittingGuest}\r\n                  className={`chat-form-input ${guestFormErrors.phone ? 'error' :\r\n                    guestInfo.phone.trim() ? 'success' : ''\r\n                  } ${isSubmittingGuest ? 'disabled' : ''}`}\r\n                  placeholder=\"+1 (555) 123-4567\"\r\n                  autoComplete=\"tel\"\r\n                />\r\n                {guestFormErrors.phone && (\r\n                  <div className=\"chat-error-message\">\r\n                    <i className=\"fas fa-exclamation-circle\"></i>\r\n                    {guestFormErrors.phone}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"chat-modal-actions\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={cancelGuestForm}\r\n                disabled={isSubmittingGuest}\r\n                className={`chat-btn-secondary ${isSubmittingGuest ? 'disabled' : ''}`}\r\n              >\r\n                <i className=\"fas fa-times\"></i>\r\n                <span>Cancel</span>\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={submitGuestForm}\r\n                disabled={isSubmittingGuest}\r\n                className={`chat-btn-primary ${isSubmittingGuest ? 'loading' : ''}`}\r\n              >\r\n                {isSubmittingGuest ? (\r\n                  <>\r\n                    <i className=\"fas fa-spinner fa-spin\"></i>\r\n                    <span>Submitting...</span>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <i className=\"fas fa-arrow-right\"></i>\r\n                    <span>Continue Chat</span>\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBotIcon;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation, useParams } from 'react-router-dom';\r\nimport API from \"../helpers/API\";\r\nimport { useAuth } from \"../Context/AuthContext\";\r\nimport { LogoutNavbarLink } from './Logout/LogoutNavbar';\r\nimport { LogoutLink } from './Logout/Logout';\r\nimport ChatBotIcon from '../components/ChatBotIcon/ChatBotIcon';\r\nimport { FaLinkedin, FaFacebook, FaWhatsapp } from 'react-icons/fa';\r\nimport { BsTwitterX } from \"react-icons/bs\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport './Footer.css';\r\n\r\nconst Footer = () => {\r\n    const currentDay = new Date();\r\n    const currentYear = currentDay.getFullYear();\r\n\r\n    // ***************************************\r\n    const [auth, setAuth] = useAuth();\r\n    const [user, setUser] = useState({});\r\n    const params = useParams();\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const notifyErr = (msg) =>\r\n      toast.error(msg, {\r\n        position: \"top-center\",\r\n        autoClose: 20000,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        theme: \"light\"\r\n      });\r\n    const notifySucc = (msg) =>\r\n      toast.success(msg, {\r\n        position: \"top-center\",\r\n        autoClose: 20000,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        theme: \"light\"\r\n      });\r\n\r\n    const fetchRegUserById = async () => {\r\n      try {\r\n        const { data } = await API.get(`/users/fetchRegUserById/${params._id}`);\r\n        setUser(data.user);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    // initial Registered User Details\r\n    useEffect(() => {\r\n      if (params?._id) fetchRegUserById();\r\n    }, [params?._id]);\r\n\r\n    const handleLogout = () => {\r\n      setAuth({ ...auth, user: null, token: \"\" });\r\n      localStorage.removeItem(\"userAuthDetails\");\r\n      notifySucc(\"You have Logged Out Successfully!!!\");\r\n      navigate(location.state || \"/Login\");\r\n    };\r\n\r\n    //assigning location variable\r\n    const location = useLocation();\r\n  return (\r\n    <>\r\n    <footer className=\"footer\">\r\n      <div className=\"footer-container\">\r\n        <div className=\"footer-columns\">\r\n          <div className=\"footer-column\">\r\n            <h3>INDUSTRIES & RECRUITMENT SOLUTIONS</h3>\r\n            <ul>\r\n              <li><Link to=\"/Information-Technology-Recruitment\">Information Technology Recruitment</Link></li>\r\n              <li><Link to=\"/Government-Ministry-Recruitment\">Government Ministry Recruitment</Link></li>\r\n              <li><Link to=\"/Healthcare-&-Medical-Recruitment\">Healthcare & Medical Recruitment</Link></li>\r\n              <li><Link to=\"/Manufacturing-Recruitment\">Manufacturing Recruitment</Link></li>\r\n              <li><Link to=\"/Admin-&-Office-Support-Recruitment\">Administration & Office Support Recruitment</Link></li>\r\n              <li><Link to=\"/Transport-&-Logistics-Recruitment\">Transport & Logistics Recruitment</Link></li>\r\n              <li><Link to=\"/Construction-&-Infrastructure-Recruitment\">Construction and Infrastructure Recruitment</Link></li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"footer-column\">\r\n            <h3>EDUCATION SOLUTIONS</h3>\r\n            <ul>\r\n              <li><Link to=\"/Education-Recruitment\">Education Recruitment</Link></li>\r\n              {/* <li><Link to=\"/#\">Register</Link></li> */}\r\n              {/* ******************************************* */}\r\n              {!auth.user ? (\r\n              <>\r\n                <li><Link to=\"/Register\">Register</Link></li>\r\n              </>\r\n              ) : (\r\n              <>\r\n                {auth.user?.role === 1 ? (\r\n                  <>\r\n                  <li>\r\n                    <Link to=\"/Admin/Dashboard\" onClick={() => {window.location.href = \"/Admin/Dashboard\";}}>\r\n                      Admin Dashboard\r\n                    </Link>\r\n                  </li>                  \r\n                  </>\r\n                  ) : (\r\n                  <>\r\n                  {auth.user?.role === 2 ? (\r\n                      <>\r\n                        <li>\r\n                          <Link to=\"/Employer/Employer-Dashboard\" onClick={() => {window.location.href = \"/Employer/Employer-Dashboard\";}}>\r\n                            Employer Dashboard\r\n                          </Link>\r\n                        </li>  \r\n                      </>\r\n                      ) : (\r\n                      <>\r\n                        <li>\r\n                          <Link to=\"/Applicant-Profile-Dashboard\" onClick={() => {window.location.href = \"/Applicant-Profile-Dashboard\";}}>\r\n                            Applicant Dashboard\r\n                          </Link>\r\n                        </li>  \r\n                      </>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </>\r\n              )}  \r\n              {/* ******************************************* */}\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"footer-column\">\r\n            <h3>FOR JOB SEEKERS</h3>\r\n            <ul>\r\n              <li><Link to=\"/Search-Jobs\">Search Jobs</Link></li>\r\n              {/* <li><Link to=\"/#\">Resume Upload</Link></li> */}\r\n              <li>\r\n                  {!auth.user ? (\r\n                    <>\r\n                      <Link to=\"/Login\">Resume Upload</Link> \r\n                    </>\r\n                    ) : (\r\n                    <>\r\n                      {(() => {\r\n                        const userRole = auth.user?.role;\r\n                        let linkPath = \"/PSPL-Access-Denied\";\r\n\r\n                        if (userRole === 0) {\r\n                          linkPath = `/Applicant-Resume-Upload/${auth?.user?.userId}`;\r\n                        } else if (userRole === 1) {\r\n                          linkPath = \"/PSPL-Access-Denied\";\r\n                        } else if (userRole === 2) {\r\n                          linkPath = \"/PSPL-Access-Denied\";\r\n                        }\r\n                        return (\r\n                          <Link to={linkPath}>Resume Upload</Link> \r\n                        );\r\n                      })()}\r\n                    </>\r\n                    )}\r\n                </li>\r\n              {/* <li><Link to=\"/#\">Login</Link></li> */}\r\n              {/* ******************************************* */}\r\n              {!auth.user ? (\r\n              <>\r\n                <li><Link to=\"/#\">Login</Link></li>\r\n              </>\r\n              ) : (\r\n              <>\r\n                {auth.user?.role === 1 ? (\r\n                  <>\r\n                  <li>\r\n                    <LogoutLink onClick={() => {window.location.href = \"/Login\";}}>\r\n                      Logout\r\n                    </LogoutLink>\r\n                  </li>                  \r\n                  </>\r\n                  ) : (\r\n                  <>\r\n                  {auth.user?.role === 2 ? (\r\n                      <>\r\n                        <li>\r\n                          <LogoutLink onClick={() => {window.location.href = \"/Login\";}}>\r\n                            Logout\r\n                          </LogoutLink>\r\n                        </li>  \r\n                      </>\r\n                      ) : (\r\n                      <>\r\n                        <li>\r\n                          <LogoutLink onClick={() => {window.location.href = \"/Login\";}}>\r\n                            Logout\r\n                          </LogoutLink>\r\n                        </li>  \r\n                      </>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </>\r\n              )}  \r\n              {/* ******************************************* */}\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"footer-column\">\r\n            <h3>HEALTH SOLUTIONS</h3>\r\n            <ul>\r\n              <li><Link to=\"/Behavioral-Health-Solutions\">Behavioral Health</Link></li>\r\n              <li><Link to=\"/Health-Billing-&-Collections-Solutions\">Heath & Billing Collections</Link></li>\r\n              <li><Link to=\"#\">HealthCare Mergers & Acquisitions</Link></li>\r\n              <li>\r\n                <Link to=\"/Behavioral-Health-Credentialing-&-Contracting\">Behavioral Health Credentialing & Contracting</Link>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"footer-column\">\r\n            <h3>ABOUT US</h3>\r\n            <ul>\r\n              <li><Link to=\"/About-Us\">About Us</Link></li>\r\n              <li><Link to=\"/Who-We-Are\">Who We're </Link></li>\r\n              <li><Link to=\"/Our-Locations\">Locations</Link></li>\r\n              <li><Link to=\"/ThinkBeyond-Privacy-Policy\">Privacy Policy</Link></li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"footer-bottom\">\r\n          <div className=\"social-section\">\r\n            <p>Follow Us</p>\r\n            <div className=\"social-icons\">\r\n              <Link to=\"https://www.instagram.com/the_thinkbeyond_solutions/\" aria-label=\"LinkedIn\" target='_blank'><FaLinkedin /></Link>\r\n              <Link to=\"https://www.facebook.com/thethinkbeyondsolutions\" aria-label=\"Facebook\" target='_blank'><FaFacebook /></Link>\r\n              <Link to=\"https://x.com/thethinkbeyond8\" aria-label=\"X-Twitter\" target='_blank'><BsTwitterX /></Link>\r\n              <Link to=\"https://wa.me/4169008153\" aria-label=\"X-WhatsApp\" target='_blank'><FaWhatsapp /></Link>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bottom-links\">\r\n            <Link to=\"/ProsoftSynergies-Privacy-Policy\">Privacy Policy</Link>\r\n            <span className=\"divider\">|</span>\r\n            <a href=\"#\">Accessibility</a>\r\n          </div>\r\n          <div>\r\n            <p className=\"bottom-links pt-5\"> Copyright  {currentYear} <Link to=\"/\" className='ms-2 me-3'>ProsoftSynergies.</Link> All Right Reserved{\" \"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n       <ChatBotIcon />\r\n    </footer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation, useParams } from 'react-router-dom';\r\nimport API from \"../helpers/API\";\r\nimport { useAuth } from \"../Context/AuthContext\";\r\nimport { LogoutNavbarLink } from './Logout/LogoutNavbar';\r\n\r\nimport './assets/vendors/mdi/css/materialdesignicons.min.css';\r\nimport './assets/vendors/font-awesome/css/font-awesome.min.css';\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport './Header.css';\r\nimport Logo from './PSPL-Logo.png';\r\n\r\n// Role constants\r\nconst ROLE_JOBSEEKER = 0;\r\nconst ROLE_ADMIN = 1;\r\nconst ROLE_EMPLOYER = 2;\r\nconst ROLE_SUPERADMIN = 3;\r\n\r\nconst TestHomeHeader = () => {\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [activeDropdown, setActiveDropdown] = useState(null);\r\n  const [isSticky, setIsSticky] = useState(false);\r\n\r\n  const [auth] = useAuth();\r\n  const [user, setUser] = useState({});\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      setIsSticky(window.scrollY > 40);\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  const toggleMobileMenu = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n    setActiveDropdown(null);\r\n  };\r\n\r\n  const toggleDropdown = (index, e) => {\r\n    if (window.innerWidth <= 768) {\r\n      e.preventDefault();\r\n      setActiveDropdown(activeDropdown === index ? null : index);\r\n    }\r\n  };\r\n\r\n  const handleLinkClick = () => {\r\n    if (window.innerWidth <= 768 && mobileMenuOpen) {\r\n      setMobileMenuOpen(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (\r\n        !e.target.closest('.nav-links') &&\r\n        !e.target.closest('.menu-toggle') &&\r\n        !e.target.closest('.cta-buttons') &&\r\n        window.innerWidth > 768\r\n      ) {\r\n        setActiveDropdown(null);\r\n      }\r\n    };\r\n\r\n    const handleResize = () => {\r\n      if (window.innerWidth > 768) {\r\n        setMobileMenuOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('click', handleClickOutside);\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside);\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, []);\r\n\r\n  const notifyErr = (msg) =>\r\n    toast.error(msg, {\r\n      position: \"top-center\",\r\n      autoClose: 20000,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      theme: \"light\",\r\n    });\r\n\r\n  const notifySucc = (msg) =>\r\n    toast.success(msg, {\r\n      position: \"top-center\",\r\n      autoClose: 20000,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      theme: \"light\",\r\n    });\r\n\r\n  const fetchRegUserById = async () => {\r\n    try {\r\n      const { data } = await API.get(`/users/fetchRegUserById/${params._id}`);\r\n      setUser(data.user || {}); // Fixed: Ensure user is always an object\r\n    } catch (error) {\r\n      console.log(error);\r\n      setUser({}); // Fixed: Set empty object on error\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (params?._id) fetchRegUserById();\r\n  }, [params?._id]);\r\n\r\n  // Helper function to safely check photo path\r\n  const getProfileImageSrc = (userPhoto) => {\r\n    if (!userPhoto) return ''; // Return empty string if no photo\r\n    \r\n    // Safely check if photo starts with specific path\r\n    const isUploadPath = typeof userPhoto === 'string' && userPhoto.startsWith('/uploads/userAvatars/');\r\n    return isUploadPath ? process.env.REACT_APP_API_URL + userPhoto : userPhoto;\r\n  };\r\n\r\n  // Helper function to safely get user name\r\n  const getUserDisplayName = (userObj) => {\r\n    const firstName = userObj?.firstname || userObj?.first_name || '';\r\n    const lastName = userObj?.lastname || userObj?.last_name || '';\r\n    return `${firstName} ${lastName}`.trim();\r\n  };\r\n\r\n  // Admin menu items\r\n  const renderAdminMenuItems = () => (\r\n    <>\r\n      <li>\r\n        <Link to=\"/Admin/Dashboard\" onClick={() => { window.location.href = \"/Admin/Dashboard\"; }}>\r\n          <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Admin/Manage-Jobs\" onClick={() => { window.location.href = \"/Admin/Manage-Jobs\"; }}>\r\n          <i className=\"mdi mdi-briefcase me-2 text-success menu-icon\"></i>Manage Jobs\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Admin/Manage-Sectors\" onClick={() => { window.location.href = \"/Admin/Manage-Sectors\"; }}>\r\n          <i className=\"mdi mdi-format-list-bulleted-type me-2 text-success menu-icon\"></i>Job Sectors\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Admin/Manage-Qualifications\" onClick={() => { window.location.href = \"/Admin/Manage-Qualifications\"; }}>\r\n          <i className=\"mdi mdi-school menu-icon me-2 text-success\"></i> Job Qualifications\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Admin/Manage-Work-Experiences\" onClick={() => { window.location.href = \"/Admin/Manage-Work-Experiences\"; }}>\r\n          <i className=\"mdi mdi-checkbox-multiple-marked menu-icon me-2 text-success\"></i> Job Experiences\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Admin/Manage-Work-Modes\" onClick={() => { window.location.href = \"/Admin/Manage-Work-Modes\"; }}>\r\n          <i className=\"mdi mdi-account-convert me-2 text-success\"></i> Work Modes\r\n        </Link>\r\n      </li>\r\n    </>\r\n  );\r\n\r\n  // Super Admin Menu Items\r\n  const renderSuperAdminMenuItems = () => (\r\n    <>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Dashboard\" onClick={() => { window.location.href = \"/Super-Admin/Dashboard\"; }}>\r\n          <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Manage-Jobs\" onClick={() => { window.location.href = \"/Super-Admin/Manage-Jobs\"; }}>\r\n          <i className=\"mdi mdi-briefcase me-2 text-success menu-icon\"></i>Manage Jobs\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Manage-Sectors\" onClick={() => { window.location.href = \"/Super-Admin/Manage-Sectors\"; }}>\r\n          <i className=\"mdi mdi-format-list-bulleted-type me-2 text-success menu-icon\"></i>Job Sectors\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Manage-Qualifications\" onClick={() => { window.location.href = \"/Super-Admin/Manage-Qualifications\"; }}>\r\n          <i className=\"mdi mdi-school menu-icon me-2 text-success\"></i> Job Qualifications\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Manage-Work-Experiences\" onClick={() => { window.location.href = \"/Super-Admin/Manage-Work-Experiences\"; }}>\r\n          <i className=\"mdi mdi-checkbox-multiple-marked menu-icon me-2 text-success\"></i> Job Experiences\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Manage-Work-Modes\" onClick={() => { window.location.href = \"/Super-Admin/Manage-Work-Modes\"; }}>\r\n          <i className=\"mdi mdi-account-convert me-2 text-success\"></i> Work Modes\r\n        </Link>\r\n      </li>\r\n    </>\r\n  );\r\n\r\n  const renderLogoutItem = () => (\r\n    <li>\r\n      <LogoutNavbarLink onClick={() => { window.location.href = \"/Login\"; }}>\r\n        <i className=\"mdi mdi-logout me-2 text-success\"></i>\r\n        Logout\r\n      </LogoutNavbarLink>\r\n    </li>\r\n  );\r\n\r\n  return (\r\n    <header className={isSticky ? 'sticky' : ''}>\r\n      <div className=\"top-bar\">\r\n        <Link to=\"mailto:hrpspl@prosoftsynergies.com\" target=\"_blank\" className=\"login-btn info-link\">\r\n          <span className=\"contact-text\" style={{ color: \"#03294f\" }}>Email Us</span>\r\n          <i className='fas fa-envelope ms-1 fa-2x' style={{ color: \"#03294f\" }}></i>\r\n        </Link>\r\n        <Link to=\"https://wa.me/+15129617007\" className=\"login-btn phone-link\" target=\"_blank\">\r\n          <span className=\"contact-text\" style={{ color: \"#03294f\" }}>Let's Connect On WhatsApp</span>\r\n          <i className='fab fa-whatsapp ms-1 fa-2x' style={{ color: \"#03294f\" }}></i>\r\n        </Link>\r\n      </div>\r\n      <nav className={`main-nav ${isSticky ? 'sticky' : ''}`}>\r\n        <div className=\"PSPL-Logo logo\">\r\n          <Link to=\"/\"><img src={Logo} alt='ProsoftSynergies' /></Link>\r\n        </div>\r\n\r\n        <div\r\n          className={`menu-toggle ${mobileMenuOpen ? 'active' : ''}`}\r\n          onClick={toggleMobileMenu}\r\n          aria-label=\"Toggle navigation menu\"\r\n        >\r\n          <span></span>\r\n          <span></span>\r\n          <span></span>\r\n        </div>\r\n\r\n        <ul className={`nav-links ${mobileMenuOpen ? 'active' : ''}`}>\r\n          <li className={activeDropdown === 0 ? 'active' : ''}>\r\n            <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(0, e)}>\r\n              FOR BUSINESSES\r\n            </Link>\r\n            <div className=\"mega-menu wide\">\r\n              <div className=\"mega-menu-column\">\r\n                <h3>Industries & Recruitment Solutions</h3>\r\n                <ul>\r\n                  <li><Link to=\"/Information-Technology-Recruitment\" onClick={handleLinkClick}>Information Technology Recruitment</Link></li>\r\n                  <li><Link to=\"/Government-Ministry-Recruitment\" onClick={handleLinkClick}>Government Ministry Recruitment</Link></li>\r\n                  <li><Link to=\"/Healthcare-&-Medical-Recruitment\" onClick={handleLinkClick}>Healthcare & Medical Recruitment</Link></li>\r\n                  <li><Link to=\"/Manufacturing-Recruitment\" onClick={handleLinkClick}>Manufacturing Recruitment</Link></li>\r\n                  <li><Link to=\"/Admin-&-Office-Support-Recruitment\" onClick={handleLinkClick}>Administration & Office Support Recruitment</Link></li>\r\n                  <li><Link to=\"/Transport-&-Logistics-Recruitment\" onClick={handleLinkClick}>Transport & Logistics Recruitment</Link></li>\r\n                  <li><Link to=\"/Construction-&-Infrastructure-Recruitment\" onClick={handleLinkClick}>Construction and Infrastructure Recruitment</Link></li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"mega-menu-column\">\r\n                <h3>Education Recruitment & Solutions</h3>\r\n                <ul>\r\n                  <li><Link to=\"/Education-Recruitment\" onClick={handleLinkClick}>Education Recruitment</Link></li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"mega-menu-column\">\r\n                <h3>Health Solutions</h3>\r\n                <ul>\r\n                  <li><Link to=\"/Behavioral-Health-Solutions\" onClick={handleLinkClick}>Behavioral Health</Link></li>\r\n                  <li><Link to=\"/Health-Billing-&-Collections-Solutions\" onClick={handleLinkClick}>Health & Billing Collections</Link></li>\r\n                  <li><Link to=\"#\" onClick={handleLinkClick}>HealthCare Mergers & Acquisitions</Link></li>\r\n                  <li><Link to=\"#\" onClick={handleLinkClick}>Behavioral Health Credentialing & Contracting</Link></li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </li>\r\n          <li className={activeDropdown === 1 ? 'active' : ''}>\r\n            <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(1, e)}>\r\n              JOB SEEKERS\r\n            </Link>\r\n            <div className=\"mega-menu\">\r\n              <h3>Career Opportunities</h3>\r\n              <ul>\r\n                <li><Link to=\"/Search-Jobs\" onClick={handleLinkClick}>Search Jobs</Link></li>\r\n                <li>\r\n                  {!auth.user ? (\r\n                    <Link to=\"/Login\" onClick={handleLinkClick}>Resume Upload</Link>\r\n                  ) : (() => {\r\n                    let linkPath = \"/PSPL-Access-Denied\";\r\n                    if (auth.user?.role === ROLE_JOBSEEKER) {\r\n                      linkPath = `/Applicant-Resume-Upload/${auth?.user?.userId}`;\r\n                    } else if (\r\n                      auth.user?.role === ROLE_ADMIN ||\r\n                      auth.user?.role === ROLE_EMPLOYER ||\r\n                      auth.user?.role === ROLE_SUPERADMIN\r\n                    ) {\r\n                      linkPath = \"/PSPL-Access-Denied\";\r\n                    }\r\n                    return <Link to={linkPath} onClick={handleLinkClick}>Resume Upload</Link>;\r\n                  })()}\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </li>\r\n          <li className={activeDropdown === 2 ? 'active' : ''}>\r\n            <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(2, e)}>\r\n              EMPLOYERS\r\n            </Link>\r\n            <div className=\"mega-menu\">\r\n              <h3>ProsoftSynergies Solutions</h3>\r\n              <ul>\r\n                <li><Link to=\"/Permanent-Hiring-Solutions\" onClick={handleLinkClick}>Permanent Hiring Solutions</Link></li>\r\n                <li><Link to=\"/Tailored-Solutions-For-Employers\" onClick={handleLinkClick}>Tailored Solutions For Employers</Link></li>\r\n                <li><Link to=\"/Fluid-Workforce-Solutions\" onClick={handleLinkClick}>Fluid Workforce Solutions</Link></li>\r\n              </ul>\r\n            </div>\r\n          </li>\r\n          <li className={activeDropdown === 3 ? 'active' : ''}>\r\n            <Link to=\"/About-Us\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(3, e)}>\r\n              ABOUT US\r\n            </Link>\r\n            <div className=\"mega-menu\">\r\n              <h3>Our Company</h3>\r\n              <ul>\r\n                <li><Link to=\"/About-Us\" onClick={handleLinkClick}>About Us</Link></li>\r\n                <li><Link to=\"/Who-We-Are\" onClick={handleLinkClick}>Who We're</Link></li>\r\n                <li><Link to=\"/Our-Locations\" onClick={handleLinkClick}>Locations</Link></li>\r\n              </ul>\r\n            </div>\r\n          </li>\r\n          <li><Link to=\"/Contact-Us\" onClick={handleLinkClick}>CONTACT US</Link></li>\r\n\r\n          {/* Role-Based Mobile Menus */}\r\n          {auth.user && (\r\n            <>\r\n              {auth.user?.role === ROLE_ADMIN && (\r\n                <li className=\"mobile-more-menu\">\r\n                  <li className={activeDropdown === 4 ? 'active' : ''} style={{ marginBottom: \"100px\" }}>\r\n                    <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                      {getUserDisplayName(auth.user)}\r\n                      <i className='mdi mdi-account-check ms-3 text-primary' style={{ fontSize: \"25px\" }}></i>\r\n                    </Link>\r\n                    <div className=\"mega-menu\">\r\n                      <h3>Admin Quick Access</h3>\r\n                      <ul>\r\n                        {renderAdminMenuItems()}\r\n                        {renderLogoutItem()}\r\n                      </ul>\r\n                    </div>\r\n                  </li>\r\n                </li>\r\n              )}\r\n\r\n              {auth.user?.role === ROLE_SUPERADMIN && (\r\n                <li className=\"mobile-more-menu\">\r\n                  <li className={activeDropdown === 5 ? 'active' : ''} style={{ marginBottom: \"100px\" }}>\r\n                    <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(5, e)}>\r\n                      {getUserDisplayName(auth.user)}\r\n                      <i className='mdi mdi-account-check ms-3 text-primary' style={{ fontSize: \"25px\" }}></i>\r\n                    </Link>\r\n                    <div className=\"mega-menu\">\r\n                      <h3>Super Admin Quick Access</h3>\r\n                      <ul>\r\n                        {renderSuperAdminMenuItems()}\r\n                        {renderLogoutItem()}\r\n                      </ul>\r\n                    </div>\r\n                  </li>\r\n                </li>\r\n              )}\r\n\r\n              {auth.user?.role === ROLE_EMPLOYER && (\r\n                <li className=\"mobile-more-menu\">\r\n                  <li className={activeDropdown === 4 ? 'active' : ''} style={{ marginBottom: \"100px\" }}>\r\n                    <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                      <img\r\n                        className=\"profile-image me-2\"\r\n                        src={getProfileImageSrc(auth?.user?.photo || user?.photo)}\r\n                        alt={getUserDisplayName(auth.user)}\r\n                        aria-label=\"User profile photo\"\r\n                        role=\"button\"\r\n                        style={{ borderRadius: \"50%\", height: \"35px\", width: \"35px\" }}\r\n                      />\r\n                      {getUserDisplayName(auth.user)}\r\n                      <i className='mdi mdi-account-check ms-3 text-primary' style={{ fontSize: \"25px\" }}></i>\r\n                    </Link>\r\n                    <div className=\"mega-menu\">\r\n                      <h3>Employer Quick Access</h3>\r\n                      <ul>\r\n                        <li>\r\n                          <Link to=\"#\" onClick={handleLinkClick}>\r\n                            <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n                          </Link>\r\n                        </li>\r\n                        <li><Link to=\"#\" onClick={handleLinkClick}>Account</Link></li>\r\n                        {renderLogoutItem()}\r\n                      </ul>\r\n                    </div>\r\n                  </li>\r\n                </li>\r\n              )}\r\n\r\n              {(auth.user?.role !== ROLE_ADMIN && auth.user?.role !== ROLE_SUPERADMIN && auth.user?.role !== ROLE_EMPLOYER) && (\r\n                <li className=\"mobile-more-menu\">\r\n                  <li className={activeDropdown === 4 ? 'active' : ''} style={{ marginBottom: \"100px\" }}>\r\n                    <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                      <img\r\n                        className=\"profile-image me-2\"\r\n                        src={getProfileImageSrc(auth?.user?.photo || user?.photo)}\r\n                        alt={getUserDisplayName(auth.user)}\r\n                        aria-label=\"User profile photo\"\r\n                        role=\"button\"\r\n                        style={{ borderRadius: \"50%\", height: \"35px\", width: \"35px\" }}\r\n                      />\r\n                      {getUserDisplayName(auth.user)}\r\n                      <i className='mdi mdi-account-check ms-3 text-primary' style={{ fontSize: \"25px\" }}></i>\r\n                    </Link>\r\n                    <div className=\"mega-menu\">\r\n                      <h3>Job Seeker Quick Access</h3>\r\n                      <ul>\r\n                        <li>\r\n                          <Link to=\"/Applicant-Profile-Dashboard\" onClick={() => { window.location.href = \"/Applicant-Profile-Dashboard\"; }}>\r\n                            <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n                          </Link>\r\n                        </li>\r\n                        <li>\r\n                          <Link to={`/Applicant/Profile/${auth?.user?.userId}`} onClick={() => { window.location.href = `/Applicant/Profile/${auth?.user?.userId}`; }}>\r\n                            <i className=\"mdi mdi-account-key menu-icon me-2 text-success\"></i> Account\r\n                          </Link>\r\n                        </li>\r\n                        {renderLogoutItem()}\r\n                      </ul>\r\n                    </div>\r\n                  </li>\r\n                </li>\r\n              )}\r\n            </>\r\n          )}\r\n        </ul>\r\n\r\n        <div className=\"cta-buttons\">\r\n          {!auth.user ? (\r\n            <>\r\n              <Link to=\"/Login\" className=\"cta-btn hPostJob-btn\">Post Job</Link>\r\n              <Link to=\"/Login\" className=\"cta-btn hLogin-btn\">Login</Link>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {auth.user?.role === ROLE_ADMIN && (\r\n                <>\r\n                  <Link to=\"/Admin/Add-Job\" className=\"cta-btn hPostJob-btn\" onClick={() => { window.location.href = \"/Admin/Add-Job\"; }}>Post Job</Link>\r\n                  <div className=\"cta-dropdown\">\r\n                    <li className={activeDropdown === 4 ? 'active' : ''}>\r\n                      <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                        <i className='mdi mdi-account-check me-2 text-primary' style={{ fontSize: \"30px\" }}></i>\r\n                        {getUserDisplayName(auth.user)}\r\n                      </Link>\r\n                      <div className=\"mega-menu\">\r\n                        <h3>Admin Quick Access</h3>\r\n                        <ul>\r\n                          {renderAdminMenuItems()}\r\n                          {renderLogoutItem()}\r\n                        </ul>\r\n                      </div>\r\n                    </li>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {auth.user?.role === ROLE_SUPERADMIN && (\r\n                <>\r\n                  <Link to=\"/Super-Admin/Add-Job\" className=\"cta-btn hPostJob-btn\" onClick={() => { window.location.href = \"/Super-Admin/Add-Job\"; }}>Post Job</Link>\r\n                  <div className=\"cta-dropdown\">\r\n                    <li className={activeDropdown === 4 ? 'active' : ''}>\r\n                      <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                        <i className='mdi mdi-account-check me-2 text-primary' style={{ fontSize: \"30px\" }}></i>\r\n                        {getUserDisplayName(auth.user)}\r\n                      </Link>\r\n                      <div className=\"mega-menu\">\r\n                        <h3>Super Admin Quick Access</h3>\r\n                        <ul>\r\n                          {renderSuperAdminMenuItems()}\r\n                          {renderLogoutItem()}\r\n                        </ul>\r\n                      </div>\r\n                    </li>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {auth.user?.role === ROLE_EMPLOYER && (\r\n                <>\r\n                  <Link to=\"#\" className=\"cta-btn hPostJob-btn\">Post Job</Link>\r\n                  <div className=\"cta-dropdown\">\r\n                    <li className={activeDropdown === 4 ? 'active' : ''}>\r\n                      <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                        <img\r\n                          className=\"profile-image me-2\"\r\n                          src={getProfileImageSrc(auth?.user?.photo || user?.photo)}\r\n                          alt={getUserDisplayName(auth.user)}\r\n                          aria-label=\"User profile photo\"\r\n                          role=\"button\"\r\n                          style={{ borderRadius: \"50%\", height: \"35px\", width: \"35px\" }}\r\n                        />\r\n                        {getUserDisplayName(auth.user)}\r\n                      </Link>\r\n                      <div className=\"mega-menu\">\r\n                        <h3>Employer Quick Access</h3>\r\n                        <ul>\r\n                          <li>\r\n                            <Link to=\"#\" onClick={handleLinkClick}>\r\n                              <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n                            </Link>\r\n                          </li>\r\n                          <li><Link to=\"#\" onClick={handleLinkClick}>Account</Link></li>\r\n                          {renderLogoutItem()}\r\n                        </ul>\r\n                      </div>\r\n                    </li>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {(auth.user?.role !== ROLE_ADMIN && auth.user?.role !== ROLE_SUPERADMIN && auth.user?.role !== ROLE_EMPLOYER) && (\r\n                <>\r\n                  <Link to=\"/Search-Jobs\" className=\"cta-btn hPostJob-btn\">Find A Job</Link>\r\n                  <div className=\"cta-dropdown\">\r\n                    <li className={activeDropdown === 4 ? 'active' : ''}>\r\n                      <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                        <img\r\n                          className=\"profile-image me-2\"\r\n                          src={getProfileImageSrc(auth?.user?.photo || user?.photo)}\r\n                          alt={getUserDisplayName(auth.user)}\r\n                          aria-label=\"User profile photo\"\r\n                          role=\"button\"\r\n                          style={{ borderRadius: \"50%\", height: \"35px\", width: \"35px\" }}\r\n                        />\r\n                        {getUserDisplayName(auth.user)}\r\n                      </Link>\r\n                      <div className=\"mega-menu\">\r\n                        <h3>Job Seeker Quick Access</h3>\r\n                        <ul>\r\n                          <li>\r\n                            <Link to=\"/Applicant-Profile-Dashboard\" onClick={() => { window.location.href = \"/Applicant-Profile-Dashboard\"; }}>\r\n                              <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n                            </Link>\r\n                          </li>\r\n                          <li>\r\n                            <Link to={`/Applicant/Profile/${auth?.user?.userId}`} onClick={() => { window.location.href = `/Applicant/Profile/${auth?.user?.userId}`; }}>\r\n                              <i className=\"mdi mdi-account-key menu-icon me-2 text-success\"></i> Account\r\n                            </Link>\r\n                          </li>\r\n                          {renderLogoutItem()}\r\n                        </ul>\r\n                      </div>\r\n                    </li>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default TestHomeHeader;\r\n","import React from \"react\";\r\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useAuth } from \"../../Context/AuthContext\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\n// Toast configuration constants\r\nconst TOAST_CONFIG = {\r\n  position: \"top-center\",\r\n  autoClose: 5000,\r\n  closeOnClick: true,\r\n  pauseOnHover: true,\r\n  theme: \"light\"\r\n};\r\n\r\n/**\r\n * Custom hook to handle logout logic\r\n * @returns {Object} Object containing handleLogout function\r\n */\r\nexport const useLogout = () => {\r\n  const [auth, setAuth] = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n \r\n  const notifyError = (msg) => toast.error(msg, TOAST_CONFIG);\r\n  const notifySuccess = (msg) => toast.success(msg, TOAST_CONFIG);\r\n \r\n  const handleLogout = () => {\r\n    try {\r\n      setAuth({ ...auth, user: null, token: \"\" });\r\n      localStorage.removeItem(\"userAuthDetails\");\r\n      notifySuccess(\"You have Logged Out Successfully!\");\r\n      navigate(location.state || \"/Login\");\r\n      \r\n      // Consider using navigate with a refresh parameter instead of manual reload\r\n      // This avoids potential memory leaks or incomplete navigation\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error(\"Logout error:\", error);\r\n      notifyError(\"Something went wrong during logout!\");\r\n    }\r\n  };\r\n \r\n  return { handleLogout };\r\n};\r\n\r\n/**\r\n * Logout Button Component - can be used as a standalone component\r\n * @param {Object} props - Component props\r\n * @param {string} props.className - Optional CSS class\r\n * @param {React.ReactNode} props.children - Optional custom content\r\n */\r\nconst LogoutButton = ({ className, children }) => {\r\n  const { handleLogout } = useLogout();  \r\n \r\n  return (\r\n    <button\r\n      onClick={handleLogout}\r\n      className={className || \"logout-button\"}\r\n      type=\"button\" // Explicitly define button type for better accessibility\r\n    >\r\n      {children || (\r\n        <>          \r\n         <span className=\"menu-title\">Logout</span>\r\n         <i className=\"mdi mdi-logout menu-icon\"></i>\r\n        </>\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\n/**\r\n * Logout Link Component - for use within navigation that requires <Link>\r\n * @param {Object} props - Component props\r\n * @param {string} props.className - Optional CSS class\r\n * @param {string} props.to - Optional target path (unused)\r\n * @param {React.ReactNode} props.children - Optional custom content\r\n */\r\nconst LogoutLink = ({ className, to = \"/Test-Login\", children }) => {\r\n  const { handleLogout } = useLogout();\r\n \r\n  return (\r\n    <Link\r\n      to=\"#\"\r\n      className={className || \"menu-title\"}\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        handleLogout();\r\n      }}\r\n    >\r\n      {children || (\r\n        <>\r\n          <span className=\"menu-title\">Logout</span>\r\n          <i className=\"mdi mdi-logout menu-icon\"></i>\r\n        </>\r\n      )}\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport { LogoutButton, LogoutLink };\r\nexport default LogoutLink;"],"names":["Modal","STORAGE_USER_KEY","process","STORAGE_MESSAGES_PREFIX","STORAGE_INPUT_KEY","REACT_APP_CHAT_INPUT_KEY","timeAgo","ts","d","Date","diff","Math","floor","now","getTime","toLocaleDateString","defaultAvatar","getProfileImageSrc","userPhoto","arguments","length","undefined","startsWith","async","fetchBusinessHours","logWithIcon","info","res","API","get","params","timezone","data","success","businessData","isOpen","currentTime","warning","err","error","ChatBotIcon","socket","isConnected","useSocket","auth","useAuth","userFromAuth","user","navigate","useNavigate","input","setInput","useState","setIsOpen","session","setSession","messages","setMessages","businessInfo","setBusinessInfo","unreadCount","setUnreadCount","showGuestForm","setShowGuestForm","isSubmittingGuest","setIsSubmittingGuest","guestFormSubmitted","setGuestFormSubmitted","guestFormErrors","setGuestFormErrors","defaultMessagesLoaded","setDefaultMessagesLoaded","hasUserSentMessage","setHasUserSentMessage","showQuitConfirm","setShowQuitConfirm","pendingMessages","setPendingMessages","Set","isQuitting","setIsQuitting","guestInfo","setGuestInfo","firstName","lastName","email","phone","audioRef","useRef","messagesEndRef","quitTimeoutRef","businessHoursIntervalRef","userFormSubmitted","useMemo","active","storageKey","result","guest","_id","id","handleQuit","useCallback","console","warn","log","current","clearInterval","setTimeout","connected","emit","sessionId","ReactDOM","currentSessionKey","localStorage","removeItem","keysToRemove","i","key","push","forEach","resetGuestForm","requestAnimationFrame","resetState","cancelGuestForm","prev","lastMessage","from","slice","handleModalOverlayClick","e","target","currentTarget","useEffect","clearTimeout","biz","toISOString","message","initialFetch","setInterval","prevInfo","handleEscKey","document","addEventListener","removeEventListener","savedInput","getItem","trim","timeoutId","setItem","raw","u","JSON","parse","hasRequiredInfo","Boolean","loadedMessages","some","msg","stringify","scrollIntoView","behavior","beepUrl","Audio","normalizeMessage","_msg$metadata","_session$agent","_msg$metadata2","random","text","createdAt","timestamp","senderType","avatar","metadata","senderAvatar","agent","photo","FavIconLogo","quickReplies","handleIncomingMessage","rawMsg","_rawMsg$metadata","redirectUrl","url","window","open","prevMessages","existingMsg","abs","newPending","pendingId","includes","substring","delete","onSessionCreated","payloadRaw","_payloadRaw$body","payload","body","sess","businessHours","welcomeMessage","guestSessionEvent","guestEmail","onGuestSessionCreated","onMessageNew","onMessageStatus","_ref","messageId","status","map","m","on","off","createSession","hasSocket","hasSession","sessionData","entryPoint","selectedOption","firstname","lastname","authenticatedUser","userId","guestFirstName","guestLastName","guestPhone","_result$body","validateGuestForm","errors","test","handleGuestFormChange","name","value","newErrors","submit","submitGuestForm","Object","keys","response","post","Error","lastUserMessage","find","outsideHoursMessage","outsideHoursOptions","messageType","_error$response","_error$response$data","sendMessage","isLiveAgentRequest","toLowerCase","userMessage","requestType","connectingMessage","isTemporary","handleQuickReply","option","userSelection","tempMessage","initializeChatSession","QuitConfirmationModal","_jsx","className","onClick","children","_jsxs","stopPropagation","disabled","_Fragment","inputEnabled","next","handleHeaderClick","Link","to","src","alt","title","renderMessage","index","_m$quickReplies","isUser","qr","ref","onChange","placeholder","onKeyDown","type","autoComplete","required","Footer","_auth$user","_auth$user2","_auth$user5","_auth$user6","currentYear","getFullYear","setAuth","setUser","useParams","fetchRegUserById","useLocation","role","location","href","_auth$user3","userRole","linkPath","_auth$user4","LogoutLink","FaLinkedin","FaFacebook","BsTwitterX","FaWhatsapp","TestHomeHeader","_auth$user7","_auth$user8","_auth$user9","_auth$user0","_auth$user1","_auth$user10","_auth$user11","_auth$user12","_auth$user14","_auth$user15","_auth$user16","_auth$user17","_auth$user18","_auth$user19","_auth$user20","_auth$user21","_auth$user22","mobileMenuOpen","setMobileMenuOpen","activeDropdown","setActiveDropdown","isSticky","setIsSticky","handleScroll","scrollY","toggleDropdown","innerWidth","preventDefault","handleLinkClick","handleClickOutside","closest","handleResize","getUserDisplayName","userObj","first_name","last_name","renderAdminMenuItems","renderSuperAdminMenuItems","renderLogoutItem","LogoutNavbarLink","style","color","Logo","toggleMobileMenu","marginBottom","fontSize","borderRadius","height","width","_auth$user13","_auth$user23","TOAST_CONFIG","position","autoClose","closeOnClick","pauseOnHover","theme","useLogout","handleLogout","token","toast","state","reload","notifyError","_ref2"],"sourceRoot":""}