{"version":3,"file":"static/js/3119.f676c63c.chunk.js","mappings":"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","sources":["Pages/Admin/AdminChatList/AdminChatList.jsx"],"sourcesContent":["//frontend/src/Pages/Admin/AdminChatList/AdminChatList.jsx\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Add this import\nimport { useAuth } from \"../../../Context/AuthContext\"; // Fixed path\nimport { useSocket } from \"../../../Context/SocketContext\"; // Fixed path\nimport API from \"../../../helpers/API\"; // Fixed path\nimport './AdminLiveChat.css';\n\nconst AdminChatList = () => {\n  const navigate = useNavigate(); // Add navigation hook\n  const { socket, isConnected } = useSocket();\n  const [auth] = useAuth();\n  const adminUser = auth?.user;\n\n  // State\n  const [sessions, setSessions] = useState([]);\n  const [filteredSessions, setFilteredSessions] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [filter, setFilter] = useState('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [stats, setStats] = useState({\n    totalSessions: 0,\n    activeSessions: 0,\n    waitingSessions: 0\n  });\n\n  // Helper function to get profile image\n  const getProfileImageSrc = useCallback((userPhoto, isGuest = false) => {\n    if (isGuest || !userPhoto) {\n      return \"https://img.freepik.com/premium-vector/account-icon-user-icon-vector-graphics_292645-552.jpg?w=300\";\n    }\n    const isUploadPath = typeof userPhoto === \"string\" && userPhoto.startsWith(\"/uploads/userAvatars/\");\n    return isUploadPath ? `${process.env.REACT_APP_API_URL}${userPhoto}` : userPhoto;\n  }, []);\n\n  // Format time\n  const formatTime = useCallback((timestamp) => {\n    const now = Date.now();\n    const diff = now - new Date(timestamp).getTime();\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(minutes / 60);\n    const days = Math.floor(hours / 24);\n\n    if (days > 0) return `${days}d ago`;\n    if (hours > 0) return `${hours}h ago`;\n    if (minutes > 0) return `${minutes}m ago`;\n    return 'Just now';\n  }, []);\n\n  // Load chat sessions\n  const loadSessions = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const response = await API.get('/api/v1/admin/chat/sessions');\n      \n      if (response.data.success) {\n        const { sessions: sessionData, totalSessions, activeSessions, waitingSessions } = response.data.data;\n        setSessions(sessionData || []);\n        setStats({\n          totalSessions: totalSessions || 0,\n          activeSessions: activeSessions || 0,\n          waitingSessions: waitingSessions || 0\n        });\n      } else {\n        setError('Failed to load chat sessions');\n      }\n    } catch (err) {\n      console.error('Error loading sessions:', err);\n      if (err.response?.status === 404) {\n        setError('Chat feature not available. Please contact administrator.');\n      } else if (err.response?.status === 401) {\n        setError('Authentication failed. Please login again.');\n        // Redirect to admin dashboard\n        navigate('/Admin/Dashboard');\n      } else {\n        setError(err.response?.data?.message || 'Failed to load chat sessions');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [navigate]);\n\n  // Admin permission check and initial load\n  useEffect(() => {\n    if (!adminUser || (adminUser.role !== 1 && adminUser.role !== 0)) {\n      navigate('/Admin/Dashboard');\n      return;\n    }\n    loadSessions();\n  }, [adminUser, loadSessions, navigate]);\n\n  // Filter and search sessions\n  useEffect(() => {\n    let filtered = sessions;\n\n    if (filter !== 'all') {\n      filtered = filtered.filter(session => session.status === filter);\n    }\n\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(session => \n        session.userInfo?.firstName?.toLowerCase().includes(query) ||\n        session.userInfo?.lastName?.toLowerCase().includes(query) ||\n        session.userInfo?.email?.toLowerCase().includes(query) ||\n        session.lastMessage?.message?.toLowerCase().includes(query)\n      );\n    }\n\n    setFilteredSessions(filtered);\n  }, [sessions, filter, searchQuery]);\n\n  // Socket event handlers\n  useEffect(() => {\n    if (!socket) return;\n\n    const handleNewSession = (sessionData) => {\n      setSessions(prev => [sessionData, ...prev]);\n      setStats(prev => ({\n        ...prev,\n        totalSessions: prev.totalSessions + 1,\n        waitingSessions: prev.waitingSessions + 1\n      }));\n    };\n\n    const handleSessionUpdate = (updatedSession) => {\n      setSessions(prev => \n        prev.map(session => \n          session._id === updatedSession._id ? updatedSession : session\n        )\n      );\n    };\n\n    const handleNewMessage = (message) => {\n      setSessions(prev => \n        prev.map(session => {\n          if (session._id === message.sessionId) {\n            return {\n              ...session,\n              lastMessage: message,\n              unreadCount: session.unreadCount + (message.senderType === 'user' ? 1 : 0)\n            };\n          }\n          return session;\n        })\n      );\n    };\n\n    socket.on('admin:new_session', handleNewSession);\n    socket.on('admin:session_updated', handleSessionUpdate);\n    socket.on('message:new', handleNewMessage);\n\n    return () => {\n      socket.off('admin:new_session', handleNewSession);\n      socket.off('admin:session_updated', handleSessionUpdate);\n      socket.off('message:new', handleNewMessage);\n    };\n  }, [socket]);\n\n  // Handle session assignment\n  const assignSession = useCallback(async (sessionId) => {\n    try {\n      const response = await API.post(`/api/v1/admin/chat/assign/${sessionId}`, {\n        adminId: adminUser._id\n      });\n\n      if (response.data.success) {\n        setSessions(prev => \n          prev.map(session => \n            session._id === sessionId \n              ? { ...session, status: 'active', agent: adminUser }\n              : session\n          )\n        );\n        // Use navigate instead of window.open for better routing\n        navigate(`/admin/chat/session/${sessionId}`);\n      }\n    } catch (error) {\n      console.error('Error assigning session:', error);\n      setError('Failed to assign session');\n    }\n  }, [adminUser, navigate]);\n\n  // Handle navigation to chat session\n  const navigateToChat = useCallback((sessionId) => {\n    navigate(`/admin/chat/session/${sessionId}`);\n  }, [navigate]);\n\n  // Get status badge class\n  const getStatusClass = useCallback((status) => {\n    switch (status) {\n      case 'active':\n        return 'status-active';\n      case 'waiting':\n        return 'status-waiting';\n      case 'ended':\n        return 'status-ended';\n      default:\n        return 'status-default';\n    }\n  }, []);\n\n  // Get status indicator class\n  const getIndicatorClass = useCallback((status) => {\n    switch (status) {\n      case 'active':\n        return 'indicator-active';\n      case 'waiting':\n        return 'indicator-waiting';\n      case 'ended':\n        return 'indicator-ended';\n      default:\n        return 'indicator-default';\n    }\n  }, []);\n\n  // Filter options\n  const filterOptions = [\n    { value: 'all', label: 'All Sessions', count: stats.totalSessions },\n    { value: 'waiting', label: 'Waiting', count: stats.waitingSessions },\n    { value: 'active', label: 'Active', count: stats.activeSessions },\n    { value: 'ended', label: 'Ended', count: stats.totalSessions - stats.activeSessions - stats.waitingSessions }\n  ];\n\n  if (isLoading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n        <p className=\"loading-text\">Loading chat sessions...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"admin-chat-list-container\">\n      {/* Header */}\n      <div className=\"header-container\">\n        <div className=\"header-top\">\n          <h1 className=\"header-title\">\n            Live Chat Management\n          </h1>\n          \n          <button onClick={loadSessions} className=\"refresh-button\">\n            <i className=\"fas fa-sync-alt\"></i> Refresh\n          </button>\n        </div>\n\n        {/* Stats Cards */}\n        <div className=\"stats-grid\">\n          {[\n            { \n              label: 'Total Sessions', \n              value: stats.totalSessions, \n              colorClass: 'stats-total', \n              icon: 'fas fa-comments' \n            },\n            { \n              label: 'Active Chats', \n              value: stats.activeSessions, \n              colorClass: 'stats-active', \n              icon: 'fas fa-circle' \n            },\n            { \n              label: 'Waiting for Agent', \n              value: stats.waitingSessions, \n              colorClass: 'stats-waiting', \n              icon: 'fas fa-clock' \n            },\n            { \n              label: 'Connection Status', \n              value: isConnected ? 'Online' : 'Offline', \n              colorClass: isConnected ? 'stats-online' : 'stats-offline', \n              icon: isConnected ? 'fas fa-wifi' : 'fas fa-wifi-slash' \n            }\n          ].map((stat, index) => (\n            <div key={index} className=\"stats-card\">\n              <div className={`stats-icon ${stat.colorClass}`}>\n                <i className={stat.icon}></i>\n              </div>\n              <div className={`stats-value ${stat.colorClass}`}>\n                {stat.value}\n              </div>\n              <div className=\"stats-label\">\n                {stat.label}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* Filters and Search */}\n        <div className=\"filters-container\">\n          <div className=\"filter-buttons\">\n            {filterOptions.map((option) => (\n              <button\n                key={option.value}\n                onClick={() => setFilter(option.value)}\n                className={`filter-button ${filter === option.value ? 'active' : ''}`}\n              >\n                {option.label} ({option.count})\n              </button>\n            ))}\n          </div>\n          \n          <input\n            type=\"text\"\n            placeholder=\"Search sessions...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"search-input\"\n          />\n        </div>\n      </div>\n\n      {/* Sessions List */}\n      <div className=\"sessions-content\">\n        {error && (\n          <div className=\"error-message\">\n            <i className=\"fas fa-exclamation-triangle error-icon\"></i>\n            {error}\n          </div>\n        )}\n\n        {filteredSessions.length === 0 ? (\n          <div className=\"empty-state\">\n            <div className=\"empty-icon\">\n              <i className=\"fas fa-comments\"></i>\n            </div>\n            <h3 className=\"empty-title\">\n              No chat sessions found\n            </h3>\n            <p className=\"empty-description\">\n              {searchQuery ? 'Try adjusting your search terms' : 'Chat sessions will appear here when users start conversations'}\n            </p>\n          </div>\n        ) : (\n          <div className=\"sessions-grid\">\n            {filteredSessions.map((session) => (\n              <div\n                key={session._id}\n                className=\"session-card\"\n                onClick={() => navigateToChat(session._id)}\n              >\n                <div className=\"session-content\">\n                  <div className=\"user-avatar-container\">\n                    <img\n                      src={getProfileImageSrc(session.userInfo?.photo, !session.userInfo?.userId)}\n                      alt=\"User\"\n                      className=\"user-avatar\"\n                    />\n                    <div className={`status-indicator ${getIndicatorClass(session.status)}`} />\n                  </div>\n                  \n                  <div className=\"session-details\">\n                    <div className=\"session-header\">\n                      <div className=\"user-info\">\n                        <h3>\n                          {session.userInfo?.firstName || 'Guest User'} {session.userInfo?.lastName || ''}\n                        </h3>\n                        <p>\n                          {session.userInfo?.email || 'No email provided'}\n                        </p>\n                      </div>\n                      \n                      <div className=\"session-meta\">\n                        {session.unreadCount > 0 && (\n                          <span className=\"unread-count\">\n                            {session.unreadCount}\n                          </span>\n                        )}\n                        \n                        <span className={`status-badge ${getStatusClass(session.status)}`}>\n                          {session.status}\n                        </span>\n                        \n                        <span className=\"timestamp\">\n                          {formatTime(session.lastMessage?.timestamp || session.createdAt)}\n                        </span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"last-message\">\n                      <p>\n                        <strong>\n                          {session.lastMessage?.senderType === 'user' ? 'User: ' : 'Agent: '}\n                        </strong>\n                        {session.lastMessage?.message || 'No messages yet'}\n                      </p>\n                    </div>\n                    \n                    <div className=\"session-footer\">\n                      <div className=\"session-info\">\n                        <span>\n                          <i className=\"fas fa-calendar-alt\"></i>\n                          {new Date(session.createdAt).toLocaleDateString()}\n                        </span>\n                        {session.agent && (\n                          <span>\n                            <i className=\"fas fa-user\"></i>\n                            {session.agent.firstname} {session.agent.lastname}\n                          </span>\n                        )}\n                      </div>\n                      \n                      <div className=\"session-actions\">\n                        {session.status === 'waiting' && (\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              assignSession(session._id);\n                            }}\n                            className=\"action-button take-session-button\"\n                          >\n                            <i className=\"fas fa-hand-paper\"></i> Take Session\n                          </button>\n                        )}\n                        \n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            navigateToChat(session._id);\n                          }}\n                          className=\"action-button open-chat-button\"\n                        >\n                          <i className=\"fas fa-comments\"></i> Open Chat\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminChatList;\n"],"names":["AdminChatList","navigate","useNavigate","socket","isConnected","useSocket","auth","useAuth","adminUser","user","sessions","setSessions","useState","filteredSessions","setFilteredSessions","isLoading","setIsLoading","error","setError","filter","setFilter","searchQuery","setSearchQuery","stats","setStats","totalSessions","activeSessions","waitingSessions","getProfileImageSrc","useCallback","userPhoto","arguments","length","undefined","startsWith","concat","process","formatTime","timestamp","diff","Date","now","getTime","minutes","Math","floor","hours","days","loadSessions","async","response","API","get","data","success","sessionData","err","_err$response","_err$response2","console","status","_err$response3","_err$response3$data","message","useEffect","role","filtered","session","trim","query","toLowerCase","_session$userInfo","_session$userInfo$fir","_session$userInfo2","_session$userInfo2$la","_session$userInfo3","_session$userInfo3$em","_session$lastMessage","_session$lastMessage$","userInfo","firstName","includes","lastName","email","lastMessage","handleNewSession","prev","_objectSpread","handleSessionUpdate","updatedSession","map","_id","handleNewMessage","sessionId","unreadCount","senderType","on","off","assignSession","post","adminId","agent","navigateToChat","getStatusClass","getIndicatorClass","filterOptions","value","label","count","_jsxs","className","children","_jsx","onClick","colorClass","icon","stat","index","option","type","placeholder","onChange","e","target","_session$userInfo4","_session$userInfo5","_session$userInfo6","_session$userInfo7","_session$userInfo8","_session$lastMessage2","_session$lastMessage3","_session$lastMessage4","src","photo","userId","alt","createdAt","toLocaleDateString","firstname","lastname","stopPropagation"],"sourceRoot":""}