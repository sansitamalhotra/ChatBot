"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1386],{1386:(s,e,a)=>{a.r(e),a.d(e,{default:()=>t});var i=a(2483),l=a(9891),n=a(6807),r=a(1458),c=a(6723);const t=()=>{var s,e,a;const[t,o]=(0,i.useState)(null),[d,u]=(0,i.useState)(null),[h,x]=(0,i.useState)(!0),[m,j]=(0,i.useState)(null),[N,p]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{x(!0);try{await Promise.all([f(),g(),v()])}catch(s){console.error("Error initializing data:",s),j("Failed to load business hours data")}finally{x(!1)}})()},[]);const f=async()=>{try{const s=await r.A.get("/api/v1/businessHours/fetchBusinessHours");s.data&&s.data.success?(o(s.data.data.businessHours),j(null)):console.log("No business hours configuration found")}catch(s){console.error("Error fetching business hours:",s),s.message&&!s.message.includes("404")&&j("Error fetching business hours: "+s.message)}},g=async()=>{try{const s=await r.A.get("/api/v1/businessHours/checkBusinessHoursStatus");s.data&&s.data.success&&u(s.data.data)}catch(s){console.error("Error fetching business hours status:",s)}},v=async()=>{try{const s=await r.A.get("/api/v1/businessHours/fetchForthComingSchedule");s.data&&s.data.success&&p(s.data.data)}catch(s){console.error("Error fetching schedule:",s)}},b=async()=>{try{x(!0),j(null);const e=await r.A.post("/api/v1/businessHours/addDefaultBusinessHoursConfiguration");var s;if(e.data&&e.data.success)o(e.data.data),await g(),await v();else j((null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to create default configuration")}catch(e){console.error("Error creating default configuration:",e),j("Error creating default configuration: "+(e.message||"Unknown error"))}finally{x(!1)}},y=s=>{if(!s)return"";const[e,a]=s.split(":"),i=parseInt(e);return`${i%12||12}:${a} ${i>=12?"PM":"AM"}`};return h?(0,c.jsxs)("div",{className:"business-hours-container",children:[(0,c.jsx)(n.m,{children:(0,c.jsx)("title",{children:"Business Hours Management"})}),(0,c.jsx)("div",{className:"business-hours-header",children:(0,c.jsx)("h1",{className:"business-hours-title",children:"Business Hours Management"})}),(0,c.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,c.jsx)("div",{className:"loading-spinner"}),(0,c.jsx)("p",{style:{marginTop:"20px"},children:"Loading business hours..."})]})]}):(0,c.jsxs)("div",{className:"business-hours-container fade-in",children:[(0,c.jsx)(n.m,{children:(0,c.jsx)("title",{children:"Business Hours Management"})}),(0,c.jsxs)("div",{className:"business-hours-header",children:[(0,c.jsx)("h1",{className:"business-hours-title",children:"Business Hours Management"}),(0,c.jsx)("div",{className:"business-hours-actions",children:t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(l.N_,{to:"/admin/business-hours/add",className:"btn-primary ms-2",children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{className:"fas fa-plus fa-2x"})})," Update Configuration"]}),(0,c.jsxs)("button",{className:"btn-secondary",onClick:async()=>{x(!0),j(null);try{await Promise.all([f(),g(),v()])}catch(s){console.error("Error refreshing data:",s),j("Error refreshing data")}finally{x(!1)}},disabled:h,children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{class:"fab fa-nfc-symbol fa-2x"})})," Refresh"]})]}):(0,c.jsxs)("button",{className:"btn-primary",onClick:b,disabled:h,children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{class:"fas fa-bolt fa-2x"})})," Create Default Setup"]})})]}),m&&(0,c.jsxs)("div",{className:"alert alert-error",children:[(0,c.jsx)("strong",{children:"Error:"})," ",m,(0,c.jsx)("button",{onClick:()=>j(null),style:{float:"right",background:"none",border:"none",color:"inherit",cursor:"pointer"},children:(0,c.jsx)("span",{children:(0,c.jsx)("i",{class:"fas fa-close fa-2x"})})})]}),(0,c.jsxs)("div",{className:"business-hours-grid",children:[(0,c.jsxs)("div",{className:"business-hours-card",children:[(0,c.jsxs)("h2",{className:"card-title",children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{class:"fas fa-chart-bar fa-2x"})})," Current Status"]}),(0,c.jsxs)("div",{className:"current-status "+(d?d.isOpen&&!d.isNearClosing?"status-open":d.isOpen&&d.isNearClosing?"status-warning":"status-closed":"status-closed"),children:[(0,c.jsx)("div",{className:"status-indicator "+(d?d.isOpen&&!d.isNearClosing?"open":d.isOpen&&d.isNearClosing?"warning":"closed":"closed")}),(0,c.jsx)("span",{children:d?d.isOpen&&!d.isNearClosing?"Currently Open":d.isOpen&&d.isNearClosing?"Open - Closing Soon":"Currently Closed":"Status unavailable"})]}),d&&(0,c.jsxs)("div",{className:"hours-details",children:[(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Current Time:"}),(0,c.jsx)("span",{className:"hours-value",children:d.currentTime})]}),(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Timezone:"}),(0,c.jsx)("span",{className:"hours-value",children:d.timezone})]}),d.nextAvailable&&(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Next Available:"}),(0,c.jsx)("span",{className:"hours-value",children:d.nextAvailable})]}),d.minutesUntilClosing>0&&(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Minutes Until Closing:"}),(0,c.jsx)("span",{className:"hours-value",children:d.minutesUntilClosing})]})]})]}),(0,c.jsxs)("div",{className:"business-hours-card",children:[(0,c.jsxs)("h2",{className:"card-title",children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{class:"fas fa-gear fa-2x"})})," Configuration"]}),t?(0,c.jsxs)("div",{className:"hours-details",children:[(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Working Hours:"}),(0,c.jsxs)("span",{className:"hours-value",children:[y(t.workingHours.start)," - ",y(t.workingHours.end)]})]}),(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Timezone:"}),(0,c.jsx)("span",{className:"hours-value",children:t.timezone})]}),(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Active:"}),(0,c.jsx)("span",{className:"hours-value",children:t.isActive?"Yes":"No"})]}),(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Last Updated:"}),(0,c.jsx)("span",{className:"hours-value",children:new Date(t.updatedAt).toLocaleDateString()})]}),(0,c.jsxs)("div",{style:{marginTop:"20px"},children:[(0,c.jsx)("span",{className:"hours-label",children:"Working Days:"}),(0,c.jsx)("div",{className:"working-days",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(s=>(0,c.jsx)("span",{className:"day-badge "+(t.workingDays.includes(s)?"active":""),children:s.charAt(0).toUpperCase()+s.slice(1,3)},s))})]})]}):(0,c.jsxs)("div",{className:"no-data",children:[(0,c.jsx)("div",{className:"no-data-icon",children:(0,c.jsx)("i",{class:"fas fa-triangle-exclamation fa-2x"})}),(0,c.jsx)("p",{children:"No business hours configuration found"}),(0,c.jsx)("p",{style:{fontSize:"0.875rem",color:"#6c757d"},children:"Create a default configuration to get started"})]})]})]}),t&&t.settings&&(0,c.jsxs)("div",{className:"business-hours-card",style:{marginBottom:"30px"},children:[(0,c.jsxs)("h2",{className:"card-title",children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{class:"fas fa-wrench fa-2x"})})," Settings Overview"]}),(0,c.jsxs)("div",{className:"business-hours-grid",style:{margin:0},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{style:{marginBottom:"15px",color:"#495057"},children:"Chat Management"}),(0,c.jsxs)("div",{className:"hours-details",children:[(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Auto Close After Hours:"}),(0,c.jsx)("span",{className:"hours-value",children:t.settings.autoCloseChatsAfterHours?"Yes":"No"})]}),(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Warning Minutes:"}),(0,c.jsxs)("span",{className:"hours-value",children:[t.settings.warningMinutesBeforeClose||30," minutes"]})]}),(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"New Chat Cutoff:"}),(0,c.jsxs)("span",{className:"hours-value",children:[t.settings.allowNewChatsMinutesBeforeClose||15," minutes before close"]})]})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{style:{marginBottom:"15px",color:"#495057"},children:"Messages"}),(0,c.jsxs)("div",{className:"hours-details",children:[(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Outside Hours:"}),(0,c.jsxs)("span",{className:"hours-value",style:{fontSize:"0.8rem"},children:[null===(s=t.outsideHoursMessage)||void 0===s?void 0:s.substring(0,50),"..."]})]}),(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Weekend Message:"}),(0,c.jsxs)("span",{className:"hours-value",style:{fontSize:"0.8rem"},children:[null===(e=t.settings.weekendMessage)||void 0===e?void 0:e.substring(0,50),"..."]})]}),(0,c.jsxs)("div",{className:"hours-row",children:[(0,c.jsx)("span",{className:"hours-label",children:"Holiday Message:"}),(0,c.jsxs)("span",{className:"hours-value",style:{fontSize:"0.8rem"},children:[null===(a=t.settings.holidayMessage)||void 0===a?void 0:a.substring(0,50),"..."]})]})]})]})]})]}),N&&(0,c.jsxs)("div",{className:"business-hours-card",children:[(0,c.jsxs)("h2",{className:"card-title",children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{class:"fas fa-calendar fa-2x"})})," Forthcoming Schedule (Next 30 Days)"]}),(0,c.jsxs)("div",{className:"business-hours-grid",style:{margin:0},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{style:{marginBottom:"15px",color:"#495057"},children:"Holidays"}),N.holidays&&N.holidays.length>0?(0,c.jsx)("div",{className:"business-hours-list",children:N.holidays.map((s,e)=>(0,c.jsx)("div",{className:"list-item",children:(0,c.jsxs)("div",{className:"item-info",children:[(0,c.jsx)("div",{className:"item-title",children:s.name}),(0,c.jsxs)("div",{className:"item-subtitle",children:[new Date(s.date).toLocaleDateString(),s.recurring&&" (Recurring)"]}),s.description&&(0,c.jsx)("div",{className:"item-subtitle",style:{marginTop:"5px"},children:s.description})]})},e))}):(0,c.jsxs)("div",{className:"no-data",children:[(0,c.jsx)("div",{className:"no-data-icon",children:(0,c.jsx)("i",{className:"fas fa-gifts fa-2x"})}),(0,c.jsx)("p",{children:"No holidays scheduled"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{style:{marginBottom:"15px",color:"#495057"},children:"Special Hours"}),N.specialHours&&N.specialHours.length>0?(0,c.jsx)("div",{className:"business-hours-list",children:N.specialHours.map((s,e)=>(0,c.jsx)("div",{className:"list-item",children:(0,c.jsxs)("div",{className:"item-info",children:[(0,c.jsx)("div",{className:"item-title",children:new Date(s.date).toLocaleDateString()}),(0,c.jsx)("div",{className:"item-subtitle",children:s.isClosed?"Closed":s.hours&&s.hours.start&&s.hours.end?`${y(s.hours.start)} - ${y(s.hours.end)}`:"Special hours"}),s.reason&&(0,c.jsx)("div",{className:"item-subtitle",style:{marginTop:"5px"},children:s.reason})]})},e))}):(0,c.jsxs)("div",{className:"no-data",children:[(0,c.jsx)("div",{className:"no-data-icon",children:(0,c.jsx)("i",{class:"fas fa-clock fa-2x"})}),(0,c.jsx)("p",{children:"No special hours scheduled"})]})]})]})]}),(0,c.jsxs)("div",{className:"business-hours-card",children:[(0,c.jsxs)("h2",{className:"card-title",children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{class:"fas fa-bolt fa-2x"})})," Quick Actions"]}),(0,c.jsxs)("div",{className:"business-hours-actions",style:{justifyContent:"flex-start",gap:"20px"},children:[(0,c.jsxs)(l.N_,{to:"/admin/business-hours/add",className:"btn-primary",children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{class:"fas fa-pen-to-square fa-2x"})})," Add/Update Hours"]}),(0,c.jsxs)(l.N_,{to:"/admin/business-hours/holidays",className:"btn-secondary",children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{className:"fas fa-gifts fa-2x me-2"})})," Manage Holidays"]}),(0,c.jsxs)(l.N_,{to:"/admin/business-hours/special",className:"btn-secondary",children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{className:"fas fa-star fa-2x me-2"})})," Special Hours"]}),!t&&(0,c.jsxs)("button",{className:"btn-primary",onClick:b,disabled:h,children:[(0,c.jsx)("span",{children:(0,c.jsx)("i",{className:"fas fa-rocket fa-2x me-2"})})," Quick Setup"]})]})]})]})}}}]);
//# sourceMappingURL=1386.15862a33.chunk.js.map