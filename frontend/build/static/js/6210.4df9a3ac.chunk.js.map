{"version":3,"file":"static/js/6210.4df9a3ac.chunk.js","mappings":"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","sources":["Pages/Login/Login.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Link, useNavigate, useLocation, useParams, Navigate } from \"react-router-dom\";\nimport API from \"../../helpers/API\";\nimport { useAuth } from \"../../Context/AuthContext\";\nimport TestHomeHeader from '../TestHomeHeader';\nimport Footer from '../Footer';\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport './Login.css';\n\nconst Login = () => {\n  const canonicalUrl = window.location.href;\n  const [email, setEmail] = useState(\"\");\n  const emailRegex = /^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/;\n  const [password, setPassword] = useState(\"\");\n  const [auth, setAuth, isInitialized] = useAuth(); // Get isInitialized from useAuth\n  const [user, setUser] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [redirectPath, setRedirectPath] = useState(null); // Track redirect path\n  const params = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [isOAuth, setIsOAuth] = useState(false);\n\n  const notifyErr = (msg) =>\n    toast.error(msg, {\n      position: \"top-center\",\n      autoClose: 5000,\n      closeOnClick: true,\n      pauseOnHover: true,\n      theme: \"light\"\n    });\n  \n  const notifySucc = (msg) =>\n    toast.success(msg, {\n      position: \"top-center\",\n      autoClose: 3000,\n      closeOnClick: true,\n      pauseOnHover: true,\n      theme: \"light\"\n    });\n\n  const fetchRegUserById = async () => {\n    try {\n      const { data } = await API.get(`/api/v1/users/fetchRegUserById/${params._id}`);\n      setUser(data.user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      notifyErr(\"Failed to fetch user information\");\n    }\n  };\n\n  \n\n  // Function to get redirect path based on user role\n  const getRedirectPath = (role) => {\n    switch (role) {\n      case 1:\n        return \"/Admin/Dashboard\";\n      case 2:\n        return \"/Employer/Dashboard\";\n      case 3:\n        return \"/Super-Admin/Dashboard\";\n      case 0:\n        return `/Applicant/Profile/${auth?.user?.userId}`;\n      default:\n        return null;\n    }\n  };\n\n  // Check if user is already authenticated - ONLY after auth is initialized\n  useEffect(() => {\n    if (isInitialized && auth?.user && auth?.token) {\n      const redirectTo = getRedirectPath(auth.user.role);\n      if (redirectTo) {\n        console.log(\"User already authenticated, redirecting to:\", redirectTo);        \n        setRedirectPath(redirectTo);\n      }\n    }\n  }, [isInitialized, auth?.user, auth?.token]);\n\n  // Fetch registered user details if ID is provided\n  useEffect(() => {\n    if (params?._id) fetchRegUserById();\n  }, [params?._id]);\n\n  // Handle OAuth redirects\n  useEffect(() => {\n    const urlParams = new URLSearchParams(location.search);\n    const token = urlParams.get(\"userAuthDetails\");\n    if (token) {\n      setIsOAuth(true);\n      const user = {}; // Fetch user details if necessary\n      // handleSocialLogin(token, user); // Uncomment if you have this function\n    }\n  }, [location.search]);\n\n  const handleLoginSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    if (!email) {\n      notifyErr(\"Email Field Cannot be Empty\");\n      setLoading(false);\n      return;\n    }\n    if (!emailRegex.test(email)) {\n      notifyErr(\"Invalid Email Address\");\n      setLoading(false);\n      return;\n    }\n    if (!password) {\n      notifyErr(\"Password Field Cannot be Empty\");\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const res = await API.post(\n        \"/api/v1/auth/login\",\n        { email, password },\n        {\n          headers: {\n            \"Access-Control-Max-Age\": 86400\n          }\n        }\n      );\n\n      if (res.data.success) {\n        notifySucc(res.data?.message);\n        \n        // Update auth context with the new user data\n        const newAuthData = {\n          user: res.data.user,\n          token: res.data.token\n        };\n        \n        setAuth(newAuthData);\n        \n        // Determine redirect path based on the NEW user data from response\n        const redirectTo = getRedirectPath(res.data.user.role);\n        \n        if (redirectTo) {\n          console.log(\"Login successful, redirecting to:\", redirectTo);\n          // Use navigate with replace to prevent back button issues\n          navigate(redirectTo, { replace: true });\n        }\n      } else {\n        notifyErr(res.data.message);\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      if (error.response && error.response.status === 400) {\n        notifyErr(\"Invalid Login Credential!\");\n      } else {\n        notifyErr(\"Something Went Wrong, Login Failed!!!. Try Again Later\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // If redirectPath is set, redirect immediately\n  if (redirectPath) {\n    return <Navigate to={redirectPath} replace />;\n  }\n\n  // Show loading while auth context is initializing\n  if (!isInitialized) {\n    return (\n      <div className=\"d-flex justify-content-center align-items-center\" style={{ height: \"100vh\" }}>\n        <div className=\"spinner-border\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n    );\n  }\n\n  // Only render login form if user is NOT authenticated\n  return (\n    <>\n      <Helmet>\n        <link rel=\"canonical\" href={canonicalUrl} />\n        <title>Login - ProsoftSynergies | Canada, US & India ProsoftSynergies</title>\n        <meta\n          name=\"description\"\n          content=\"Login to ProsoftSynergies, One of the Leading Global Job Platform Connecting Employers and Job Seekers Across Canada, the US, and India. Secure Access To Your Account and Explore Endless Career Opportunities.\"\n        />\n        <meta\n          name=\"keywords\"\n          content=\"ProsoftSynergies Website, Job Portal, Login, Sign In, Job Search, Career Opportunities, Canada jobs, US Jobs, India Jobs, Employment, Job Seekers, Employer Login\"\n        />\n        <meta name=\"author\" content=\"ProsoftSynergies\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <meta name=\"robots\" content=\"noindex, nofollow\" />\n      </Helmet>\n      \n      <TestHomeHeader />\n      <div className=\"container-fluid px-4 py-5 mx-auto\">\n        <div className=\"card card0\">\n          <div className=\"d-flex flex-lg-row flex-column-reverse\">\n            <div className=\"card card1\">\n              <div className=\"row justify-content-center my-auto\">\n                <div className=\"col-md-8 col-10 my-5\">\n                  <div className=\"row justify-content-center px-5 mb-3\">\n                    {/* <img id=\"logo\" src={Logo} alt=\"Thinkbeyond Logo\" /> */}\n                  </div>\n                  <h3 className=\"mb-5 text-center heading mt-5\">We Are ProSoft</h3>\n                  <h6 className=\"msg-info\">Please Login to Your ProSoft Account</h6>\n                  \n                  <form onSubmit={handleLoginSubmit}>\n                    <div className=\"form-group\">\n                      <input\n                        type=\"email\"\n                        id=\"email\"\n                        placeholder=\"Email\"\n                        className=\"loginFormInput form-control mb-3\"\n                        value={email}\n                        onChange={(e) => setEmail(e.target.value)}\n                        disabled={loading}\n                      />\n                    </div>\n\n                    <div className=\"form-group\">\n                      <input\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        className=\"loginFormInput form-control\"\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                        disabled={loading}\n                      />\n                    </div>\n\n                    <div className=\"row justify-content-center my-2 px-2 loginbtn\">\n                      <button \n                        type=\"submit\" \n                        className=\"btn-block btn-color\"\n                        disabled={loading}\n                      >\n                        {loading ? \"Logging in...\" : \"Login\"}\n                      </button>\n                    </div>\n                    \n                    <div className=\"row justify-content-center my-2 forgotpassword\">\n                      <Link to=\"/Forgot-Password-Reset-Request\">\n                        <small className=\"text-muted\">Forgot Password?</small>\n                      </Link>\n                    </div>\n                    \n                    <div className=\"bottom text-center mb-5\">\n                      <p className=\"sm-text mx-auto mb-3\">\n                        Don't have an account?\n                        <button className=\"btn btn-white ms-3\">\n                          <Link to=\"/Register\">Register</Link>\n                        </button>\n                      </p>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"card card2\">\n              <div className=\"my-auto mx-md-5 px-md-5 right\">\n                <h3 className=\"text-white\">We're More Than Just Recruitment Specialists</h3>\n                <small className=\"text-white\">\n                  By leveraging cutting-edge strategies and a deep understanding of the market, we not only fill positions but also foster long-term partnerships that drive business growth and success. Our team is dedicated to crafting tailored solutions that align with the unique needs of each client, ensuring seamless integration of top talent into their organizations.\n                </small>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Footer />   \n    </>\n  );\n};\n\nexport default Login;\n"],"names":["Login","canonicalUrl","window","location","href","email","setEmail","useState","emailRegex","password","setPassword","auth","setAuth","isInitialized","useAuth","user","setUser","loading","setLoading","redirectPath","setRedirectPath","params","useParams","navigate","useNavigate","useLocation","isOAuth","setIsOAuth","notifyErr","msg","toast","error","position","autoClose","closeOnClick","pauseOnHover","theme","getRedirectPath","role","_auth$user","concat","userId","useEffect","token","redirectTo","console","log","_id","async","data","API","get","fetchRegUserById","URLSearchParams","search","_jsx","Navigate","to","replace","_jsxs","_Fragment","children","Helmet","rel","name","content","TestHomeHeader","className","onSubmit","e","preventDefault","test","res","post","headers","success","_res$data","message","newAuthData","response","status","type","id","placeholder","value","onChange","target","disabled","Link","Footer","style","height"],"sourceRoot":""}