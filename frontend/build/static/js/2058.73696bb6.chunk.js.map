{"version":3,"file":"static/js/2058.73696bb6.chunk.js","mappings":"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","sources":["components/ChatBotIcon/ping.js","components/ChatBotIcon/ChatBotIcon.jsx","Pages/Footer.jsx","Pages/TestHomeHeader.jsx","Pages/Logout/Logout.jsx"],"sourcesContent":["const createPingSound = () => {\r\n  // Simple WAV file data URL with a short beep\r\n  // This is a minimal WAV file containing a 440Hz tone for about 200ms\r\n  const wavData = \"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmgfCdKR2/LVdiMFl5qQ0NJhJwAVZrXn6UoMCtmr5uW5bhoFl6mc0dVmDAOJmdR+UD0hD2K76dVrHwgXirLe2HIqBTyDyfHchzIFC0G25+mxWhAJYKHV7b1qLwU0g8rx34k1BTGByvHciEAHGGy88tyWPgUmfMs+4YlEBTqByvHci0EGH3LB9deWP\";\r\n  \r\n  return wavData;\r\n};\r\n\r\n// Export the ping sound\r\nconst beepUrl = createPingSound();\r\nexport default beepUrl;\r\n","//frontend/src/components/ChatBotIcon/ChatBotIcon.jsx:\r\nimport React, { useEffect, useRef, useState, useMemo, useCallback } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport ReactDOM from \"react-dom\";\r\nimport API from \"../../helpers/API\";\r\nimport { useSocket } from \"../../Context/SocketContext\";\r\nimport { useAuth } from \"../../Context/AuthContext\";\r\nimport { logWithIcon } from \"../../utils/consoleIcons\";\r\nimport \"./ChatBotIcon.css\";\r\nimport beepUrl from \"./ping\";\r\nimport FavIconLogo from \"./FaviIcon-Logo.png\";\r\nimport Modal from 'react-modal';\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst STORAGE_USER_KEY = process.env.REACT_APP_CHAT_STORAGE_USER_KEY || \"chat_widget_userinfo_v1\";\r\nconst STORAGE_MESSAGES_PREFIX = process.env.REACT_APP_CHAT_STORAGE_MESSAGES_PREFIX || \"chat_widget_messages_v1_\";\r\nconst STORAGE_INPUT_KEY = process.env.REACT_APP_CHAT_INPUT_KEY || \"chat_widget_input_text\";\r\n\r\nfunction timeAgo(ts) {\r\n  if (!ts) return \"\";\r\n  const d = new Date(ts);\r\n  const diff = Math.floor((Date.now() - d.getTime()) / 1000);\r\n  if (diff < 10) return \"just now\";\r\n  if (diff < 60) return `${diff}s`;\r\n  if (diff < 3600) return `${Math.floor(diff / 60)}m`;\r\n  if (diff < 86400) return `${Math.floor(diff / 3600)}h`;\r\n  return d.toLocaleDateString();\r\n}\r\n\r\nconst defaultAvatar =\r\n  \"https://img.freepik.com/premium-vector/account-icon-user-icon-vector-graphics_292645-552.jpg?w=300\";\r\n\r\nconst getProfileImageSrc = (userPhoto, isGuest = false) => {\r\n  if (isGuest) return defaultAvatar;\r\n  if (!userPhoto) return \"\";\r\n  const isUploadPath =\r\n    typeof userPhoto === \"string\" &&\r\n    userPhoto.startsWith(\"/uploads/userAvatars/\");\r\n  return isUploadPath\r\n    ? process.env.REACT_APP_API_URL + userPhoto\r\n    : userPhoto;\r\n};\r\n\r\nasync function fetchBusinessHours() {\r\n  try {\r\n    const res = await API.get(`/api/v1/businessHours/checkBusinessHoursStatus`);\r\n    if (res.data.success) {\r\n      return res.data.data;\r\n    }\r\n  } catch (err) {\r\n    logWithIcon.error(\"Failed to fetch business hours\", err);\r\n  }\r\n  return null;\r\n}\r\n\r\nconst ChatBotIcon = () => {\r\n  const { socket, isConnected } = useSocket();\r\n  const [auth] = useAuth();\r\n  const userFromAuth = auth?.user;\r\n  const navigate = useNavigate();\r\n\r\n  const [input, setInput] = useState(\"\");\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [session, setSession] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [businessInfo, setBusinessInfo] = useState(null);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [showGuestForm, setShowGuestForm] = useState(false);\r\n  \r\n  const [isSubmittingGuest, setIsSubmittingGuest] = useState(false);\r\n  const [guestFormSubmitted, setGuestFormSubmitted] = useState(false);\r\n  const [guestFormErrors, setGuestFormErrors] = useState({});\r\n  const [defaultMessagesLoaded, setDefaultMessagesLoaded] = useState(false);\r\n  const [hasUserSentMessage, setHasUserSentMessage] = useState(false);\r\n  const [showQuitConfirm, setShowQuitConfirm] = useState(false);\r\n  const [pendingMessages, setPendingMessages] = useState(new Set());\r\n  const [isQuitting, setIsQuitting] = useState(false);\r\n\r\n  const [guestInfo, setGuestInfo] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    phone: ''\r\n  });\r\n\r\n  const audioRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n  const quitTimeoutRef = useRef(null);\r\n\r\n  const userFormSubmitted = useMemo(() => {\r\n    if (userFromAuth) {\r\n      logWithIcon.success('User is authenticated:', userFromAuth.email);\r\n      return true;\r\n    }\r\n    logWithIcon.active('Guest form submission status:', guestFormSubmitted);\r\n    return guestFormSubmitted;\r\n  }, [userFromAuth, guestFormSubmitted]);\r\n\r\n  const shouldShowGuestForm = useMemo(() => {\r\n    const result = !userFromAuth && !guestFormSubmitted;\r\n    logWithIcon.guest('Should show guest form:', {\r\n      userFromAuth: !!userFromAuth,\r\n      guestFormSubmitted,\r\n      result\r\n    });\r\n    return result;\r\n  }, [userFromAuth, guestFormSubmitted]);\r\n\r\n  const storageKey = useMemo(\r\n    () => STORAGE_MESSAGES_PREFIX + (session?._id || session?.id || \"guest\"),\r\n    [session]\r\n  );\r\n\r\n  // Enhanced quit functionality with comprehensive cleanup - FIXED VERSION\r\n  const handleQuit = useCallback(async () => {\r\n  if (isQuitting) {\r\n    console.warn('Quit already in progress, ignoring duplicate request');\r\n    return;\r\n  }\r\n\r\n  console.log('Starting enhanced quit sequence...');\r\n  setIsQuitting(true);\r\n\r\n  try {\r\n    // 1. Immediately clear UI state to prevent freezing\r\n    setShowQuitConfirm(false);\r\n    setIsOpen(false);\r\n\r\n    // 2. Use setTimeout to defer heavy operations\r\n    setTimeout(() => {\r\n      // 3. Socket cleanup (non-blocking)\r\n      if (socket?.connected && session) {\r\n        socket.emit('session:end', { \r\n          sessionId: session._id || session.id \r\n        });\r\n        console.log('Socket session end signal sent');\r\n      }\r\n\r\n      // 4. Batch state updates to prevent multiple re-renders\r\n      ReactDOM.unstable_batchedUpdates(() => {\r\n        setMessages([]);\r\n        setSession(null);\r\n        setUnreadCount(0);\r\n        setDefaultMessagesLoaded(false);\r\n        setHasUserSentMessage(false);\r\n        setPendingMessages(new Set());\r\n        setInput(\"\");\r\n      });\r\n\r\n      // 5. Reset guest form states if applicable\r\n      if (!userFromAuth) {\r\n        setShowGuestForm(false);\r\n        setGuestFormSubmitted(false);\r\n        setGuestFormErrors({});\r\n        setIsSubmittingGuest(false);\r\n        setGuestInfo({\r\n          firstName: '',\r\n          lastName: '',\r\n          email: '',\r\n          phone: ''\r\n        });\r\n      }\r\n\r\n      // 6. localStorage cleanup (asynchronous)\r\n      setTimeout(() => {\r\n        try {\r\n          const currentSessionKey = session ? (STORAGE_MESSAGES_PREFIX + (session.id || session._id)) : null;\r\n          \r\n          if (currentSessionKey) {\r\n            localStorage.removeItem(currentSessionKey);\r\n            console.log(`Cleared current session: ${currentSessionKey}`);\r\n          }\r\n          \r\n          // Clean up all chat-related storage\r\n          const keysToRemove = [];\r\n          for (let i = 0; i < localStorage.length; i++) {\r\n            const key = localStorage.key(i);\r\n            if (key && key.startsWith(STORAGE_MESSAGES_PREFIX)) {\r\n              keysToRemove.push(key);\r\n            }\r\n          }\r\n          \r\n          keysToRemove.forEach(key => {\r\n            localStorage.removeItem(key);\r\n            console.log(`Cleaned up: ${key}`);\r\n          });\r\n          \r\n          // Clear input and guest info if needed\r\n          localStorage.removeItem(STORAGE_INPUT_KEY);\r\n          \r\n          if (!userFromAuth) {\r\n            localStorage.removeItem(STORAGE_USER_KEY);\r\n            console.log('Cleared guest user information');\r\n          }\r\n          \r\n          console.log('localStorage cleanup completed');\r\n        } catch (error) {\r\n          console.warn('localStorage cleanup error (non-critical):', error);\r\n        }\r\n      }, 0);\r\n\r\n      console.log('Enhanced quit sequence completed successfully');\r\n      \r\n      // 7. Reset isQuitting after cleanup is complete\r\n      setIsQuitting(false);\r\n    }, 0);\r\n    \r\n  } catch (error) {\r\n    console.error('Error during quit sequence:', error);\r\n    setIsQuitting(false);\r\n  }\r\n}, [session, userFromAuth, socket]);\r\n\r\n  // Reset chat to completely initial state\r\n  const resetChatToInitialState = useCallback(() => {\r\n    if (isQuitting) return; // Prevent conflicts\r\n    \r\n    console.log('Resetting chat to initial state...');\r\n    \r\n    // Batch all state updates\r\n    const resetState = () => {\r\n      setInput(\"\");\r\n      setIsOpen(false);\r\n      setSession(null);\r\n      setMessages([]);\r\n      setBusinessInfo(null);\r\n      setUnreadCount(0);\r\n      setShowGuestForm(false);\r\n      setIsSubmittingGuest(false);\r\n      setGuestFormSubmitted(false);\r\n      setGuestFormErrors({});\r\n      setDefaultMessagesLoaded(false);\r\n      setHasUserSentMessage(false);\r\n      setShowQuitConfirm(false);\r\n      setPendingMessages(new Set());\r\n      \r\n      if (!userFromAuth) {\r\n        setGuestInfo({\r\n          firstName: '',\r\n          lastName: '',\r\n          email: '',\r\n          phone: ''\r\n        });\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(resetState);\r\n    console.log('Chat state reset completed');\r\n  }, [userFromAuth, isQuitting]);\r\n\r\n  const resetGuestForm = useCallback(() => {\r\n    if (isQuitting) return;\r\n    \r\n    setShowGuestForm(false);\r\n    setGuestFormErrors({});\r\n    setIsSubmittingGuest(false);\r\n  }, [isQuitting]);\r\n\r\n  const cancelGuestForm = useCallback(() => {\r\n    if (isQuitting) return;\r\n    \r\n    setShowGuestForm(false);\r\n    setGuestFormErrors({});\r\n    setIsSubmittingGuest(false);\r\n    setGuestFormSubmitted(false);\r\n    setHasUserSentMessage(false);\r\n\r\n    setMessages(prev => {\r\n      const lastMessage = prev[prev.length - 1];\r\n      if (lastMessage && lastMessage.from === 'user' && !guestFormSubmitted) {\r\n        return prev.slice(0, -1);\r\n      }\r\n      return prev;\r\n    });\r\n\r\n    try {\r\n      localStorage.removeItem(STORAGE_USER_KEY);\r\n    } catch (error) {\r\n      console.warn(\"Failed to clear guest info from localStorage:\", error);\r\n    }\r\n\r\n    setGuestInfo({\r\n      firstName: '',\r\n      lastName: '',\r\n      email: '',\r\n      phone: ''\r\n    });\r\n\r\n    console.log('Guest form cancelled and state reset');\r\n  }, [guestFormSubmitted, isQuitting]);\r\n\r\n  const handleModalOverlayClick = useCallback((e) => {\r\n    if (e.target === e.currentTarget && !isSubmittingGuest && !isQuitting) {\r\n      resetGuestForm();\r\n    }\r\n  }, [isSubmittingGuest, isQuitting, resetGuestForm]);\r\n\r\n  // Cleanup timeouts on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (quitTimeoutRef.current) {\r\n        clearTimeout(quitTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleEscKey = (e) => {\r\n      if (e.key === 'Escape' && !isQuitting) {\r\n        if (showGuestForm && !isSubmittingGuest) {\r\n          resetGuestForm();\r\n        } else if (showQuitConfirm) {\r\n          setShowQuitConfirm(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    if ((showGuestForm || showQuitConfirm) && !isQuitting) {\r\n      document.addEventListener('keydown', handleEscKey);\r\n      return () => document.removeEventListener('keydown', handleEscKey);\r\n    }\r\n  }, [showGuestForm, showQuitConfirm, isSubmittingGuest, isQuitting, resetGuestForm]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const savedInput = localStorage.getItem(STORAGE_INPUT_KEY);\r\n      if (savedInput && savedInput.trim()) {\r\n        setInput(savedInput);\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"Failed to load input from localStorage:\", error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen || isQuitting) return;\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      try {\r\n        if (input && input.trim()) {\r\n          localStorage.setItem(STORAGE_INPUT_KEY, input);\r\n        } else if (!input) {\r\n          localStorage.removeItem(STORAGE_INPUT_KEY);\r\n        }\r\n      } catch (error) {\r\n        console.warn(\"Failed to save input to localStorage:\", error);\r\n      }\r\n    }, 300);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [input, isOpen, isQuitting]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const raw = localStorage.getItem(STORAGE_USER_KEY);\r\n      if (raw) {\r\n        const u = JSON.parse(raw);\r\n        setGuestInfo({\r\n          firstName: u.firstName || \"\",\r\n          lastName: u.lastName || \"\",\r\n          email: u.email || \"\",\r\n          phone: u.phone || \"\"\r\n        });\r\n\r\n        const hasRequiredInfo = Boolean(u.firstName && u.email && u.firstName.trim() && u.email.trim());\r\n        setGuestFormSubmitted(hasRequiredInfo);\r\n        console.log('Loaded guest info from storage:', u, 'Form submitted:', hasRequiredInfo);\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"Failed to load guest info from localStorage:\", error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isQuitting) return;\r\n    \r\n    try {\r\n      const raw = localStorage.getItem(storageKey);\r\n      if (raw) {\r\n        const loadedMessages = JSON.parse(raw);\r\n        setMessages(loadedMessages);\r\n        const userMessageExists = loadedMessages.some(msg => msg.from === \"user\");\r\n        if (userMessageExists) {\r\n          setHasUserSentMessage(true);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"Failed to load messages from localStorage:\", error);\r\n    }\r\n  }, [storageKey, isQuitting]);\r\n\r\n  useEffect(() => {\r\n    if (isQuitting) return;\r\n    \r\n    try {\r\n      localStorage.setItem(storageKey, JSON.stringify(messages));\r\n    } catch (error) {\r\n      console.warn(\"Failed to save messages to localStorage:\", error);\r\n    }\r\n  }, [messages, storageKey, isQuitting]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && messagesEndRef.current && !isQuitting) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  }, [messages, isOpen, isQuitting]);\r\n\r\n  useEffect(() => {\r\n    if (beepUrl) audioRef.current = new Audio(beepUrl);\r\n  }, []);\r\n\r\n  const normalizeMessage = useCallback(\r\n    (msg) => {\r\n      if (!msg || isQuitting) return null;\r\n      const id = msg._id || msg.id || `m_${Date.now()}_${Math.random()}`;\r\n      const text = msg.message || msg.text || \"\";\r\n      const ts = msg.createdAt || msg.timestamp || Date.now();\r\n      const from =\r\n        msg.senderType === \"user\"\r\n          ? \"user\"\r\n          : msg.senderType === \"agent\"\r\n            ? \"agent\"\r\n            : msg.senderType === \"bot\"\r\n              ? \"bot\"\r\n              : msg.from || \"bot\";\r\n\r\n      const avatar =\r\n        msg.metadata?.senderAvatar ||\r\n        (from === \"agent\"\r\n          ? session?.agent?.photo || FavIconLogo\r\n          : from === \"user\"\r\n            ? getProfileImageSrc(userFromAuth?.photo, !userFromAuth)\r\n            : FavIconLogo);\r\n\r\n      return {\r\n        id,\r\n        from,\r\n        text,\r\n        timestamp: ts,\r\n        avatar,\r\n        quickReplies: msg.metadata?.quickReplies || msg.quickReplies || [],\r\n        metadata: msg.metadata || {},\r\n        ...msg,\r\n      };\r\n    },\r\n    [session, userFromAuth, isQuitting]\r\n  );\r\n\r\n  const handleIncomingMessage = useCallback(\r\n    (rawMsg) => {\r\n      if (isQuitting) {\r\n        console.log('Ignoring incoming message - chat is quitting');\r\n        return;\r\n      }\r\n      \r\n      const msg = normalizeMessage(rawMsg);\r\n      if (!msg) return;\r\n\r\n      if (msg.from === 'bot' && rawMsg.metadata?.redirectUrl) {\r\n        console.log(\"Redirecting to:\", rawMsg.metadata.redirectUrl);\r\n        const url = rawMsg.metadata.redirectUrl;\r\n        if (url.startsWith(\"/\")) {\r\n          window.open(url, '_blank');\r\n        }\r\n        return;\r\n      }\r\n\r\n      setMessages((prevMessages) => {\r\n        const messageExists = prevMessages.some(existingMsg =>\r\n          existingMsg.id === msg.id ||\r\n          (existingMsg.text === msg.text &&\r\n            existingMsg.from === msg.from &&\r\n            Math.abs(existingMsg.timestamp - msg.timestamp) < 1000)\r\n        );\r\n\r\n        if (messageExists) {\r\n          console.log('Duplicate message detected, skipping:', msg);\r\n          return prevMessages;\r\n        }\r\n\r\n        if (msg.from === 'user') {\r\n          setPendingMessages(prev => {\r\n            const newPending = new Set(prev);\r\n            for (const pendingId of prev) {\r\n              if (pendingId.includes(msg.text.substring(0, 10))) {\r\n                newPending.delete(pendingId);\r\n              }\r\n            }\r\n            return newPending;\r\n          });\r\n        }\r\n\r\n        return [...prevMessages, msg];\r\n      });\r\n      \r\n      if (msg.from === 'bot' && msg.quickReplies.length > 0) {\r\n        console.log('Bot message with quick replies:', msg.quickReplies);\r\n      }\r\n    },\r\n    [normalizeMessage, isQuitting]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!socket || isQuitting) return;\r\n\r\n    const onSessionCreated = (payloadRaw) => {\r\n      if (isQuitting) return;\r\n      \r\n      console.log('Session created event received:', payloadRaw);\r\n      const payload = payloadRaw?.body?.data || payloadRaw;\r\n      const sess = payload?.session || payload || null;\r\n      if (sess) {\r\n        setSession(sess);\r\n        console.log('Session set:', sess);\r\n        if (payload.businessHours) setBusinessInfo(payload.businessHours);\r\n      }\r\n      if (payload?.welcomeMessage) {\r\n        handleIncomingMessage(payload.welcomeMessage);\r\n      }\r\n    };\r\n\r\n    const guestSessionEvent = session?.guestEmail ? `guestUserSessionCreated:${session.guestEmail}` : null;\r\n    const onGuestSessionCreated = (payload) => {\r\n      if (isQuitting) return;\r\n      \r\n      console.log('Guest user session created event received:', payload);\r\n      if (payload?.welcomeMessage) {\r\n        handleIncomingMessage(payload.welcomeMessage);\r\n      }\r\n    };\r\n\r\n    const onMessageNew = (msg) => {\r\n      if (isQuitting) return;\r\n      \r\n      console.log('New message event received:', msg);\r\n      handleIncomingMessage(msg);\r\n    };\r\n\r\n    const onMessageStatus = ({ messageId, status }) => {\r\n      if (isQuitting) return;\r\n      \r\n      setMessages((prev) =>\r\n        prev.map((m) => (m.id === messageId ? { ...m, status } : m))\r\n      );\r\n    };\r\n\r\n    socket.on(\"session:created\", onSessionCreated);\r\n    socket.on(\"message:new\", onMessageNew);\r\n    socket.on(\"message:status\", onMessageStatus);\r\n    if (guestSessionEvent) {\r\n      socket.on(guestSessionEvent, onGuestSessionCreated);\r\n    }\r\n\r\n    return () => {\r\n      socket.off(\"session:created\", onSessionCreated);\r\n      socket.off(\"message:new\", onMessageNew);\r\n      socket.off(\"message:status\", onMessageStatus);\r\n      if (guestSessionEvent) {\r\n        socket.off(guestSessionEvent, onGuestSessionCreated);\r\n      }\r\n    };\r\n  }, [socket, handleIncomingMessage, session, isQuitting]);\r\n\r\n  const createSession = useCallback(async () => {\r\n    if (!socket || !socket.connected || session || isQuitting) {\r\n      console.log('Cannot create session:', {\r\n        hasSocket: !!socket,\r\n        isConnected: socket?.connected,\r\n        hasSession: !!session,\r\n        isQuitting\r\n      });\r\n      return;\r\n    }\r\n\r\n    let sessionData;\r\n    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n\r\n    if (userFromAuth) {\r\n      console.log('Creating session for authenticated user:', userFromAuth.email);\r\n      sessionData = {\r\n        entryPoint: \"widget\",\r\n        selectedOption: \"general_inquiry\",\r\n        timezone,\r\n        firstName: userFromAuth.firstname || userFromAuth.firstName,\r\n        lastName: userFromAuth.lastname || userFromAuth.lastName,\r\n        email: userFromAuth.email,\r\n        phone: userFromAuth.phone || '',\r\n        metadata: {\r\n          authenticatedUser: true,\r\n          userId: userFromAuth._id || userFromAuth.id\r\n        }\r\n      };\r\n    } else {\r\n      console.log('Creating session for guest user:', guestInfo);\r\n      const { firstName, lastName, email, phone } = guestInfo;\r\n\r\n      try {\r\n        localStorage.setItem(\r\n          STORAGE_USER_KEY,\r\n          JSON.stringify({ firstName, lastName, email, phone })\r\n        );\r\n      } catch (error) {\r\n        console.warn(\"Failed to save guest info to localStorage:\", error);\r\n      }\r\n\r\n      sessionData = {\r\n        entryPoint: \"widget\",\r\n        selectedOption: \"general_inquiry\",\r\n        timezone,\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        phone,\r\n        guestEmail: email,\r\n        metadata: {\r\n          guestFirstName: firstName,\r\n          guestLastName: lastName,\r\n          guestPhone: phone\r\n        }\r\n      };\r\n    }\r\n\r\n    console.log('Emitting session:create with data:', sessionData);\r\n\r\n    socket.emit(\"session:create\", sessionData, (err, result) => {\r\n      if (err || isQuitting) {\r\n        console.error(\"session:create err\", err);\r\n        return;\r\n      }\r\n      console.log('Session creation response:', result);\r\n      const data = result?.body?.data || result;\r\n      const sess = data?.session || data || null;\r\n      if (sess) {\r\n        setSession(sess);\r\n        if (data.welcomeMessage) handleIncomingMessage(data.welcomeMessage);\r\n        if (data.businessHours) setBusinessInfo(data.businessHours);\r\n      }\r\n    });\r\n  }, [socket, session, userFromAuth, guestInfo, handleIncomingMessage, isQuitting]);\r\n\r\n  const validateGuestForm = useCallback(() => {\r\n    const errors = {};\r\n\r\n    if (!guestInfo.firstName.trim()) {\r\n      errors.firstName = 'First name is required';\r\n    } else if (guestInfo.firstName.trim().length < 2) {\r\n      errors.firstName = 'First name must be at least 2 characters';\r\n    }\r\n\r\n    if (!guestInfo.email.trim()) {\r\n      errors.email = 'Email is required';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(guestInfo.email.trim())) {\r\n      errors.email = 'Please enter a valid email address';\r\n    }\r\n\r\n    if (guestInfo.phone && guestInfo.phone.trim()) {\r\n      const phoneRegex = /^[\\d\\s+\\-()\\.]+$/;\r\n      if (!phoneRegex.test(guestInfo.phone)) {\r\n        errors.phone = 'Please enter a valid phone number';\r\n      }\r\n    }\r\n\r\n    return errors;\r\n  }, [guestInfo]);\r\n\r\n  const handleGuestFormChange = useCallback((e) => {\r\n    if (isQuitting) return;\r\n    \r\n    const { name, value } = e.target;\r\n\r\n    setGuestInfo(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n\r\n    if (guestFormErrors[name]) {\r\n      setGuestFormErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[name];\r\n        return newErrors;\r\n      });\r\n    }\r\n\r\n    if (guestFormErrors.submit) {\r\n      setGuestFormErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors.submit;\r\n        return newErrors;\r\n      });\r\n    }\r\n  }, [guestFormErrors, isQuitting]);\r\n\r\n  const submitGuestForm = useCallback(async () => {\r\n    if (isQuitting) return;\r\n    \r\n    const errors = validateGuestForm();\r\n\r\n    if (Object.keys(errors).length > 0) {\r\n      setGuestFormErrors(errors);\r\n      return;\r\n    }\r\n\r\n    setIsSubmittingGuest(true);\r\n    setGuestFormErrors({});\r\n\r\n    try {\r\n      const response = await API.post('/api/v1/guestUsers/create-guest-user', {\r\n        firstName: guestInfo.firstName.trim(),\r\n        lastName: guestInfo.lastName.trim(),\r\n        email: guestInfo.email.trim(),\r\n        phone: guestInfo.phone.trim()\r\n      });\r\n\r\n      if (response.data.success) {\r\n        const { firstName, lastName, email, phone } = response.data.data;\r\n\r\n        setGuestInfo({ firstName, lastName, email, phone });\r\n        setGuestFormSubmitted(true);\r\n        setShowGuestForm(false);\r\n        setGuestFormErrors({});\r\n\r\n        try {\r\n          localStorage.setItem(STORAGE_USER_KEY, JSON.stringify({\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            phone\r\n          }));\r\n        } catch (error) {\r\n          console.warn(\"Failed to save guest info to localStorage:\", error);\r\n        }\r\n\r\n        console.log('Guest form submitted, creating session...');\r\n        if (socket && socket.connected && !session && !isQuitting) {\r\n          await createSession();\r\n        }\r\n\r\n        // Retain the user's last message (if any) and re-add the welcome message\r\n        const lastUserMessage = messages.find(msg => msg.from === 'user');\r\n        setMessages(lastUserMessage ? [lastUserMessage] : []);\r\n\r\n        // Trigger the welcome message with quick replies\r\n        const biz = await fetchBusinessHours();\r\n        setBusinessInfo(biz);\r\n\r\n        const welcomeMessage = {\r\n          id: `welcome-${Date.now()}`,\r\n          from: \"bot\",\r\n          text: biz && !biz.isOpen && biz.outsideHoursMessage\r\n            ? biz.outsideHoursMessage\r\n            : \"How can I be of service to you?\",\r\n          timestamp: Date.now(),\r\n          avatar: FavIconLogo,\r\n          quickReplies: biz && !biz.isOpen && biz.outsideHoursOptions\r\n            ? biz.outsideHoursOptions\r\n            : [\r\n                { text: \"What is your service?\", value: \"service_info\" },\r\n                { text: \"Why should I choose you?\", value: \"why_choose_us\" },\r\n                { text: \"How do I get started?\", value: \"getting_started\" },\r\n                { text: \"Search Jobs\", value: \"search_job\" },\r\n                { text: \"Partnership Info\", value: \"partner_pspl\" },\r\n                { text: \"Application Help\", value: \"application_issue\" },\r\n                { text: \"Talk to Agent\", value: \"live_agent\" },\r\n              ],\r\n        };\r\n\r\n        setMessages(prev => [...prev, welcomeMessage]);\r\n\r\n        // Resend the last user message to the server if it exists\r\n        if (lastUserMessage && socket && socket.connected && session && !isQuitting) {\r\n          console.log('Sending guest user message to server after form submission...');\r\n          socket.emit(\"message:send\", {\r\n            sessionId: session?._id || session?.id,\r\n            message: lastUserMessage.text,\r\n            messageType: \"text\",\r\n          });\r\n        }\r\n\r\n        logWithIcon.success('Guest user created and session initialized');\r\n      } else {\r\n        throw new Error(response.data.message || 'Failed to create guest user');\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error saving guest user:\", error);\r\n      setGuestFormErrors({\r\n        submit: error.response?.data?.message ||\r\n          error.message ||\r\n          'Failed to save guest information. Please try again.'\r\n      });\r\n    } finally {\r\n      setIsSubmittingGuest(false);\r\n    }\r\n  }, [guestInfo, validateGuestForm, socket, session, messages, createSession, isQuitting]);\r\n\r\n  const sendMessage = useCallback(() => {\r\n  if (!input.trim() || isQuitting) return;\r\n\r\n  const text = input.trim();\r\n  const messageId = `local_${Date.now()}_${Math.random()}`;\r\n\r\n  // Enhanced live agent request detection\r\n  const isLiveAgentRequest = \r\n    text.toLowerCase().includes('talk to agent') ||\r\n    text.toLowerCase().includes('live agent') ||\r\n    text.toLowerCase().includes('speak to someone') ||\r\n    text.toLowerCase().includes('human support') ||\r\n    text.toLowerCase().includes('connect me to agent') ||\r\n    text.toLowerCase().includes('real person') ||\r\n    /\\b(agent|human|person|representative|support staff)\\b/i.test(text);\r\n\r\n  setPendingMessages(prev => new Set([...prev, messageId]));\r\n\r\n  setInput(\"\");\r\n  try {\r\n    localStorage.removeItem(STORAGE_INPUT_KEY);\r\n  } catch (error) {\r\n    console.warn(\"Failed to clear input from localStorage:\", error);\r\n  }\r\n\r\n  const userMessage = {\r\n    id: messageId,\r\n    from: \"user\",\r\n    text,\r\n    timestamp: Date.now(),\r\n    avatar: userFromAuth\r\n      ? getProfileImageSrc(userFromAuth?.photo)\r\n      : defaultAvatar,\r\n    metadata: { isLiveAgentRequest }\r\n  };\r\n\r\n  setMessages(prev => [...prev, userMessage]);\r\n  setHasUserSentMessage(true);\r\n\r\n  if (!userFromAuth && !guestFormSubmitted) {\r\n    console.log('Guest user sent message requesting agent, triggering form...');\r\n    setShowGuestForm(true);\r\n    return;\r\n  }\r\n\r\n  if (socket && socket.connected && session) {\r\n    socket.emit(\"message:send\", {\r\n      sessionId: session?._id || session?.id,\r\n      message: text,\r\n      messageType: isLiveAgentRequest ? \"live_agent_request\" : \"text\",\r\n      metadata: {\r\n        isLiveAgentRequest, // Critical flag for backend processing\r\n        requestType: isLiveAgentRequest ? 'agent_connection' : 'standard_message',\r\n        timestamp: Date.now()\r\n      }\r\n    });\r\n\r\n    // Show connecting message for live agent requests\r\n    if (isLiveAgentRequest) {\r\n      setTimeout(() => {\r\n        const connectingMessage = {\r\n          id: `connecting_${Date.now()}`,\r\n          from: \"bot\",\r\n          text: \" I understand you'd like to speak with a live agent. Let me connect you with someone who can help...\",\r\n          timestamp: Date.now(),\r\n          avatar: FavIconLogo,\r\n          metadata: { requestType: 'agent_connection', isTemporary: true }\r\n        };\r\n        setMessages(prev => [...prev, connectingMessage]);\r\n      }, 500);\r\n    }\r\n  } else {\r\n    setPendingMessages(prev => {\r\n      const newPending = new Set(prev);\r\n      newPending.delete(messageId);\r\n      return newPending;\r\n    });\r\n  }\r\n}, [input, session, socket, userFromAuth, guestFormSubmitted, isQuitting]);\r\n\r\n  const handleQuickReply = useCallback(\r\n  (option) => {\r\n    if (isQuitting) return;\r\n    \r\n    const value = option.value || option.text || option;\r\n    const text = option.text || value;\r\n    const messageId = `local_qr_${Date.now()}_${Math.random()}`;\r\n\r\n    // Special handling for job search - existing functionality\r\n    if (value === \"search_job\") {\r\n      navigate(\"/Search-Jobs\");\r\n      return;\r\n    }\r\n\r\n    // NEW: Enhanced live agent detection\r\n    const isLiveAgentRequest = \r\n      value === \"live_agent\" || \r\n      value === \"talk_to_agent\" ||\r\n      text.toLowerCase().includes('talk to agent') ||\r\n      text.toLowerCase().includes('live agent') ||\r\n      text.toLowerCase().includes('human support') ||\r\n      text.toLowerCase().includes('speak to someone');\r\n\r\n    setPendingMessages(prev => new Set([...prev, messageId]));\r\n\r\n    if (socket && socket.connected && session) {\r\n      // NEW: Include live agent flag in message metadata\r\n      socket.emit(\"message:send\", {\r\n        sessionId: session._id || session.id,\r\n        message: text,\r\n        messageType: isLiveAgentRequest ? \"live_agent_request\" : \"option_selection\",\r\n        metadata: {\r\n          isLiveAgentRequest, // Critical flag for backend processing\r\n          requestType: isLiveAgentRequest ? 'agent_connection' : 'standard_option',\r\n          userSelection: value,\r\n          timestamp: Date.now()\r\n        }\r\n      });\r\n\r\n      // NEW: Show visual feedback for live agent requests\r\n      if (isLiveAgentRequest) {\r\n        // Add a temporary system message to show we're processing the request\r\n        const tempMessage = {\r\n          id: `temp_agent_req_${Date.now()}`,\r\n          from: \"bot\",\r\n          text: \" Connecting you with a live agent. Please wait while we find an available representative...\",\r\n          timestamp: Date.now(),\r\n          avatar: FavIconLogo,\r\n          metadata: { isTemporary: true, requestType: 'agent_connection' }\r\n        };\r\n        setMessages(prev => [...prev, tempMessage]);\r\n      }\r\n    } else {\r\n      // Fallback for disconnected state\r\n      const userMessage = {\r\n        id: messageId,\r\n        from: \"user\",\r\n        text,\r\n        timestamp: Date.now(),\r\n        avatar: userFromAuth\r\n          ? getProfileImageSrc(userFromAuth?.photo)\r\n          : defaultAvatar,\r\n        metadata: { isLiveAgentRequest }\r\n      };\r\n      setMessages(prev => [...prev, userMessage]);\r\n      setHasUserSentMessage(true);\r\n\r\n      if (!userFromAuth && !guestFormSubmitted) {\r\n        console.log('Guest user requested agent, triggering form...');\r\n        setShowGuestForm(true);\r\n        return;\r\n      }\r\n    }\r\n\r\n    setPendingMessages(prev => {\r\n      const newPending = new Set(prev);\r\n      newPending.delete(messageId);\r\n      return newPending;\r\n    });\r\n  }, [session, socket, userFromAuth, guestFormSubmitted, navigate, isQuitting]);\r\n\r\n  const renderMessage = (m, index) => {\r\n    const isUser = m.from === \"user\";\r\n    return (\r\n      <div key={`${m.id}-${index}`} className={`chat-row ${isUser ? \"user\" : \"agent-or-bot\"}`}>\r\n        {!isUser && (\r\n          <img className=\"msg-avatar\" src={m.avatar} alt={m.from} />\r\n        )}\r\n        <div className=\"msg-body\">\r\n          <div className={`msg-text ${isUser ? \"user-bubble\" : \"\"}`}>\r\n            {m.text}\r\n          </div>\r\n          {m.quickReplies?.length > 0 && (\r\n            <div className=\"message-quick-replies\">\r\n              {m.quickReplies.map((qr, i) => (\r\n                <button\r\n                  key={`${m.id}-qr-${i}`}\r\n                  className=\"quick-reply-btn\"\r\n                  onClick={() => handleQuickReply(qr)}\r\n                >\r\n                  {qr.text || qr}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n          <div className=\"msg-meta\">\r\n            <span className=\"msg-time\">{timeAgo(m.timestamp)}</span>\r\n          </div>\r\n        </div>\r\n        {isUser && (\r\n          <img\r\n            className=\"msg-avatar\"\r\n            src={m.avatar}\r\n            alt=\"You\"\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const initializeChatSession = useCallback(async () => {\r\n    if (isQuitting) {\r\n      console.log('Skipping chat initialization - quitting in progress');\r\n      return;\r\n    }\r\n    \r\n    console.log('Initializing chat session...', {\r\n      hasSession: !!session,\r\n      hasSocket: !!socket,\r\n      isConnected: socket?.connected,\r\n      userFormSubmitted,\r\n      defaultMessagesLoaded\r\n    });\r\n\r\n    if (!session && socket && socket.connected) {\r\n      if (userFromAuth) {\r\n        console.log('Creating session for authenticated user...');\r\n        await createSession();\r\n      } else if (guestFormSubmitted) {\r\n        console.log('Creating session for guest user after form submission...');\r\n        await createSession();\r\n      }\r\n    }\r\n\r\n    if (messages.length === 0 && !defaultMessagesLoaded) {\r\n      setDefaultMessagesLoaded(true);\r\n\r\n      const biz = await fetchBusinessHours();\r\n      setBusinessInfo(biz);\r\n\r\n      const welcomeMessage = {\r\n        id: `welcome-${Date.now()}`,\r\n        from: \"bot\",\r\n        text: biz && !biz.isOpen && biz.outsideHoursMessage\r\n          ? biz.outsideHoursMessage\r\n          : \"How can I be of service to you?\",\r\n        timestamp: Date.now(),\r\n        avatar: FavIconLogo,\r\n        quickReplies: biz && !biz.isOpen && biz.outsideHoursOptions\r\n          ? biz.outsideHoursOptions\r\n          : [\r\n              { text: \"What is your service?\", value: \"service_info\" },\r\n              { text: \"Why should I choose you?\", value: \"why_choose_us\" },\r\n              { text: \"How do I get started?\", value: \"getting_started\" },\r\n              { text: \"Search Jobs\", value: \"search_job\" },\r\n              { text: \"Partnership Info\", value: \"partner_pspl\" },\r\n              { text: \"Application Help\", value: \"application_issue\" },\r\n              { text: \"Talk to Agent\", value: \"live_agent\" },\r\n            ],\r\n      };\r\n\r\n      setMessages([welcomeMessage]);\r\n    }\r\n  }, [session, socket, userFormSubmitted, defaultMessagesLoaded, messages.length, createSession, userFromAuth, guestFormSubmitted, isQuitting]);\r\n\r\n  const handleHeaderClick = () => {\r\n    if (!isQuitting) {\r\n      setIsOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleToggle = async () => {\r\n    if (isQuitting) {\r\n      console.log('Ignoring toggle - quit in progress');\r\n      return;\r\n    }\r\n    \r\n    const next = !isOpen;\r\n    setIsOpen(next);\r\n\r\n    if (next) {\r\n      setUnreadCount(0);\r\n      console.log('Debug - handleToggle:', {\r\n        userFromAuth: !!userFromAuth,\r\n        guestFormSubmitted,\r\n        userFormSubmitted,\r\n        hasUserSentMessage\r\n      });\r\n      await initializeChatSession();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!userFromAuth && !guestFormSubmitted && hasUserSentMessage && !showGuestForm && !isQuitting) {\r\n      console.log('Triggering guest form - conditions met');\r\n      setShowGuestForm(true);\r\n    }\r\n  }, [userFromAuth, guestFormSubmitted, hasUserSentMessage, showGuestForm, isQuitting]);\r\n\r\n  // Enhanced Quit Confirmation Modal Component\r\n  const QuitConfirmationModal = () => (\r\n    <div \r\n      className=\"chat-quit-overlay\" \r\n      onClick={() => !isQuitting && setShowQuitConfirm(false)}\r\n    >\r\n      <div \r\n        className=\"chat-quit-modal\" \r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Modal Header */}\r\n        <div className=\"chat-quit-modal-header\">\r\n          <div className=\"chat-quit-modal-icon\">\r\n            <i className=\"fas fa-sign-out-alt\"></i>\r\n          </div>\r\n          <h3 className=\"chat-quit-modal-title\">\r\n            End Chat Session?\r\n          </h3>\r\n          <p className=\"chat-quit-modal-subtitle\">\r\n            This will clear your conversation history and end the current session.\r\n          </p>\r\n        </div>\r\n        \r\n        {/* Modal Body */}\r\n        <div className=\"chat-quit-modal-body\">\r\n          <div className=\"chat-quit-warning\">\r\n            <i className=\"fas fa-info-circle\"></i>\r\n            <span>You can always start a new conversation by clicking the chat button again.</span>\r\n          </div>\r\n          \r\n          {/* Action Buttons */}\r\n          <div className=\"chat-quit-modal-actions\">\r\n            <button\r\n              onClick={() => !isQuitting && setShowQuitConfirm(false)}\r\n              disabled={isQuitting}\r\n              className={`chat-quit-btn-cancel ${isQuitting ? 'disabled' : ''}`}\r\n            >\r\n              <i className=\"fas fa-arrow-left\"></i>\r\n              <span>Continue Chat</span>\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => !isQuitting && handleQuit()}\r\n              disabled={isQuitting}\r\n              className={`chat-quit-btn-confirm ${isQuitting ? 'loading' : ''}`}\r\n            >\r\n              {isQuitting ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i>\r\n                  <span>Ending...</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <i className=\"fas fa-sign-out-alt\"></i>\r\n                  <span>End Session</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const inputEnabled = !isQuitting;\r\n  \r\n  return (\r\n    <div className=\"chatbot-wrapper\">\r\n      <button\r\n        className={`chatbot-toggle ${isOpen ? \"open\" : \"\"}`}\r\n        onClick={handleToggle}\r\n        disabled={isQuitting}\r\n      >\r\n        <div className=\"chat-toggle-inner\">\r\n          {!isOpen && <i className=\"fas fa-comment-dots fa-1x\"></i>}\r\n        </div>\r\n        {unreadCount > 0 && <div className=\"unread-badge\">{unreadCount}</div>}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"chatbot-box\">\r\n          <div className=\"chatbot-header\" onClick={handleHeaderClick}>\r\n            <div className=\"chat-header-left\">\r\n              <button\r\n                className=\"chat-close-btn\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  if (!isQuitting) {\r\n                    setIsOpen(false);\r\n                  }\r\n                }}\r\n                disabled={isQuitting}\r\n              >\r\n                <i className=\"fas fa-chevron-down\"></i>\r\n              </button>\r\n              <div className=\"chat-avatar\">\r\n                <Link to=\"/\" onClick={(e) => e.stopPropagation()}>\r\n                  <img src={FavIconLogo} alt=\"ProsoftSynergies\" />\r\n                </Link>\r\n              </div>\r\n              <div>\r\n                <div className=\"chat-title\">\r\n                  {userFromAuth\r\n                    ? `Chat Assistant - ${userFromAuth.firstname || 'User'}`\r\n                    : userFormSubmitted\r\n                      ? `Chat Assistant - ${guestInfo.firstName}`\r\n                      : 'Chat Assistant'\r\n                  }\r\n                </div>\r\n                <div className=\"chat-sub\">\r\n                  {isQuitting \r\n                    ? \"Ending session...\"\r\n                    : businessInfo\r\n                      ? businessInfo.isOpen\r\n                        ? \"We're online now\"\r\n                        : \"Outside business hours\"\r\n                      : isConnected\r\n                        ? \"Connected\"\r\n                        : \"Connecting...\"\r\n                  }\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Enhanced Chat Header Right Section */}\r\n            <div className=\"chat-header-right\" onClick={(e) => e.stopPropagation()}>\r\n              {hasUserSentMessage && (\r\n                <button\r\n                  className={`chat-quit-btn ${isQuitting ? 'disabled' : ''}`}\r\n                  aria-label=\"End chat session\"\r\n                  onClick={() => !isQuitting && setShowQuitConfirm(true)}\r\n                  title=\"End Chat Session\"\r\n                  disabled={isQuitting}\r\n                >\r\n                  <i className={`fas ${isQuitting ? 'fa-spinner fa-spin' : 'fa-sign-out-alt'}`}></i>\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"chatbot-messages\">\r\n            {messages.map(renderMessage)}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          {/* Enhanced Quit Confirmation Modal */}\r\n          {showQuitConfirm && <QuitConfirmationModal />}\r\n\r\n          <div className=\"chatbot-input\">\r\n            <input\r\n              value={input}\r\n              onChange={(e) => !isQuitting && setInput(e.target.value)}\r\n              placeholder={isQuitting ? \"Ending session...\" : \"Type a message...\"}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter' && !isQuitting) {\r\n                  sendMessage();\r\n                }\r\n              }}\r\n              disabled={!inputEnabled}\r\n            />\r\n            <button\r\n              onClick={sendMessage}\r\n              className={`send-btn ${!inputEnabled ? \"disabled\" : \"\"}`}\r\n              disabled={!inputEnabled}\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showGuestForm && !isQuitting && (\r\n        <div\r\n          className={`chat-modal-overlay ${isSubmittingGuest ? 'submitting' : ''}`}\r\n          onClick={handleModalOverlayClick}\r\n        >\r\n          <div\r\n            className=\"chat-modal-container\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"chat-modal-header\">\r\n              <button\r\n                onClick={cancelGuestForm}\r\n                disabled={isSubmittingGuest}\r\n                className={`chat-modal-close ${isSubmittingGuest ? 'disabled' : ''}`}\r\n              >\r\n                <i className=\"fas fa-times\"></i>\r\n              </button>\r\n\r\n              <div className=\"chat-modal-header-content\">\r\n                <div className=\"chat-modal-icon\">\r\n                  <i className=\"fas fa-user-plus\"></i>\r\n                </div>\r\n                <h2 className=\"chat-modal-title\">\r\n                  Let's get started!\r\n                </h2>\r\n                <p className=\"chat-modal-subtitle\">\r\n                  Help us provide you with personalized assistance by sharing a few details.\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"chat-modal-body\">\r\n              {guestFormErrors.submit && (\r\n                <div className=\"chat-submit-error\">\r\n                  <i className=\"fas fa-exclamation-triangle\"></i>\r\n                  <div>\r\n                    <strong>Unable to proceed:</strong> {guestFormErrors.submit}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"chat-form-group\">\r\n                <label className=\"chat-form-label\">\r\n                  First Name <span className=\"chat-required\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"firstName\"\r\n                  value={guestInfo.firstName}\r\n                  onChange={handleGuestFormChange}\r\n                  disabled={isSubmittingGuest}\r\n                  className={`chat-form-input ${guestFormErrors.firstName ? 'error' :\r\n                    guestInfo.firstName.trim() ? 'success' : ''\r\n                  } ${isSubmittingGuest ? 'disabled' : ''}`}\r\n                  placeholder=\"Enter your first name\"\r\n                  autoComplete=\"given-name\"\r\n                  required\r\n                />\r\n                {guestFormErrors.firstName && (\r\n                  <div className=\"chat-error-message\">\r\n                    <i className=\"fas fa-exclamation-circle\"></i>\r\n                    {guestFormErrors.firstName}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"chat-form-group\">\r\n                <label className=\"chat-form-label\">\r\n                  Last Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"lastName\"\r\n                  value={guestInfo.lastName}\r\n                  onChange={handleGuestFormChange}\r\n                  disabled={isSubmittingGuest}\r\n                  className={`chat-form-input ${guestInfo.lastName.trim() ? 'success' : ''\r\n                  } ${isSubmittingGuest ? 'disabled' : ''}`}\r\n                  placeholder=\"Enter your last name\"\r\n                  autoComplete=\"family-name\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"chat-form-group\">\r\n                <label className=\"chat-form-label\">\r\n                  Email Address <span className=\"chat-required\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  value={guestInfo.email}\r\n                  onChange={handleGuestFormChange}\r\n                  disabled={isSubmittingGuest}\r\n                  className={`chat-form-input ${guestFormErrors.email ? 'error' :\r\n                    guestInfo.email.trim() && /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(guestInfo.email) ? 'success' : ''\r\n                  } ${isSubmittingGuest ? 'disabled' : ''}`}\r\n                  placeholder=\"your.email@example.com\"\r\n                  autoComplete=\"email\"\r\n                  required\r\n                />\r\n                {guestFormErrors.email && (\r\n                  <div className=\"chat-error-message\">\r\n                    <i className=\"fas fa-exclamation-circle\"></i>\r\n                    {guestFormErrors.email}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"chat-form-group\">\r\n                <label className=\"chat-form-label\">\r\n                  Phone Number\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  name=\"phone\"\r\n                  value={guestInfo.phone}\r\n                  onChange={handleGuestFormChange}\r\n                  disabled={isSubmittingGuest}\r\n                  className={`chat-form-input ${guestFormErrors.phone ? 'error' :\r\n                    guestInfo.phone.trim() ? 'success' : ''\r\n                  } ${isSubmittingGuest ? 'disabled' : ''}`}\r\n                  placeholder=\"+1 (555) 123-4567\"\r\n                  autoComplete=\"tel\"\r\n                />\r\n                {guestFormErrors.phone && (\r\n                  <div className=\"chat-error-message\">\r\n                    <i className=\"fas fa-exclamation-circle\"></i>\r\n                    {guestFormErrors.phone}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"chat-modal-actions\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={cancelGuestForm}\r\n                disabled={isSubmittingGuest}\r\n                className={`chat-btn-secondary ${isSubmittingGuest ? 'disabled' : ''}`}\r\n              >\r\n                <i className=\"fas fa-times\"></i>\r\n                <span>Cancel</span>\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={submitGuestForm}\r\n                disabled={isSubmittingGuest}\r\n                className={`chat-btn-primary ${isSubmittingGuest ? 'loading' : ''}`}\r\n              >\r\n                {isSubmittingGuest ? (\r\n                  <>\r\n                    <i className=\"fas fa-spinner fa-spin\"></i>\r\n                    <span>Submitting...</span>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <i className=\"fas fa-arrow-right\"></i>\r\n                    <span>Continue Chat</span>\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBotIcon;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation, useParams } from 'react-router-dom';\r\nimport API from \"../helpers/API\";\r\nimport { useAuth } from \"../Context/AuthContext\";\r\nimport { LogoutNavbarLink } from './Logout/LogoutNavbar';\r\nimport { LogoutLink } from './Logout/Logout';\r\nimport ChatBotIcon from '../components/ChatBotIcon/ChatBotIcon';\r\nimport { FaLinkedin, FaFacebook, FaWhatsapp } from 'react-icons/fa';\r\nimport { BsTwitterX } from \"react-icons/bs\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport './Footer.css';\r\n\r\nconst Footer = () => {\r\n    const currentDay = new Date();\r\n    const currentYear = currentDay.getFullYear();\r\n\r\n    // ***************************************\r\n    const [auth, setAuth] = useAuth();\r\n    const [user, setUser] = useState({});\r\n    const params = useParams();\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const notifyErr = (msg) =>\r\n      toast.error(msg, {\r\n        position: \"top-center\",\r\n        autoClose: 20000,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        theme: \"light\"\r\n      });\r\n    const notifySucc = (msg) =>\r\n      toast.success(msg, {\r\n        position: \"top-center\",\r\n        autoClose: 20000,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        theme: \"light\"\r\n      });\r\n\r\n    const fetchRegUserById = async () => {\r\n      try {\r\n        const { data } = await API.get(`/users/fetchRegUserById/${params._id}`);\r\n        setUser(data.user);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    // initial Registered User Details\r\n    useEffect(() => {\r\n      if (params?._id) fetchRegUserById();\r\n    }, [params?._id]);\r\n\r\n    const handleLogout = () => {\r\n      setAuth({ ...auth, user: null, token: \"\" });\r\n      localStorage.removeItem(\"userAuthDetails\");\r\n      notifySucc(\"You have Logged Out Successfully!!!\");\r\n      navigate(location.state || \"/Login\");\r\n    };\r\n\r\n    //assigning location variable\r\n    const location = useLocation();\r\n  return (\r\n    <>\r\n    <footer className=\"footer\">\r\n      <div className=\"footer-container\">\r\n        <div className=\"footer-columns\">\r\n          <div className=\"footer-column\">\r\n            <h3>INDUSTRIES & RECRUITMENT SOLUTIONS</h3>\r\n            <ul>\r\n              <li><Link to=\"/Information-Technology-Recruitment\">Information Technology Recruitment</Link></li>\r\n              <li><Link to=\"/Government-Ministry-Recruitment\">Government Ministry Recruitment</Link></li>\r\n              <li><Link to=\"/Healthcare-&-Medical-Recruitment\">Healthcare & Medical Recruitment</Link></li>\r\n              <li><Link to=\"/Manufacturing-Recruitment\">Manufacturing Recruitment</Link></li>\r\n              <li><Link to=\"/Admin-&-Office-Support-Recruitment\">Administration & Office Support Recruitment</Link></li>\r\n              <li><Link to=\"/Transport-&-Logistics-Recruitment\">Transport & Logistics Recruitment</Link></li>\r\n              <li><Link to=\"/Construction-&-Infrastructure-Recruitment\">Construction and Infrastructure Recruitment</Link></li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"footer-column\">\r\n            <h3>EDUCATION SOLUTIONS</h3>\r\n            <ul>\r\n              <li><Link to=\"/Education-Recruitment\">Education Recruitment</Link></li>\r\n              {/* <li><Link to=\"/#\">Register</Link></li> */}\r\n              {/* ******************************************* */}\r\n              {!auth.user ? (\r\n              <>\r\n                <li><Link to=\"/Register\">Register</Link></li>\r\n              </>\r\n              ) : (\r\n              <>\r\n                {auth.user?.role === 1 ? (\r\n                  <>\r\n                  <li>\r\n                    <Link to=\"/Admin/Dashboard\" onClick={() => {window.location.href = \"/Admin/Dashboard\";}}>\r\n                      Admin Dashboard\r\n                    </Link>\r\n                  </li>                  \r\n                  </>\r\n                  ) : (\r\n                  <>\r\n                  {auth.user?.role === 2 ? (\r\n                      <>\r\n                        <li>\r\n                          <Link to=\"/Employer/Employer-Dashboard\" onClick={() => {window.location.href = \"/Employer/Employer-Dashboard\";}}>\r\n                            Employer Dashboard\r\n                          </Link>\r\n                        </li>  \r\n                      </>\r\n                      ) : (\r\n                      <>\r\n                        <li>\r\n                          <Link to=\"/Applicant-Profile-Dashboard\" onClick={() => {window.location.href = \"/Applicant-Profile-Dashboard\";}}>\r\n                            Applicant Dashboard\r\n                          </Link>\r\n                        </li>  \r\n                      </>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </>\r\n              )}  \r\n              {/* ******************************************* */}\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"footer-column\">\r\n            <h3>FOR JOB SEEKERS</h3>\r\n            <ul>\r\n              <li><Link to=\"/Search-Jobs\">Search Jobs</Link></li>\r\n              {/* <li><Link to=\"/#\">Resume Upload</Link></li> */}\r\n              <li>\r\n                  {!auth.user ? (\r\n                    <>\r\n                      <Link to=\"/Login\">Resume Upload</Link> \r\n                    </>\r\n                    ) : (\r\n                    <>\r\n                      {(() => {\r\n                        const userRole = auth.user?.role;\r\n                        let linkPath = \"/PSPL-Access-Denied\";\r\n\r\n                        if (userRole === 0) {\r\n                          linkPath = `/Applicant-Resume-Upload/${auth?.user?.userId}`;\r\n                        } else if (userRole === 1) {\r\n                          linkPath = \"/PSPL-Access-Denied\";\r\n                        } else if (userRole === 2) {\r\n                          linkPath = \"/PSPL-Access-Denied\";\r\n                        }\r\n                        return (\r\n                          <Link to={linkPath}>Resume Upload</Link> \r\n                        );\r\n                      })()}\r\n                    </>\r\n                    )}\r\n                </li>\r\n              {/* <li><Link to=\"/#\">Login</Link></li> */}\r\n              {/* ******************************************* */}\r\n              {!auth.user ? (\r\n              <>\r\n                <li><Link to=\"/#\">Login</Link></li>\r\n              </>\r\n              ) : (\r\n              <>\r\n                {auth.user?.role === 1 ? (\r\n                  <>\r\n                  <li>\r\n                    <LogoutLink onClick={() => {window.location.href = \"/Login\";}}>\r\n                      Logout\r\n                    </LogoutLink>\r\n                  </li>                  \r\n                  </>\r\n                  ) : (\r\n                  <>\r\n                  {auth.user?.role === 2 ? (\r\n                      <>\r\n                        <li>\r\n                          <LogoutLink onClick={() => {window.location.href = \"/Login\";}}>\r\n                            Logout\r\n                          </LogoutLink>\r\n                        </li>  \r\n                      </>\r\n                      ) : (\r\n                      <>\r\n                        <li>\r\n                          <LogoutLink onClick={() => {window.location.href = \"/Login\";}}>\r\n                            Logout\r\n                          </LogoutLink>\r\n                        </li>  \r\n                      </>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </>\r\n              )}  \r\n              {/* ******************************************* */}\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"footer-column\">\r\n            <h3>HEALTH SOLUTIONS</h3>\r\n            <ul>\r\n              <li><Link to=\"/Behavioral-Health-Solutions\">Behavioral Health</Link></li>\r\n              <li><Link to=\"/Health-Billing-&-Collections-Solutions\">Heath & Billing Collections</Link></li>\r\n              <li><Link to=\"#\">HealthCare Mergers & Acquisitions</Link></li>\r\n              <li>\r\n                <Link to=\"/Behavioral-Health-Credentialing-&-Contracting\">Behavioral Health Credentialing & Contracting</Link>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"footer-column\">\r\n            <h3>ABOUT US</h3>\r\n            <ul>\r\n              <li><Link to=\"/About-Us\">About Us</Link></li>\r\n              <li><Link to=\"/Who-We-Are\">Who We're </Link></li>\r\n              <li><Link to=\"/Our-Locations\">Locations</Link></li>\r\n              <li><Link to=\"/ThinkBeyond-Privacy-Policy\">Privacy Policy</Link></li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"footer-bottom\">\r\n          <div className=\"social-section\">\r\n            <p>Follow Us</p>\r\n            <div className=\"social-icons\">\r\n              <Link to=\"https://www.instagram.com/the_thinkbeyond_solutions/\" aria-label=\"LinkedIn\" target='_blank'><FaLinkedin /></Link>\r\n              <Link to=\"https://www.facebook.com/thethinkbeyondsolutions\" aria-label=\"Facebook\" target='_blank'><FaFacebook /></Link>\r\n              <Link to=\"https://x.com/thethinkbeyond8\" aria-label=\"X-Twitter\" target='_blank'><BsTwitterX /></Link>\r\n              <Link to=\"https://wa.me/4169008153\" aria-label=\"X-WhatsApp\" target='_blank'><FaWhatsapp /></Link>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bottom-links\">\r\n            <Link to=\"/ProsoftSynergies-Privacy-Policy\">Privacy Policy</Link>\r\n            <span className=\"divider\">|</span>\r\n            <a href=\"#\">Accessibility</a>\r\n          </div>\r\n          <div>\r\n            <p className=\"bottom-links pt-5\"> Copyright  {currentYear} <Link to=\"/\" className='ms-2 me-3'>ProsoftSynergies.</Link> All Right Reserved{\" \"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n       <ChatBotIcon />\r\n    </footer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation, useParams } from 'react-router-dom';\r\nimport API from \"../helpers/API\";\r\nimport { useAuth } from \"../Context/AuthContext\";\r\nimport { LogoutNavbarLink } from './Logout/LogoutNavbar';\r\n\r\nimport './assets/vendors/mdi/css/materialdesignicons.min.css';\r\nimport './assets/vendors/font-awesome/css/font-awesome.min.css';\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport './Header.css';\r\nimport Logo from './PSPL-Logo.png';\r\n\r\n// Role constants\r\nconst ROLE_JOBSEEKER = 0;\r\nconst ROLE_ADMIN = 1;\r\nconst ROLE_EMPLOYER = 2;\r\nconst ROLE_SUPERADMIN = 3;\r\n\r\nconst TestHomeHeader = () => {\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [activeDropdown, setActiveDropdown] = useState(null);\r\n  const [isSticky, setIsSticky] = useState(false);\r\n\r\n  const [auth] = useAuth();\r\n  const [user, setUser] = useState({});\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      setIsSticky(window.scrollY > 40);\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  const toggleMobileMenu = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n    setActiveDropdown(null);\r\n  };\r\n\r\n  const toggleDropdown = (index, e) => {\r\n    if (window.innerWidth <= 768) {\r\n      e.preventDefault();\r\n      setActiveDropdown(activeDropdown === index ? null : index);\r\n    }\r\n  };\r\n\r\n  const handleLinkClick = () => {\r\n    if (window.innerWidth <= 768 && mobileMenuOpen) {\r\n      setMobileMenuOpen(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (\r\n        !e.target.closest('.nav-links') &&\r\n        !e.target.closest('.menu-toggle') &&\r\n        !e.target.closest('.cta-buttons') &&\r\n        window.innerWidth > 768\r\n      ) {\r\n        setActiveDropdown(null);\r\n      }\r\n    };\r\n\r\n    const handleResize = () => {\r\n      if (window.innerWidth > 768) {\r\n        setMobileMenuOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('click', handleClickOutside);\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside);\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, []);\r\n\r\n  const notifyErr = (msg) =>\r\n    toast.error(msg, {\r\n      position: \"top-center\",\r\n      autoClose: 20000,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      theme: \"light\",\r\n    });\r\n\r\n  const notifySucc = (msg) =>\r\n    toast.success(msg, {\r\n      position: \"top-center\",\r\n      autoClose: 20000,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      theme: \"light\",\r\n    });\r\n\r\n  const fetchRegUserById = async () => {\r\n    try {\r\n      const { data } = await API.get(`/users/fetchRegUserById/${params._id}`);\r\n      setUser(data.user || {}); // Fixed: Ensure user is always an object\r\n    } catch (error) {\r\n      console.log(error);\r\n      setUser({}); // Fixed: Set empty object on error\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (params?._id) fetchRegUserById();\r\n  }, [params?._id]);\r\n\r\n  // Helper function to safely check photo path\r\n  const getProfileImageSrc = (userPhoto) => {\r\n    if (!userPhoto) return ''; // Return empty string if no photo\r\n    \r\n    // Safely check if photo starts with specific path\r\n    const isUploadPath = typeof userPhoto === 'string' && userPhoto.startsWith('/uploads/userAvatars/');\r\n    return isUploadPath ? process.env.REACT_APP_API_URL + userPhoto : userPhoto;\r\n  };\r\n\r\n  // Helper function to safely get user name\r\n  const getUserDisplayName = (userObj) => {\r\n    const firstName = userObj?.firstname || userObj?.first_name || '';\r\n    const lastName = userObj?.lastname || userObj?.last_name || '';\r\n    return `${firstName} ${lastName}`.trim();\r\n  };\r\n\r\n  // Admin menu items\r\n  const renderAdminMenuItems = () => (\r\n    <>\r\n      <li>\r\n        <Link to=\"/Admin/Dashboard\" onClick={() => { window.location.href = \"/Admin/Dashboard\"; }}>\r\n          <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Admin/Manage-Jobs\" onClick={() => { window.location.href = \"/Admin/Manage-Jobs\"; }}>\r\n          <i className=\"mdi mdi-briefcase me-2 text-success menu-icon\"></i>Manage Jobs\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Admin/Manage-Sectors\" onClick={() => { window.location.href = \"/Admin/Manage-Sectors\"; }}>\r\n          <i className=\"mdi mdi-format-list-bulleted-type me-2 text-success menu-icon\"></i>Job Sectors\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Admin/Manage-Qualifications\" onClick={() => { window.location.href = \"/Admin/Manage-Qualifications\"; }}>\r\n          <i className=\"mdi mdi-school menu-icon me-2 text-success\"></i> Job Qualifications\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Admin/Manage-Work-Experiences\" onClick={() => { window.location.href = \"/Admin/Manage-Work-Experiences\"; }}>\r\n          <i className=\"mdi mdi-checkbox-multiple-marked menu-icon me-2 text-success\"></i> Job Experiences\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Admin/Manage-Work-Modes\" onClick={() => { window.location.href = \"/Admin/Manage-Work-Modes\"; }}>\r\n          <i className=\"mdi mdi-account-convert me-2 text-success\"></i> Work Modes\r\n        </Link>\r\n      </li>\r\n    </>\r\n  );\r\n\r\n  // Super Admin Menu Items\r\n  const renderSuperAdminMenuItems = () => (\r\n    <>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Dashboard\" onClick={() => { window.location.href = \"/Super-Admin/Dashboard\"; }}>\r\n          <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Manage-Jobs\" onClick={() => { window.location.href = \"/Super-Admin/Manage-Jobs\"; }}>\r\n          <i className=\"mdi mdi-briefcase me-2 text-success menu-icon\"></i>Manage Jobs\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Manage-Sectors\" onClick={() => { window.location.href = \"/Super-Admin/Manage-Sectors\"; }}>\r\n          <i className=\"mdi mdi-format-list-bulleted-type me-2 text-success menu-icon\"></i>Job Sectors\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Manage-Qualifications\" onClick={() => { window.location.href = \"/Super-Admin/Manage-Qualifications\"; }}>\r\n          <i className=\"mdi mdi-school menu-icon me-2 text-success\"></i> Job Qualifications\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Manage-Work-Experiences\" onClick={() => { window.location.href = \"/Super-Admin/Manage-Work-Experiences\"; }}>\r\n          <i className=\"mdi mdi-checkbox-multiple-marked menu-icon me-2 text-success\"></i> Job Experiences\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/Super-Admin/Manage-Work-Modes\" onClick={() => { window.location.href = \"/Super-Admin/Manage-Work-Modes\"; }}>\r\n          <i className=\"mdi mdi-account-convert me-2 text-success\"></i> Work Modes\r\n        </Link>\r\n      </li>\r\n    </>\r\n  );\r\n\r\n  const renderLogoutItem = () => (\r\n    <li>\r\n      <LogoutNavbarLink onClick={() => { window.location.href = \"/Login\"; }}>\r\n        <i className=\"mdi mdi-logout me-2 text-success\"></i>\r\n        Logout\r\n      </LogoutNavbarLink>\r\n    </li>\r\n  );\r\n\r\n  return (\r\n    <header className={isSticky ? 'sticky' : ''}>\r\n      <div className=\"top-bar\">\r\n        <Link to=\"mailto:hrpspl@prosoftsynergies.com\" target=\"_blank\" className=\"login-btn info-link\">\r\n          <span className=\"contact-text\" style={{ color: \"#03294f\" }}>Email Us</span>\r\n          <i className='fas fa-envelope ms-1 fa-2x' style={{ color: \"#03294f\" }}></i>\r\n        </Link>\r\n        <Link to=\"https://wa.me/+15129617007\" className=\"login-btn phone-link\" target=\"_blank\">\r\n          <span className=\"contact-text\" style={{ color: \"#03294f\" }}>Let's Connect On WhatsApp</span>\r\n          <i className='fab fa-whatsapp ms-1 fa-2x' style={{ color: \"#03294f\" }}></i>\r\n        </Link>\r\n      </div>\r\n      <nav className={`main-nav ${isSticky ? 'sticky' : ''}`}>\r\n        <div className=\"PSPL-Logo logo\">\r\n          <Link to=\"/\"><img src={Logo} alt='ProsoftSynergies' /></Link>\r\n        </div>\r\n\r\n        <div\r\n          className={`menu-toggle ${mobileMenuOpen ? 'active' : ''}`}\r\n          onClick={toggleMobileMenu}\r\n          aria-label=\"Toggle navigation menu\"\r\n        >\r\n          <span></span>\r\n          <span></span>\r\n          <span></span>\r\n        </div>\r\n\r\n        <ul className={`nav-links ${mobileMenuOpen ? 'active' : ''}`}>\r\n          <li className={activeDropdown === 0 ? 'active' : ''}>\r\n            <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(0, e)}>\r\n              FOR BUSINESSES\r\n            </Link>\r\n            <div className=\"mega-menu wide\">\r\n              <div className=\"mega-menu-column\">\r\n                <h3>Industries & Recruitment Solutions</h3>\r\n                <ul>\r\n                  <li><Link to=\"/Information-Technology-Recruitment\" onClick={handleLinkClick}>Information Technology Recruitment</Link></li>\r\n                  <li><Link to=\"/Government-Ministry-Recruitment\" onClick={handleLinkClick}>Government Ministry Recruitment</Link></li>\r\n                  <li><Link to=\"/Healthcare-&-Medical-Recruitment\" onClick={handleLinkClick}>Healthcare & Medical Recruitment</Link></li>\r\n                  <li><Link to=\"/Manufacturing-Recruitment\" onClick={handleLinkClick}>Manufacturing Recruitment</Link></li>\r\n                  <li><Link to=\"/Admin-&-Office-Support-Recruitment\" onClick={handleLinkClick}>Administration & Office Support Recruitment</Link></li>\r\n                  <li><Link to=\"/Transport-&-Logistics-Recruitment\" onClick={handleLinkClick}>Transport & Logistics Recruitment</Link></li>\r\n                  <li><Link to=\"/Construction-&-Infrastructure-Recruitment\" onClick={handleLinkClick}>Construction and Infrastructure Recruitment</Link></li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"mega-menu-column\">\r\n                <h3>Education Recruitment & Solutions</h3>\r\n                <ul>\r\n                  <li><Link to=\"/Education-Recruitment\" onClick={handleLinkClick}>Education Recruitment</Link></li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"mega-menu-column\">\r\n                <h3>Health Solutions</h3>\r\n                <ul>\r\n                  <li><Link to=\"/Behavioral-Health-Solutions\" onClick={handleLinkClick}>Behavioral Health</Link></li>\r\n                  <li><Link to=\"/Health-Billing-&-Collections-Solutions\" onClick={handleLinkClick}>Health & Billing Collections</Link></li>\r\n                  <li><Link to=\"#\" onClick={handleLinkClick}>HealthCare Mergers & Acquisitions</Link></li>\r\n                  <li><Link to=\"#\" onClick={handleLinkClick}>Behavioral Health Credentialing & Contracting</Link></li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </li>\r\n          <li className={activeDropdown === 1 ? 'active' : ''}>\r\n            <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(1, e)}>\r\n              JOB SEEKERS\r\n            </Link>\r\n            <div className=\"mega-menu\">\r\n              <h3>Career Opportunities</h3>\r\n              <ul>\r\n                <li><Link to=\"/Search-Jobs\" onClick={handleLinkClick}>Search Jobs</Link></li>\r\n                <li>\r\n                  {!auth.user ? (\r\n                    <Link to=\"/Login\" onClick={handleLinkClick}>Resume Upload</Link>\r\n                  ) : (() => {\r\n                    let linkPath = \"/PSPL-Access-Denied\";\r\n                    if (auth.user?.role === ROLE_JOBSEEKER) {\r\n                      linkPath = `/Applicant-Resume-Upload/${auth?.user?.userId}`;\r\n                    } else if (\r\n                      auth.user?.role === ROLE_ADMIN ||\r\n                      auth.user?.role === ROLE_EMPLOYER ||\r\n                      auth.user?.role === ROLE_SUPERADMIN\r\n                    ) {\r\n                      linkPath = \"/PSPL-Access-Denied\";\r\n                    }\r\n                    return <Link to={linkPath} onClick={handleLinkClick}>Resume Upload</Link>;\r\n                  })()}\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </li>\r\n          <li className={activeDropdown === 2 ? 'active' : ''}>\r\n            <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(2, e)}>\r\n              EMPLOYERS\r\n            </Link>\r\n            <div className=\"mega-menu\">\r\n              <h3>ProsoftSynergies Solutions</h3>\r\n              <ul>\r\n                <li><Link to=\"/Permanent-Hiring-Solutions\" onClick={handleLinkClick}>Permanent Hiring Solutions</Link></li>\r\n                <li><Link to=\"/Tailored-Solutions-For-Employers\" onClick={handleLinkClick}>Tailored Solutions For Employers</Link></li>\r\n                <li><Link to=\"/Fluid-Workforce-Solutions\" onClick={handleLinkClick}>Fluid Workforce Solutions</Link></li>\r\n              </ul>\r\n            </div>\r\n          </li>\r\n          <li className={activeDropdown === 3 ? 'active' : ''}>\r\n            <Link to=\"/About-Us\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(3, e)}>\r\n              ABOUT US\r\n            </Link>\r\n            <div className=\"mega-menu\">\r\n              <h3>Our Company</h3>\r\n              <ul>\r\n                <li><Link to=\"/About-Us\" onClick={handleLinkClick}>About Us</Link></li>\r\n                <li><Link to=\"/Who-We-Are\" onClick={handleLinkClick}>Who We're</Link></li>\r\n                <li><Link to=\"/Our-Locations\" onClick={handleLinkClick}>Locations</Link></li>\r\n              </ul>\r\n            </div>\r\n          </li>\r\n          <li><Link to=\"/Contact-Us\" onClick={handleLinkClick}>CONTACT US</Link></li>\r\n\r\n          {/* Role-Based Mobile Menus */}\r\n          {auth.user && (\r\n            <>\r\n              {auth.user?.role === ROLE_ADMIN && (\r\n                <li className=\"mobile-more-menu\">\r\n                  <li className={activeDropdown === 4 ? 'active' : ''} style={{ marginBottom: \"100px\" }}>\r\n                    <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                      {getUserDisplayName(auth.user)}\r\n                      <i className='mdi mdi-account-check ms-3 text-primary' style={{ fontSize: \"25px\" }}></i>\r\n                    </Link>\r\n                    <div className=\"mega-menu\">\r\n                      <h3>Admin Quick Access</h3>\r\n                      <ul>\r\n                        {renderAdminMenuItems()}\r\n                        {renderLogoutItem()}\r\n                      </ul>\r\n                    </div>\r\n                  </li>\r\n                </li>\r\n              )}\r\n\r\n              {auth.user?.role === ROLE_SUPERADMIN && (\r\n                <li className=\"mobile-more-menu\">\r\n                  <li className={activeDropdown === 5 ? 'active' : ''} style={{ marginBottom: \"100px\" }}>\r\n                    <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(5, e)}>\r\n                      {getUserDisplayName(auth.user)}\r\n                      <i className='mdi mdi-account-check ms-3 text-primary' style={{ fontSize: \"25px\" }}></i>\r\n                    </Link>\r\n                    <div className=\"mega-menu\">\r\n                      <h3>Super Admin Quick Access</h3>\r\n                      <ul>\r\n                        {renderSuperAdminMenuItems()}\r\n                        {renderLogoutItem()}\r\n                      </ul>\r\n                    </div>\r\n                  </li>\r\n                </li>\r\n              )}\r\n\r\n              {auth.user?.role === ROLE_EMPLOYER && (\r\n                <li className=\"mobile-more-menu\">\r\n                  <li className={activeDropdown === 4 ? 'active' : ''} style={{ marginBottom: \"100px\" }}>\r\n                    <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                      <img\r\n                        className=\"profile-image me-2\"\r\n                        src={getProfileImageSrc(auth?.user?.photo || user?.photo)}\r\n                        alt={getUserDisplayName(auth.user)}\r\n                        aria-label=\"User profile photo\"\r\n                        role=\"button\"\r\n                        style={{ borderRadius: \"50%\", height: \"35px\", width: \"35px\" }}\r\n                      />\r\n                      {getUserDisplayName(auth.user)}\r\n                      <i className='mdi mdi-account-check ms-3 text-primary' style={{ fontSize: \"25px\" }}></i>\r\n                    </Link>\r\n                    <div className=\"mega-menu\">\r\n                      <h3>Employer Quick Access</h3>\r\n                      <ul>\r\n                        <li>\r\n                          <Link to=\"#\" onClick={handleLinkClick}>\r\n                            <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n                          </Link>\r\n                        </li>\r\n                        <li><Link to=\"#\" onClick={handleLinkClick}>Account</Link></li>\r\n                        {renderLogoutItem()}\r\n                      </ul>\r\n                    </div>\r\n                  </li>\r\n                </li>\r\n              )}\r\n\r\n              {(auth.user?.role !== ROLE_ADMIN && auth.user?.role !== ROLE_SUPERADMIN && auth.user?.role !== ROLE_EMPLOYER) && (\r\n                <li className=\"mobile-more-menu\">\r\n                  <li className={activeDropdown === 4 ? 'active' : ''} style={{ marginBottom: \"100px\" }}>\r\n                    <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                      <img\r\n                        className=\"profile-image me-2\"\r\n                        src={getProfileImageSrc(auth?.user?.photo || user?.photo)}\r\n                        alt={getUserDisplayName(auth.user)}\r\n                        aria-label=\"User profile photo\"\r\n                        role=\"button\"\r\n                        style={{ borderRadius: \"50%\", height: \"35px\", width: \"35px\" }}\r\n                      />\r\n                      {getUserDisplayName(auth.user)}\r\n                      <i className='mdi mdi-account-check ms-3 text-primary' style={{ fontSize: \"25px\" }}></i>\r\n                    </Link>\r\n                    <div className=\"mega-menu\">\r\n                      <h3>Job Seeker Quick Access</h3>\r\n                      <ul>\r\n                        <li>\r\n                          <Link to=\"/Applicant-Profile-Dashboard\" onClick={() => { window.location.href = \"/Applicant-Profile-Dashboard\"; }}>\r\n                            <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n                          </Link>\r\n                        </li>\r\n                        <li>\r\n                          <Link to={`/Applicant/Profile/${auth?.user?.userId}`} onClick={() => { window.location.href = `/Applicant/Profile/${auth?.user?.userId}`; }}>\r\n                            <i className=\"mdi mdi-account-key menu-icon me-2 text-success\"></i> Account\r\n                          </Link>\r\n                        </li>\r\n                        {renderLogoutItem()}\r\n                      </ul>\r\n                    </div>\r\n                  </li>\r\n                </li>\r\n              )}\r\n            </>\r\n          )}\r\n        </ul>\r\n\r\n        <div className=\"cta-buttons\">\r\n          {!auth.user ? (\r\n            <>\r\n              <Link to=\"/Login\" className=\"cta-btn hPostJob-btn\">Post Job</Link>\r\n              <Link to=\"/Login\" className=\"cta-btn hLogin-btn\">Login</Link>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {auth.user?.role === ROLE_ADMIN && (\r\n                <>\r\n                  <Link to=\"/Admin/Add-Job\" className=\"cta-btn hPostJob-btn\" onClick={() => { window.location.href = \"/Admin/Add-Job\"; }}>Post Job</Link>\r\n                  <div className=\"cta-dropdown\">\r\n                    <li className={activeDropdown === 4 ? 'active' : ''}>\r\n                      <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                        <i className='mdi mdi-account-check me-2 text-primary' style={{ fontSize: \"30px\" }}></i>\r\n                        {getUserDisplayName(auth.user)}\r\n                      </Link>\r\n                      <div className=\"mega-menu\">\r\n                        <h3>Admin Quick Access</h3>\r\n                        <ul>\r\n                          {renderAdminMenuItems()}\r\n                          {renderLogoutItem()}\r\n                        </ul>\r\n                      </div>\r\n                    </li>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {auth.user?.role === ROLE_SUPERADMIN && (\r\n                <>\r\n                  <Link to=\"/Super-Admin/Add-Job\" className=\"cta-btn hPostJob-btn\" onClick={() => { window.location.href = \"/Super-Admin/Add-Job\"; }}>Post Job</Link>\r\n                  <div className=\"cta-dropdown\">\r\n                    <li className={activeDropdown === 4 ? 'active' : ''}>\r\n                      <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                        <i className='mdi mdi-account-check me-2 text-primary' style={{ fontSize: \"30px\" }}></i>\r\n                        {getUserDisplayName(auth.user)}\r\n                      </Link>\r\n                      <div className=\"mega-menu\">\r\n                        <h3>Super Admin Quick Access</h3>\r\n                        <ul>\r\n                          {renderSuperAdminMenuItems()}\r\n                          {renderLogoutItem()}\r\n                        </ul>\r\n                      </div>\r\n                    </li>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {auth.user?.role === ROLE_EMPLOYER && (\r\n                <>\r\n                  <Link to=\"#\" className=\"cta-btn hPostJob-btn\">Post Job</Link>\r\n                  <div className=\"cta-dropdown\">\r\n                    <li className={activeDropdown === 4 ? 'active' : ''}>\r\n                      <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                        <img\r\n                          className=\"profile-image me-2\"\r\n                          src={getProfileImageSrc(auth?.user?.photo || user?.photo)}\r\n                          alt={getUserDisplayName(auth.user)}\r\n                          aria-label=\"User profile photo\"\r\n                          role=\"button\"\r\n                          style={{ borderRadius: \"50%\", height: \"35px\", width: \"35px\" }}\r\n                        />\r\n                        {getUserDisplayName(auth.user)}\r\n                      </Link>\r\n                      <div className=\"mega-menu\">\r\n                        <h3>Employer Quick Access</h3>\r\n                        <ul>\r\n                          <li>\r\n                            <Link to=\"#\" onClick={handleLinkClick}>\r\n                              <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n                            </Link>\r\n                          </li>\r\n                          <li><Link to=\"#\" onClick={handleLinkClick}>Account</Link></li>\r\n                          {renderLogoutItem()}\r\n                        </ul>\r\n                      </div>\r\n                    </li>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {(auth.user?.role !== ROLE_ADMIN && auth.user?.role !== ROLE_SUPERADMIN && auth.user?.role !== ROLE_EMPLOYER) && (\r\n                <>\r\n                  <Link to=\"/Search-Jobs\" className=\"cta-btn hPostJob-btn\">Find A Job</Link>\r\n                  <div className=\"cta-dropdown\">\r\n                    <li className={activeDropdown === 4 ? 'active' : ''}>\r\n                      <Link to=\"#\" className=\"dropdown-toggle\" onClick={(e) => toggleDropdown(4, e)}>\r\n                        <img\r\n                          className=\"profile-image me-2\"\r\n                          src={getProfileImageSrc(auth?.user?.photo || user?.photo)}\r\n                          alt={getUserDisplayName(auth.user)}\r\n                          aria-label=\"User profile photo\"\r\n                          role=\"button\"\r\n                          style={{ borderRadius: \"50%\", height: \"35px\", width: \"35px\" }}\r\n                        />\r\n                        {getUserDisplayName(auth.user)}\r\n                      </Link>\r\n                      <div className=\"mega-menu\">\r\n                        <h3>Job Seeker Quick Access</h3>\r\n                        <ul>\r\n                          <li>\r\n                            <Link to=\"/Applicant-Profile-Dashboard\" onClick={() => { window.location.href = \"/Applicant-Profile-Dashboard\"; }}>\r\n                              <i className=\"mdi mdi-home menu-icon me-2 text-success\"></i> Dashboard\r\n                            </Link>\r\n                          </li>\r\n                          <li>\r\n                            <Link to={`/Applicant/Profile/${auth?.user?.userId}`} onClick={() => { window.location.href = `/Applicant/Profile/${auth?.user?.userId}`; }}>\r\n                              <i className=\"mdi mdi-account-key menu-icon me-2 text-success\"></i> Account\r\n                            </Link>\r\n                          </li>\r\n                          {renderLogoutItem()}\r\n                        </ul>\r\n                      </div>\r\n                    </li>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default TestHomeHeader;\r\n","import React from \"react\";\r\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useAuth } from \"../../Context/AuthContext\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\n// Toast configuration constants\r\nconst TOAST_CONFIG = {\r\n  position: \"top-center\",\r\n  autoClose: 5000,\r\n  closeOnClick: true,\r\n  pauseOnHover: true,\r\n  theme: \"light\"\r\n};\r\n\r\n/**\r\n * Custom hook to handle logout logic\r\n * @returns {Object} Object containing handleLogout function\r\n */\r\nexport const useLogout = () => {\r\n  const [auth, setAuth] = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n \r\n  const notifyError = (msg) => toast.error(msg, TOAST_CONFIG);\r\n  const notifySuccess = (msg) => toast.success(msg, TOAST_CONFIG);\r\n \r\n  const handleLogout = () => {\r\n    try {\r\n      setAuth({ ...auth, user: null, token: \"\" });\r\n      localStorage.removeItem(\"userAuthDetails\");\r\n      notifySuccess(\"You have Logged Out Successfully!\");\r\n      navigate(location.state || \"/Login\");\r\n      \r\n      // Consider using navigate with a refresh parameter instead of manual reload\r\n      // This avoids potential memory leaks or incomplete navigation\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error(\"Logout error:\", error);\r\n      notifyError(\"Something went wrong during logout!\");\r\n    }\r\n  };\r\n \r\n  return { handleLogout };\r\n};\r\n\r\n/**\r\n * Logout Button Component - can be used as a standalone component\r\n * @param {Object} props - Component props\r\n * @param {string} props.className - Optional CSS class\r\n * @param {React.ReactNode} props.children - Optional custom content\r\n */\r\nconst LogoutButton = ({ className, children }) => {\r\n  const { handleLogout } = useLogout();  \r\n \r\n  return (\r\n    <button\r\n      onClick={handleLogout}\r\n      className={className || \"logout-button\"}\r\n      type=\"button\" // Explicitly define button type for better accessibility\r\n    >\r\n      {children || (\r\n        <>          \r\n         <span className=\"menu-title\">Logout</span>\r\n         <i className=\"mdi mdi-logout menu-icon\"></i>\r\n        </>\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\n/**\r\n * Logout Link Component - for use within navigation that requires <Link>\r\n * @param {Object} props - Component props\r\n * @param {string} props.className - Optional CSS class\r\n * @param {string} props.to - Optional target path (unused)\r\n * @param {React.ReactNode} props.children - Optional custom content\r\n */\r\nconst LogoutLink = ({ className, to = \"/Test-Login\", children }) => {\r\n  const { handleLogout } = useLogout();\r\n \r\n  return (\r\n    <Link\r\n      to=\"#\"\r\n      className={className || \"menu-title\"}\r\n      onClick={(e) => {\r\n        e.preventDefault();\r\n        handleLogout();\r\n      }}\r\n    >\r\n      {children || (\r\n        <>\r\n          <span className=\"menu-title\">Logout</span>\r\n          <i className=\"mdi mdi-logout menu-icon\"></i>\r\n        </>\r\n      )}\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport { LogoutButton, LogoutLink };\r\nexport default LogoutLink;"],"names":["Modal","STORAGE_USER_KEY","process","STORAGE_MESSAGES_PREFIX","STORAGE_INPUT_KEY","REACT_APP_CHAT_INPUT_KEY","timeAgo","ts","d","Date","diff","Math","floor","now","getTime","toLocaleDateString","defaultAvatar","getProfileImageSrc","userPhoto","arguments","length","undefined","startsWith","async","fetchBusinessHours","res","API","get","data","success","err","logWithIcon","error","ChatBotIcon","socket","isConnected","useSocket","auth","useAuth","userFromAuth","user","navigate","useNavigate","input","setInput","useState","isOpen","setIsOpen","session","setSession","messages","setMessages","businessInfo","setBusinessInfo","unreadCount","setUnreadCount","showGuestForm","setShowGuestForm","isSubmittingGuest","setIsSubmittingGuest","guestFormSubmitted","setGuestFormSubmitted","guestFormErrors","setGuestFormErrors","defaultMessagesLoaded","setDefaultMessagesLoaded","hasUserSentMessage","setHasUserSentMessage","showQuitConfirm","setShowQuitConfirm","pendingMessages","setPendingMessages","Set","isQuitting","setIsQuitting","guestInfo","setGuestInfo","firstName","lastName","email","phone","audioRef","useRef","messagesEndRef","quitTimeoutRef","userFormSubmitted","useMemo","active","storageKey","result","guest","_id","id","handleQuit","useCallback","console","warn","log","setTimeout","connected","emit","sessionId","ReactDOM","currentSessionKey","localStorage","removeItem","keysToRemove","i","key","push","forEach","resetGuestForm","requestAnimationFrame","resetState","cancelGuestForm","prev","lastMessage","from","slice","handleModalOverlayClick","e","target","currentTarget","useEffect","current","clearTimeout","handleEscKey","document","addEventListener","removeEventListener","savedInput","getItem","trim","timeoutId","setItem","raw","u","JSON","parse","hasRequiredInfo","Boolean","loadedMessages","some","msg","stringify","scrollIntoView","behavior","beepUrl","Audio","normalizeMessage","_msg$metadata","_session$agent","_msg$metadata2","random","text","message","createdAt","timestamp","senderType","avatar","metadata","senderAvatar","agent","photo","FavIconLogo","quickReplies","handleIncomingMessage","rawMsg","_rawMsg$metadata","redirectUrl","url","window","open","prevMessages","existingMsg","abs","newPending","pendingId","includes","substring","delete","onSessionCreated","payloadRaw","_payloadRaw$body","payload","body","sess","businessHours","welcomeMessage","guestSessionEvent","guestEmail","onGuestSessionCreated","onMessageNew","onMessageStatus","_ref","messageId","status","map","m","on","off","createSession","hasSocket","hasSession","sessionData","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","entryPoint","selectedOption","firstname","lastname","authenticatedUser","userId","guestFirstName","guestLastName","guestPhone","_result$body","validateGuestForm","errors","test","handleGuestFormChange","name","value","newErrors","submit","submitGuestForm","Object","keys","response","post","Error","lastUserMessage","find","biz","outsideHoursMessage","outsideHoursOptions","messageType","_error$response","_error$response$data","sendMessage","isLiveAgentRequest","toLowerCase","userMessage","requestType","connectingMessage","isTemporary","handleQuickReply","option","userSelection","tempMessage","initializeChatSession","QuitConfirmationModal","_jsx","className","onClick","children","_jsxs","stopPropagation","disabled","_Fragment","inputEnabled","next","handleHeaderClick","Link","to","src","alt","title","renderMessage","index","_m$quickReplies","isUser","qr","ref","onChange","placeholder","onKeyDown","type","autoComplete","required","Footer","_auth$user","_auth$user2","_auth$user5","_auth$user6","currentYear","getFullYear","setAuth","setUser","params","useParams","fetchRegUserById","useLocation","role","location","href","_auth$user3","userRole","linkPath","_auth$user4","LogoutLink","FaLinkedin","FaFacebook","BsTwitterX","FaWhatsapp","TestHomeHeader","_auth$user7","_auth$user8","_auth$user9","_auth$user0","_auth$user1","_auth$user10","_auth$user11","_auth$user12","_auth$user14","_auth$user15","_auth$user16","_auth$user17","_auth$user18","_auth$user19","_auth$user20","_auth$user21","_auth$user22","mobileMenuOpen","setMobileMenuOpen","activeDropdown","setActiveDropdown","isSticky","setIsSticky","handleScroll","scrollY","toggleDropdown","innerWidth","preventDefault","handleLinkClick","handleClickOutside","closest","handleResize","getUserDisplayName","userObj","first_name","last_name","renderAdminMenuItems","renderSuperAdminMenuItems","renderLogoutItem","LogoutNavbarLink","style","color","Logo","toggleMobileMenu","marginBottom","fontSize","borderRadius","height","width","_auth$user13","_auth$user23","TOAST_CONFIG","position","autoClose","closeOnClick","pauseOnHover","theme","useLogout","handleLogout","token","toast","state","reload","notifyError","_ref2"],"sourceRoot":""}